{"version":3,"file":"y-webrtc.js","sources":["node_modules/parseuri/index.js","node_modules/ms/index.js","node_modules/debug/src/debug.js","node_modules/debug/src/browser.js","node_modules/socket.io-client/lib/url.js","node_modules/component-emitter/index.js","node_modules/isarray/index.js","node_modules/socket.io-parser/is-buffer.js","node_modules/socket.io-parser/binary.js","node_modules/socket.io-parser/index.js","node_modules/has-cors/index.js","node_modules/engine.io-client/lib/xmlhttprequest.js","node_modules/engine.io-parser/lib/keys.js","node_modules/has-binary2/index.js","node_modules/arraybuffer.slice/index.js","node_modules/after/index.js","node_modules/engine.io-parser/lib/utf8.js","node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","node_modules/blob/index.js","node_modules/engine.io-parser/lib/browser.js","node_modules/engine.io-client/lib/transport.js","node_modules/parseqs/index.js","node_modules/component-inherit/index.js","node_modules/yeast/index.js","node_modules/engine.io-client/lib/transports/polling.js","node_modules/engine.io-client/lib/transports/polling-xhr.js","node_modules/engine.io-client/lib/transports/polling-jsonp.js","node_modules/rollup-plugin-node-resolve/src/empty.js","node_modules/engine.io-client/lib/transports/websocket.js","node_modules/engine.io-client/lib/transports/index.js","node_modules/indexof/index.js","node_modules/engine.io-client/lib/socket.js","node_modules/engine.io-client/lib/index.js","node_modules/to-array/index.js","node_modules/socket.io-client/lib/on.js","node_modules/component-bind/index.js","node_modules/socket.io-client/lib/socket.js","node_modules/backo2/index.js","node_modules/socket.io-client/lib/manager.js","node_modules/socket.io-client/lib/index.js","src/y-webrtc.js"],"sourcesContent":["/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || global.location;\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof global.Buffer === 'function' && typeof global.Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof global.ArrayBuffer === 'function';\n\nvar isView = (function () {\n  if (withNativeArrayBuffer && typeof global.ArrayBuffer.isView === 'function') {\n    return global.ArrayBuffer.isView;\n  } else {\n    return function (obj) { return obj.buffer instanceof global.ArrayBuffer; };\n  }\n})();\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && global.Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof global.ArrayBuffer || isView(obj)));\n}\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof global.Blob === 'function' || toString.call(global.Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof global.File === 'function' || toString.call(global.File) === '[object FileConstructor]';\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an ecoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  }\n  else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  }\n  else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new global[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint, strict) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tif (strict) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t\t' is not a scalar value'\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint, strict) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\t\tcodePoint = 0xFFFD;\n\t\t\t}\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol(strict) {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString, opts) {\n\t\topts = opts || {};\n\t\tvar strict = false !== opts.strict;\n\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.1.2',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (global && global.ArrayBuffer) {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (Blob && data instanceof global.Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    packet.data = fr.result;\n    exports.encodePacket(packet, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (Blob && packet.data instanceof global.Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += global.btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = opts.hostname !== global.location.hostname ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (global.document) {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (global.document) {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (global.document) {\n  if (global.attachEvent) {\n    global.attachEvent('onunload', unloadHandler);\n  } else if (global.addEventListener) {\n    global.addEventListener('beforeunload', unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","\n/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    if (!global.___eio) global.___eio = [];\n    callbacks = global.___eio;\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (global.document && global.addEventListener) {\n    global.addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","export default {};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\nvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\nvar NodeWebSocket;\nif (typeof window === 'undefined') {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocket = BrowserWebSocket;\nif (!WebSocket && typeof window === 'undefined') {\n  WebSocket = NodeWebSocket;\n}\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocket = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws = this.usingBrowserWebSocket ? (protocols ? new WebSocket(uri, protocols) : new WebSocket(uri)) : new WebSocket(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? global.Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (global.location) {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (global.location && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (global.location ? location.hostname : 'localhost');\n  this.port = opts.port || (global.location && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // other options for Node.js client\n  var freeGlobal = typeof global === 'object' && global;\n  if (freeGlobal.global === freeGlobal) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0)\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","import io from 'socket.io-client'\n\nexport default function extend(Y) {\n    class Connector extends Y.AbstractConnector {\n        constructor(y, options) {\n            if (options === undefined) {\n                throw new Error('Options must not be undefined!')\n            }\n            options.preferUntransformed = true\n            options.generateUserId = options.generateUserId || false\n            if (options.initSync !== false) {\n                options.initSync = true\n            }\n            super(y, options)\n            this._sentSync = false\n            this.options = options\n            options.url = options.url || 'https://yjs.dbis.rwth-aachen.de:5072'\n            var socket = options.socket || io(options.url, options.options)\n            this.socket = socket\n            var self = this\n\n            /****************** start minimal webrtc **********************/\n            var signaling_socket = socket;\n            var ICE_SERVERS = [\n                {urls: \"stun:stun.l.google.com:19302\"},\n                {urls: \"turn:try.refactored.ai:3478\", username: \"test99\", credential: \"test\"}\n            ];\n            var dcs = {};\n            var sdcs = {};\n            this.dcs = dcs;\n            this.sdcs = dcs;\n            var local_media_stream = null;\n            var peers = {};\n            var peer_media_elements = {};\n            var sockets;\n            this.sockets = sockets;\n\n\t        function receiveData(ywebrtc, peer_id) {\n\t            var buf, count;\n\t            return function onmessage(event) {\n\t                if (typeof event.data === 'string') {\n\t                    buf = new Uint8Array(parseInt(event.data));\n\t                    count = 0;\n\t                    return;\n\t                }\n\t                var data = new Uint8Array(event.data);\n\t                buf.set(data, count);\n\t                count += data.byteLength;\n\t                if (count === buf.byteLength) {\n\t                    ywebrtc.receiveMessage(peer_id, buf);\n\t                }\n\t            };\n\t        }\n\n            function init(ywebrtc) {\n                signaling_socket.on('connect', function() {\n                    join_chat_channel(ywebrtc.options.room, {'whatever-you-want-here': 'stuff'});\n                });\n            \n                signaling_socket.on('sockets', function (sockets) {\n                    window.sockets = sockets;\n                });\n            \n                signaling_socket.on('disconnect', function() {\n                    /* Tear down all of our peer connections and remove all the\n                     * media divs when we disconnect */\n                    for (peer_id in peer_media_elements) {\n                        peer_media_elements[peer_id].remove();\n                    }\n                    for (peer_id in peers) {\n                        peers[peer_id].close();\n                    }\n            \n                    peers = {};\n                    peer_media_elements = {};\n                });\n\n                function join_chat_channel(channel, userdata) {\n                    signaling_socket.emit('join', {\"channel\": channel, \"userdata\": userdata});\n                    ywebrtc.userID = signaling_socket.id;\n                }\n\n                function part_chat_channel(channel) {\n                    signaling_socket.emit('part', channel);\n                }\n            \n            \n                signaling_socket.on('addPeer', function(config) {\n                    var peer_id = config.peer_id;\n            \n                    if (peer_id in peers) {\n                        /* This could happen if the user joins multiple channels where the other peer is also in. */\n                        return;\n                    }\n            \n                    var peer_connection = new RTCPeerConnection({\"iceServers\": ICE_SERVERS});\n                    peers[peer_id] = peer_connection;\n\n                    var dataChannel = peer_connection.createDataChannel('data');\n                    var syncDataChannel = peer_connection.createDataChannel('sync_data');\n\n                    dataChannel.binaryType = 'arraybuffer';\n                    syncDataChannel.binaryType = 'arraybuffer';\n\n                    ywebrtc.dcs[peer_id] = dataChannel;\n                    ywebrtc.sdcs[peer_id] = syncDataChannel;\n\n                    ywebrtc.userJoined(peer_id, 'master');\n\n\t                dataChannel.onmessage = receiveData(ywebrtc, peer_id);\n\t                syncDataChannel.onmessage = function (e) {\n\t                    ywebrtc.receivebuffer(peer_id, e.data);\n\t                };\n\n                    peer_connection.onicecandidate = function(event) {\n                        if (event.candidate) {\n                            signaling_socket.emit('relayICECandidate', {\n                                'peer_id': peer_id, \n                                'ice_candidate': {\n                                    'sdpMLineIndex': event.candidate.sdpMLineIndex,\n                                    'candidate': event.candidate.candidate\n                                }\n                            });\n                        }\n                    }\n            \n                    if (config.should_create_offer) {\n                        peer_connection.createOffer(\n                            function (local_description) { \n                                peer_connection.setLocalDescription(local_description,\n                                    function() { \n                                        signaling_socket.emit('relaySessionDescription', \n                                            {'peer_id': peer_id, 'session_description': local_description});\n                                    },\n                                    function() { Alert(\"Offer setLocalDescription failed!\"); }\n                                );\n                            },\n                            function (error) {\n                                console.log(\"Error sending offer: \", error);\n                            });\n                    }\n                });\n            \n            \n                /** \n                 * Peers exchange session descriptions which contains information\n                 * about their audio / video settings and that sort of stuff. First\n                 * the 'offerer' sends a description to the 'answerer' (with type\n                 * \"offer\"), then the answerer sends one back (with type \"answer\").  \n                 */\n                signaling_socket.on('sessionDescription', function(config) {\n                    var peer_id = config.peer_id;\n                    var peer = peers[peer_id];\n            \n                    peer.ondatachannel = function (event) {\n                        var dataChannel = event.channel;\n                        dataChannel.binaryType = 'arraybuffer';\n                        if (dataChannel.label == 'sync_data') {\n\t                        dataChannel.onmessage = receiveData(ywebrtc, peer_id);\n                        } else {\n\t                        dataChannel.onmessage = function (e) {\n\t                            ywebrtc.receivebuffer(peer_id, e.data);\n\t                        };\n                        }\n                    };\n            \n                    var remote_description = config.session_description;\n            \n                    var desc = new RTCSessionDescription(remote_description);\n                    var stuff = peer.setRemoteDescription(desc, \n                        function() {\n                            if (remote_description.type == \"offer\") {\n                                peer.createAnswer(\n                                    function(local_description) {\n                                        peer.setLocalDescription(local_description,\n                                            function() { \n                                                signaling_socket.emit('relaySessionDescription', \n                                                    {'peer_id': peer_id, 'session_description': local_description});\n                                            },\n                                            function() { Alert(\"Answer setLocalDescription failed!\"); }\n                                        );\n                                    },\n                                    function(error) {\n                                        console.log(\"Error creating answer: \", error);\n                                    });\n                            }\n                        },\n                        function(error) {\n                            console.log(\"setRemoteDescription error: \", error);\n                        }\n                    );\n            \n                });\n            \n                signaling_socket.on('iceCandidate', function(config) {\n                    var peer = peers[config.peer_id];\n                    var ice_candidate = config.ice_candidate;\n                    peer.addIceCandidate(new RTCIceCandidate(ice_candidate));\n                });\n            \n            \n                signaling_socket.on('removePeer', function(config) {\n                    var peer_id = config.peer_id;\n                    ywebrtc.userLeft(peer_id);\n                    if (peer_id in peer_media_elements) {\n                        peer_media_elements[peer_id].remove();\n                    }\n                    if (peer_id in peers) {\n                        peers[peer_id].close();\n                    }\n            \n                    delete peers[peer_id];\n                    delete peer_media_elements[config.peer_id];\n                });\n            }\n            init(self);\n            /************************ end minimal_webrtc ****************************/\n        }\n\n        disconnect() {\n        }\n        destroy() {\n        }\n        reconnect() {\n        }\n\n        send(uid, message) {\n            console.log('$$$$$$$$$$$$$$$$ syncing...... $$$$$$$$$$$$$$$$$') ;\n            function send2(dataChannel, data2) {\n                if (dataChannel.readyState === 'open') {\n                    var CHUNK_LEN = 64000;\n                    var len = data2.byteLength;\n                    var n = len / CHUNK_LEN | 0;\n                    dataChannel.send(len);\n                    // split the photo and send in chunks of about 64KB\n                    for (var i = 0; i < n; i++) {\n                        var start = i * CHUNK_LEN,\n                            end = (i + 1) * CHUNK_LEN;\n                        dataChannel.send(data2.subarray(start, end));\n                    }\n                    // send the reminder, if any\n                    if (len % CHUNK_LEN) {\n                        dataChannel.send(data2.subarray(n * CHUNK_LEN));\n                    }\n                } else {\n                    setTimeout(send2, 500, dataChannel, data2);\n                }\n            }\n            send2(this.sdcs[uid], new Uint8Array(message));\n        }\n\n        broadcast(message) {\n            for (var peer_id in this.dcs) {\n                function send2(dataChannel, data2) {\n                    if (dataChannel.readyState === 'open') {\n                        var CHUNK_LEN = 64000;\n                        var len = data2.byteLength;\n                        var n = len / CHUNK_LEN | 0;\n                        dataChannel.send(len);\n                        // split the photo and send in chunks of about 64KB\n                        for (var i = 0; i < n; i++) {\n                            var start = i * CHUNK_LEN,\n                                end = (i + 1) * CHUNK_LEN;\n                            dataChannel.send(data2.subarray(start, end));\n                        }\n                        // send the reminder, if any\n                        if (len % CHUNK_LEN) {\n                            dataChannel.send(data2.subarray(n * CHUNK_LEN));\n                        }\n                    } else {\n                        console.log('Errrrrrrrrrrrrrrrrrrrrrrrrrrrrrr', peer_id);\n                    }\n                }\n                send2(this.dcs[peer_id], new Uint8Array(message));\n            }\n        }\n\n        isDisconnected() {\n            return this.socket.disconnected\n        }\n    }\n    Connector.io = io\n    Y['webrtc'] = Connector\n}\n\nif (typeof Y !== 'undefined') {\n    extend(Y) // eslint-disable-line\n}\n"],"names":["re","parts","parseuri","str","src","b","indexOf","e","substring","replace","length","m","exec","uri","i","source","host","authority","ipv6uri","s","h","d","y","val","options","type","parse","isNaN","long","fmtLong","fmtShort","Error","JSON","stringify","String","match","n","parseFloat","toLowerCase","undefined","ms","Math","round","plural","name","floor","ceil","exports","module","createDebug","debug","coerce","disable","enable","enabled","require$$0","selectColor","namespace","hash","charCodeAt","colors","abs","prevTime","self","curr","Date","diff","prev","args","Array","arguments","unshift","index","format","formatter","formatters","call","splice","formatArgs","logFn","log","console","bind","apply","useColors","color","destroy","init","instances","push","namespaces","save","split","len","skips","RegExp","substr","names","instance","test","stack","message","load","chrome","storage","local","localstorage","window","process","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","parseInt","$1","j","v","err","humanize","c","lastC","Function","prototype","removeItem","r","env","DEBUG","localStorage","url","loc","obj","global","location","protocol","charAt","port","path","ipv6","id","href","Emitter","mixin","key","on","addEventListener","event","fn","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","cb","emit","slice","listeners","hasListeners","toString","isArray","arr","isBuf","withNativeBuffer","Buffer","isBuffer","withNativeArrayBuffer","ArrayBuffer","isView","buffer","Object","withNativeBlob","Blob","withNativeFile","File","packet","buffers","packetData","data","pack","_deconstructPacket","attachments","placeholder","_placeholder","num","newData","_reconstructPacket","callback","_removeBlobs","curKey","containingObject","pendingBlobs","fileReader","FileReader","onload","result","bloblessData","readAsArrayBuffer","Encoder","Decoder","ERROR_PACKET","ERROR","encode","BINARY_EVENT","BINARY_ACK","encodeAsBinary","encoding","encodeAsString","nsp","payload","tryStringify","writeEncoding","deconstruction","binary","deconstructPacket","removeBlobs","reconstructor","add","decodeString","BinaryReconstructor","reconPack","base64","takeBinaryData","p","Number","types","error","buf","next","tryParse","isPayloadValid","finishedReconstruction","binData","reconstructPacket","msg","XMLHttpRequest","opts","xdomain","xscheme","enablesXDR","hasCORS","XDomainRequest","concat","join","keys","has","hasOwnProperty","hasBinary","l","toJSON","arraybuffer","start","end","bytes","byteLength","abv","Uint8Array","ii","after","count","err_cb","bail","noop","proxy","root","freeExports","freeModule","freeGlobal","babelHelpers.typeof","stringFromCharCode","fromCharCode","ucs2decode","string","output","counter","value","extra","ucs2encode","array","checkScalarValue","codePoint","strict","toUpperCase","createByte","shift","encodeCodePoint","symbol","utf8encode","codePoints","byteString","readContinuationByte","byteIndex","byteCount","continuationByte","byteArray","decodeSymbol","byte1","byte2","byte3","byte4","utf8decode","tmp","utf8","define","amd","nodeType","object","this","chars","lookup","bufferLength","encoded1","encoded2","encoded3","encoded4","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","blobSupported","a","size","blobSupportsArrayBufferView","blobBuilderSupported","append","getBlob","mapArrayBufferViews","ary","chunk","copy","set","byteOffset","BlobBuilderConstructor","bb","BlobConstructor","base64encoder","isAndroid","isPhantomJS","dontSendBlobs","packets","open","close","ping","pong","upgrade","packetslist","supportsBinary","encodeArrayBuffer","encodeBlob","encodeBase64Object","encoded","encodeBase64Packet","contentArray","resultBuffer","encodeBlobAsArrayBuffer","fr","encodePacket","blob","b64","readAsDataURL","b64data","typed","basic","btoa","binaryType","decodeBase64Packet","tryDecode","asArray","rest","sliceBuffer","decode","isBinary","encodePayloadAsBlob","encodePayloadAsArrayBuffer","setLengthHeader","encodeOne","doneCallback","map","results","each","done","eachWithIndex","el","decodePayloadAsBinary","chr","decodePacket","ret","encodedPackets","totalLength","reduce","acc","resultArray","bufferIndex","forEach","isString","ab","view","lenStr","binaryIdentifier","lengthAry","bufferTail","tailArray","msgLength","total","Transport","hostname","secure","query","timestampParam","timestampRequests","readyState","agent","socket","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","extraHeaders","localAddress","onError","desc","description","doOpen","doClose","onClose","send","write","onOpen","writable","onData","parser","onPacket","encodeURIComponent","qs","qry","pairs","pair","decodeURIComponent","constructor","alphabet","seed","decoded","yeast","now","Polling","hasXHR2","require$$1","xhr","responseType","forceBase64","inherit","poll","pause","onPause","polling","doPoll","decodePayload","callbackfn","encodePayload","doWrite","schema","sid","parseqs","XHR","Request","empty","requestTimeout","isSSL","xd","xs","request","req","method","sendXhr","pollXhr","async","create","setDisableHeaderCheck","setRequestHeader","withCredentials","timeout","hasXDR","onLoad","onerror","responseText","onreadystatechange","contentType","getResponseHeader","status","setTimeout","requestsCount","requests","onSuccess","cleanup","fromError","abort","response","attachEvent","unloadHandler","JSONPPolling","rNewline","rEscapedNewline","___eio","script","parentNode","removeChild","form","iframe","createElement","insertAt","getElementsByTagName","insertBefore","head","body","appendChild","isUAgecko","area","iframeId","className","position","top","left","target","setAttribute","action","complete","initIframe","html","submit","BrowserWebSocket","WebSocket","MozWebSocket","NodeWebSocket","WS","perMessageDeflate","usingBrowserWebSocket","protocols","check","headers","ws","supports","addEventListeners","onopen","onclose","onmessage","ev","compress","threshold","websocket","jsonp","forceJSONP","JSONP","Socket","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","onlyBinaryUpgrades","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","createTransport","clone","EIO","transport","o","setTransport","onDrain","probe","failed","onTransportOpen","upgradeLosesBinary","upgrading","flush","freezeTransport","onTransportClose","onupgrade","to","onHandshake","setPing","code","filterUpgrades","onHeartbeat","clearTimeout","sendPacket","waitForUpgrade","cleanupAndClose","reason","filteredUpgrades","toArray","list","events","connect","connect_error","connect_timeout","connecting","disconnect","reconnect","reconnect_attempt","reconnect_failed","reconnect_error","reconnecting","io","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","flags","autoConnect","subEvents","subs","hasBin","EVENT","pop","CONNECT","onpacket","sameNamespace","rootNamespaceError","onconnect","onevent","ACK","onack","DISCONNECT","ondisconnect","ack","sent","emitBuffered","Backoff","min","max","factor","jitter","attempts","duration","pow","rand","random","deviation","reset","setMin","setMax","setJitter","Manager","nsps","reconnection","reconnectionAttempts","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","lastPing","packetBuffer","_parser","encoder","decoder","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","eio","skipReconnect","openSub","errorSub","timer","onping","onpong","ondata","ondecoded","onConnecting","processPacketQueue","subsLength","sub","delay","onreconnect","attempt","cache","parsed","newConnection","forceNew","multiplex","extend","Y","Connector","preferUntransformed","generateUserId","initSync","_sentSync","signaling_socket","ICE_SERVERS","urls","username","credential","dcs","sdcs","peers","peer_media_elements","sockets","receiveData","ywebrtc","peer_id","receiveMessage","join_chat_channel","room","remove","channel","userdata","userID","config","peer_connection","RTCPeerConnection","dataChannel","createDataChannel","syncDataChannel","userJoined","receivebuffer","onicecandidate","candidate","sdpMLineIndex","should_create_offer","createOffer","local_description","setLocalDescription","Alert","peer","ondatachannel","label","remote_description","session_description","RTCSessionDescription","stuff","setRemoteDescription","createAnswer","ice_candidate","addIceCandidate","RTCIceCandidate","userLeft","uid","send2","data2","CHUNK_LEN","subarray","AbstractConnector"],"mappings":";;;;;;;;;;;;;;;;;;;CAAA;;;;;;;CAOA,IAAIA,KAAK,yOAAT;;CAEA,IAAIC,QAAQ,CACR,QADQ,EACE,UADF,EACc,WADd,EAC2B,UAD3B,EACuC,MADvC,EAC+C,UAD/C,EAC2D,MAD3D,EACmE,MADnE,EAC2E,UAD3E,EACuF,MADvF,EAC+F,WAD/F,EAC4G,MAD5G,EACoH,OADpH,EAC6H,QAD7H,CAAZ;;CAIA,eAAiB,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;CACpC,QAAIC,MAAMD,GAAV;CAAA,QACIE,IAAIF,IAAIG,OAAJ,CAAY,GAAZ,CADR;CAAA,QAEIC,IAAIJ,IAAIG,OAAJ,CAAY,GAAZ,CAFR;;CAIA,QAAID,KAAK,CAAC,CAAN,IAAWE,KAAK,CAAC,CAArB,EAAwB;CACpBJ,cAAMA,IAAIK,SAAJ,CAAc,CAAd,EAAiBH,CAAjB,IAAsBF,IAAIK,SAAJ,CAAcH,CAAd,EAAiBE,CAAjB,EAAoBE,OAApB,CAA4B,IAA5B,EAAkC,GAAlC,CAAtB,GAA+DN,IAAIK,SAAJ,CAAcD,CAAd,EAAiBJ,IAAIO,MAArB,CAArE;CACH;;CAED,QAAIC,IAAIX,GAAGY,IAAH,CAAQT,OAAO,EAAf,CAAR;CAAA,QACIU,MAAM,EADV;CAAA,QAEIC,IAAI,EAFR;;CAIA,WAAOA,GAAP,EAAY;CACRD,YAAIZ,MAAMa,CAAN,CAAJ,IAAgBH,EAAEG,CAAF,KAAQ,EAAxB;CACH;;CAED,QAAIT,KAAK,CAAC,CAAN,IAAWE,KAAK,CAAC,CAArB,EAAwB;CACpBM,YAAIE,MAAJ,GAAaX,GAAb;CACAS,YAAIG,IAAJ,GAAWH,IAAIG,IAAJ,CAASR,SAAT,CAAmB,CAAnB,EAAsBK,IAAIG,IAAJ,CAASN,MAAT,GAAkB,CAAxC,EAA2CD,OAA3C,CAAmD,IAAnD,EAAyD,GAAzD,CAAX;CACAI,YAAII,SAAJ,GAAgBJ,IAAII,SAAJ,CAAcR,OAAd,CAAsB,GAAtB,EAA2B,EAA3B,EAA+BA,OAA/B,CAAuC,GAAvC,EAA4C,EAA5C,EAAgDA,OAAhD,CAAwD,IAAxD,EAA8D,GAA9D,CAAhB;CACAI,YAAIK,OAAJ,GAAc,IAAd;CACH;;CAED,WAAOL,GAAP;CACH,CAzBD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CCbA;;;;CAIA,IAAIM,IAAI,IAAR;CACA,IAAIR,IAAIQ,IAAI,EAAZ;CACA,IAAIC,IAAIT,IAAI,EAAZ;CACA,IAAIU,IAAID,IAAI,EAAZ;CACA,IAAIE,IAAID,IAAI,MAAZ;;;;;;;;;;;;;;;;CAgBA,SAAiB,WAAA,CAASE,GAAT,EAAcC,OAAd,EAAuB;CACtCA,YAAUA,WAAW,EAArB;CACA,MAAIC,cAAcF,GAAd,yCAAcA,GAAd,CAAJ;CACA,MAAIE,SAAS,QAAT,IAAqBF,IAAIb,MAAJ,GAAa,CAAtC,EAAyC;CACvC,WAAOgB,MAAMH,GAAN,CAAP;CACD,GAFD,MAEO,IAAIE,SAAS,QAAT,IAAqBE,MAAMJ,GAAN,MAAe,KAAxC,EAA+C;CACpD,WAAOC,QAAQI,IAAR,GAAeC,QAAQN,GAAR,CAAf,GAA8BO,SAASP,GAAT,CAArC;CACD;CACD,QAAM,IAAIQ,KAAJ,CACJ,0DACEC,KAAKC,SAAL,CAAeV,GAAf,CAFE,CAAN;CAID,CAZD;;;;;;;;;;CAsBA,SAASG,KAAT,CAAevB,GAAf,EAAoB;CAClBA,QAAM+B,OAAO/B,GAAP,CAAN;CACA,MAAIA,IAAIO,MAAJ,GAAa,GAAjB,EAAsB;CACpB;CACD;CACD,MAAIyB,QAAQ,wHAAwHvB,IAAxH,CACVT,GADU,CAAZ;CAGA,MAAI,CAACgC,KAAL,EAAY;CACV;CACD;CACD,MAAIC,IAAIC,WAAWF,MAAM,CAAN,CAAX,CAAR;CACA,MAAIV,OAAO,CAACU,MAAM,CAAN,KAAY,IAAb,EAAmBG,WAAnB,EAAX;CACA,UAAQb,IAAR;CACE,SAAK,OAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,IAAL;CACA,SAAK,GAAL;CACE,aAAOW,IAAId,CAAX;CACF,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,GAAL;CACE,aAAOc,IAAIf,CAAX;CACF,SAAK,OAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,IAAL;CACA,SAAK,GAAL;CACE,aAAOe,IAAIhB,CAAX;CACF,SAAK,SAAL;CACA,SAAK,QAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,GAAL;CACE,aAAOgB,IAAIzB,CAAX;CACF,SAAK,SAAL;CACA,SAAK,QAAL;CACA,SAAK,MAAL;CACA,SAAK,KAAL;CACA,SAAK,GAAL;CACE,aAAOyB,IAAIjB,CAAX;CACF,SAAK,cAAL;CACA,SAAK,aAAL;CACA,SAAK,OAAL;CACA,SAAK,MAAL;CACA,SAAK,IAAL;CACE,aAAOiB,CAAP;CACF;CACE,aAAOG,SAAP;CApCJ;CAsCD;;;;;;;;;;CAUD,SAAST,QAAT,CAAkBU,EAAlB,EAAsB;CACpB,MAAIA,MAAMnB,CAAV,EAAa;CACX,WAAOoB,KAAKC,KAAL,CAAWF,KAAKnB,CAAhB,IAAqB,GAA5B;CACD;CACD,MAAImB,MAAMpB,CAAV,EAAa;CACX,WAAOqB,KAAKC,KAAL,CAAWF,KAAKpB,CAAhB,IAAqB,GAA5B;CACD;CACD,MAAIoB,MAAM7B,CAAV,EAAa;CACX,WAAO8B,KAAKC,KAAL,CAAWF,KAAK7B,CAAhB,IAAqB,GAA5B;CACD;CACD,MAAI6B,MAAMrB,CAAV,EAAa;CACX,WAAOsB,KAAKC,KAAL,CAAWF,KAAKrB,CAAhB,IAAqB,GAA5B;CACD;CACD,SAAOqB,KAAK,IAAZ;CACD;;;;;;;;;;CAUD,SAASX,OAAT,CAAiBW,EAAjB,EAAqB;CACnB,SAAOG,OAAOH,EAAP,EAAWnB,CAAX,EAAc,KAAd,KACLsB,OAAOH,EAAP,EAAWpB,CAAX,EAAc,MAAd,CADK,IAELuB,OAAOH,EAAP,EAAW7B,CAAX,EAAc,QAAd,CAFK,IAGLgC,OAAOH,EAAP,EAAWrB,CAAX,EAAc,QAAd,CAHK,IAILqB,KAAK,KAJP;CAKD;;;;;;CAMD,SAASG,MAAT,CAAgBH,EAAhB,EAAoBJ,CAApB,EAAuBQ,IAAvB,EAA6B;CAC3B,MAAIJ,KAAKJ,CAAT,EAAY;CACV;CACD;CACD,MAAII,KAAKJ,IAAI,GAAb,EAAkB;CAChB,WAAOK,KAAKI,KAAL,CAAWL,KAAKJ,CAAhB,IAAqB,GAArB,GAA2BQ,IAAlC;CACD;CACD,SAAOH,KAAKK,IAAL,CAAUN,KAAKJ,CAAf,IAAoB,GAApB,GAA0BQ,IAA1B,GAAiC,GAAxC;CACD;;;;;;;;;;CCtJD;;;;;;;CAOAG,YAAUC,cAAA,GAAiBC,YAAYC,KAAZ,GAAoBD,YAAY,SAAZ,IAAyBA,WAAxE;CACAF,gBAAA,GAAiBI,MAAjB;CACAJ,iBAAA,GAAkBK,OAAlB;CACAL,gBAAA,GAAiBM,MAAjB;CACAN,iBAAA,GAAkBO,OAAlB;CACAP,kBAAA,GAAmBQ,UAAnB;;;;;CAKAR,mBAAA,GAAoB,EAApB;;;;;;CAMAA,eAAA,GAAgB,EAAhB;CACAA,eAAA,GAAgB,EAAhB;;;;;;;;CAQAA,oBAAA,GAAqB,EAArB;;;;;;;;;CASA,WAASS,WAAT,CAAqBC,SAArB,EAAgC;CAC9B,QAAIC,OAAO,CAAX;CAAA,QAAc5C,CAAd;;CAEA,SAAKA,CAAL,IAAU2C,SAAV,EAAqB;CACnBC,aAAS,CAACA,QAAQ,CAAT,IAAcA,IAAf,GAAuBD,UAAUE,UAAV,CAAqB7C,CAArB,CAA/B;CACA4C,cAAQ,CAAR,CAFmB;CAGpB;;CAED,WAAOX,QAAQa,MAAR,CAAenB,KAAKoB,GAAL,CAASH,IAAT,IAAiBX,QAAQa,MAAR,CAAelD,MAA/C,CAAP;CACD;;;;;;;;;;CAUD,WAASuC,WAAT,CAAqBQ,SAArB,EAAgC;;CAE9B,QAAIK,QAAJ;;CAEA,aAASZ,KAAT,GAAiB;;CAEf,UAAI,CAACA,MAAMI,OAAX,EAAoB;;CAEpB,UAAIS,OAAOb,KAAX;;;CAGA,UAAIc,OAAO,CAAC,IAAIC,IAAJ,EAAZ;CACA,UAAIzB,KAAKwB,QAAQF,YAAYE,IAApB,CAAT;CACAD,WAAKG,IAAL,GAAY1B,EAAZ;CACAuB,WAAKI,IAAL,GAAYL,QAAZ;CACAC,WAAKC,IAAL,GAAYA,IAAZ;CACAF,iBAAWE,IAAX;;;CAGA,UAAII,OAAO,IAAIC,KAAJ,CAAUC,UAAU5D,MAApB,CAAX;CACA,WAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIsD,KAAK1D,MAAzB,EAAiCI,GAAjC,EAAsC;CACpCsD,aAAKtD,CAAL,IAAUwD,UAAUxD,CAAV,CAAV;CACD;;CAEDsD,WAAK,CAAL,IAAUrB,QAAQI,MAAR,CAAeiB,KAAK,CAAL,CAAf,CAAV;;CAEA,UAAI,aAAa,OAAOA,KAAK,CAAL,CAAxB,EAAiC;;CAE/BA,aAAKG,OAAL,CAAa,IAAb;CACD;;;CAGD,UAAIC,QAAQ,CAAZ;CACAJ,WAAK,CAAL,IAAUA,KAAK,CAAL,EAAQ3D,OAAR,CAAgB,eAAhB,EAAiC,UAAS0B,KAAT,EAAgBsC,MAAhB,EAAwB;;CAEjE,YAAItC,UAAU,IAAd,EAAoB,OAAOA,KAAP;CACpBqC;CACA,YAAIE,YAAY3B,QAAQ4B,UAAR,CAAmBF,MAAnB,CAAhB;CACA,YAAI,eAAe,OAAOC,SAA1B,EAAqC;CACnC,cAAInD,MAAM6C,KAAKI,KAAL,CAAV;CACArC,kBAAQuC,UAAUE,IAAV,CAAeb,IAAf,EAAqBxC,GAArB,CAAR;;;CAGA6C,eAAKS,MAAL,CAAYL,KAAZ,EAAmB,CAAnB;CACAA;CACD;CACD,eAAOrC,KAAP;CACD,OAdS,CAAV;;;CAiBAY,cAAQ+B,UAAR,CAAmBF,IAAnB,CAAwBb,IAAxB,EAA8BK,IAA9B;;CAEA,UAAIW,QAAQ7B,MAAM8B,GAAN,IAAajC,QAAQiC,GAArB,IAA4BC,QAAQD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAxC;CACAF,YAAMI,KAAN,CAAYpB,IAAZ,EAAkBK,IAAlB;CACD;;CAEDlB,UAAMO,SAAN,GAAkBA,SAAlB;CACAP,UAAMI,OAAN,GAAgBP,QAAQO,OAAR,CAAgBG,SAAhB,CAAhB;CACAP,UAAMkC,SAAN,GAAkBrC,QAAQqC,SAAR,EAAlB;CACAlC,UAAMmC,KAAN,GAAc7B,YAAYC,SAAZ,CAAd;CACAP,UAAMoC,OAAN,GAAgBA,OAAhB;;;CAGA,QAAI,eAAe,OAAOvC,QAAQwC,IAAlC,EAAwC;CACtCxC,cAAQwC,IAAR,CAAarC,KAAb;CACD;;CAEDH,YAAQyC,SAAR,CAAkBC,IAAlB,CAAuBvC,KAAvB;;CAEA,WAAOA,KAAP;CACD;;CAED,WAASoC,OAAT,GAAoB;CAClB,QAAId,QAAQzB,QAAQyC,SAAR,CAAkBlF,OAAlB,CAA0B,IAA1B,CAAZ;CACA,QAAIkE,UAAU,CAAC,CAAf,EAAkB;CAChBzB,cAAQyC,SAAR,CAAkBX,MAAlB,CAAyBL,KAAzB,EAAgC,CAAhC;CACA,aAAO,IAAP;CACD,KAHD,MAGO;CACL,aAAO,KAAP;CACD;CACF;;;;;;;;;;CAUD,WAASnB,MAAT,CAAgBqC,UAAhB,EAA4B;CAC1B3C,YAAQ4C,IAAR,CAAaD,UAAb;;CAEA3C,iBAAA,GAAgB,EAAhB;CACAA,iBAAA,GAAgB,EAAhB;;CAEA,QAAIjC,CAAJ;CACA,QAAI8E,QAAQ,CAAC,OAAOF,UAAP,KAAsB,QAAtB,GAAiCA,UAAjC,GAA8C,EAA/C,EAAmDE,KAAnD,CAAyD,QAAzD,CAAZ;CACA,QAAIC,MAAMD,MAAMlF,MAAhB;;CAEA,SAAKI,IAAI,CAAT,EAAYA,IAAI+E,GAAhB,EAAqB/E,GAArB,EAA0B;CACxB,UAAI,CAAC8E,MAAM9E,CAAN,CAAL,EAAe,SADS;CAExB4E,mBAAaE,MAAM9E,CAAN,EAASL,OAAT,CAAiB,KAAjB,EAAwB,KAAxB,CAAb;CACA,UAAIiF,WAAW,CAAX,MAAkB,GAAtB,EAA2B;CACzB3C,gBAAQ+C,KAAR,CAAcL,IAAd,CAAmB,IAAIM,MAAJ,CAAW,MAAML,WAAWM,MAAX,CAAkB,CAAlB,CAAN,GAA6B,GAAxC,CAAnB;CACD,OAFD,MAEO;CACLjD,gBAAQkD,KAAR,CAAcR,IAAd,CAAmB,IAAIM,MAAJ,CAAW,MAAML,UAAN,GAAmB,GAA9B,CAAnB;CACD;CACF;;CAED,SAAK5E,IAAI,CAAT,EAAYA,IAAIiC,QAAQyC,SAAR,CAAkB9E,MAAlC,EAA0CI,GAA1C,EAA+C;CAC7C,UAAIoF,WAAWnD,QAAQyC,SAAR,CAAkB1E,CAAlB,CAAf;CACAoF,eAAS5C,OAAT,GAAmBP,QAAQO,OAAR,CAAgB4C,SAASzC,SAAzB,CAAnB;CACD;CACF;;;;;;;;CAQD,WAASL,OAAT,GAAmB;CACjBL,YAAQM,MAAR,CAAe,EAAf;CACD;;;;;;;;;;CAUD,WAASC,OAAT,CAAiBV,IAAjB,EAAuB;CACrB,QAAIA,KAAKA,KAAKlC,MAAL,GAAc,CAAnB,MAA0B,GAA9B,EAAmC;CACjC,aAAO,IAAP;CACD;CACD,QAAII,CAAJ,EAAO+E,GAAP;CACA,SAAK/E,IAAI,CAAJ,EAAO+E,MAAM9C,QAAQ+C,KAAR,CAAcpF,MAAhC,EAAwCI,IAAI+E,GAA5C,EAAiD/E,GAAjD,EAAsD;CACpD,UAAIiC,QAAQ+C,KAAR,CAAchF,CAAd,EAAiBqF,IAAjB,CAAsBvD,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,KAAP;CACD;CACF;CACD,SAAK9B,IAAI,CAAJ,EAAO+E,MAAM9C,QAAQkD,KAAR,CAAcvF,MAAhC,EAAwCI,IAAI+E,GAA5C,EAAiD/E,GAAjD,EAAsD;CACpD,UAAIiC,QAAQkD,KAAR,CAAcnF,CAAd,EAAiBqF,IAAjB,CAAsBvD,IAAtB,CAAJ,EAAiC;CAC/B,eAAO,IAAP;CACD;CACF;CACD,WAAO,KAAP;CACD;;;;;;;;;;CAUD,WAASO,MAAT,CAAgB5B,GAAhB,EAAqB;CACnB,QAAIA,eAAeQ,KAAnB,EAA0B,OAAOR,IAAI6E,KAAJ,IAAa7E,IAAI8E,OAAxB;CAC1B,WAAO9E,GAAP;CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CChOD;;;;;;CAMAwB,YAAUC,cAAA,GAAiBO,YAA3B;CACAR,aAAA,GAAciC,GAAd;CACAjC,oBAAA,GAAqB+B,UAArB;CACA/B,cAAA,GAAe4C,IAAf;CACA5C,cAAA,GAAeuD,IAAf;CACAvD,mBAAA,GAAoBqC,SAApB;CACArC,iBAAA,GAAkB,eAAe,OAAOwD,MAAtB,IACA,eAAe,OAAOA,OAAOC,OAD7B,GAEED,OAAOC,OAAP,CAAeC,KAFjB,GAGEC,cAHpB;;;;;;CASA3D,gBAAA,GAAiB,CACf,SADe,EACJ,SADI,EACO,SADP,EACkB,SADlB,EAC6B,SAD7B,EACwC,SADxC,EACmD,SADnD,EAEf,SAFe,EAEJ,SAFI,EAEO,SAFP,EAEkB,SAFlB,EAE6B,SAF7B,EAEwC,SAFxC,EAEmD,SAFnD,EAGf,SAHe,EAGJ,SAHI,EAGO,SAHP,EAGkB,SAHlB,EAG6B,SAH7B,EAGwC,SAHxC,EAGmD,SAHnD,EAIf,SAJe,EAIJ,SAJI,EAIO,SAJP,EAIkB,SAJlB,EAI6B,SAJ7B,EAIwC,SAJxC,EAImD,SAJnD,EAKf,SALe,EAKJ,SALI,EAKO,SALP,EAKkB,SALlB,EAK6B,SAL7B,EAKwC,SALxC,EAKmD,SALnD,EAMf,SANe,EAMJ,SANI,EAMO,SANP,EAMkB,SANlB,EAM6B,SAN7B,EAMwC,SANxC,EAMmD,SANnD,EAOf,SAPe,EAOJ,SAPI,EAOO,SAPP,EAOkB,SAPlB,EAO6B,SAP7B,EAOwC,SAPxC,EAOmD,SAPnD,EAQf,SARe,EAQJ,SARI,EAQO,SARP,EAQkB,SARlB,EAQ6B,SAR7B,EAQwC,SARxC,EAQmD,SARnD,EASf,SATe,EASJ,SATI,EASO,SATP,EASkB,SATlB,EAS6B,SAT7B,EASwC,SATxC,EASmD,SATnD,EAUf,SAVe,EAUJ,SAVI,EAUO,SAVP,EAUkB,SAVlB,EAU6B,SAV7B,EAUwC,SAVxC,EAUmD,SAVnD,EAWf,SAXe,EAWJ,SAXI,EAWO,SAXP,EAWkB,SAXlB,EAW6B,SAX7B,EAWwC,SAXxC,CAAjB;;;;;;;;;;CAsBA,WAASqC,SAAT,GAAqB;;;;CAInB,QAAI,OAAOuB,MAAP,KAAkB,WAAlB,IAAiCA,OAAOC,OAAxC,IAAmDD,OAAOC,OAAP,CAAenF,IAAf,KAAwB,UAA/E,EAA2F;CACzF,aAAO,IAAP;CACD;;;CAGD,QAAI,OAAOoF,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoBxE,WAApB,GAAkCH,KAAlC,CAAwC,uBAAxC,CAA/D,EAAiI;CAC/H,aAAO,KAAP;CACD;;;;CAID,WAAQ,OAAO4E,QAAP,KAAoB,WAApB,IAAmCA,SAASC,eAA5C,IAA+DD,SAASC,eAAT,CAAyBC,KAAxF,IAAiGF,SAASC,eAAT,CAAyBC,KAAzB,CAA+BC,gBAAjI;;CAEJ,WAAOP,MAAP,KAAkB,WAAlB,IAAiCA,OAAO1B,OAAxC,KAAoD0B,OAAO1B,OAAP,CAAekC,OAAf,IAA2BR,OAAO1B,OAAP,CAAemC,SAAf,IAA4BT,OAAO1B,OAAP,CAAeoC,KAA1H,CAFI;;;CAKJ,WAAOR,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoBxE,WAApB,GAAkCH,KAAlC,CAAwC,gBAAxC,CAA3D,IAAwHmF,SAASvB,OAAOwB,EAAhB,EAAoB,EAApB,KAA2B,EAL/I;;CAOJ,WAAOV,SAAP,KAAqB,WAArB,IAAoCA,UAAUC,SAA9C,IAA2DD,UAAUC,SAAV,CAAoBxE,WAApB,GAAkCH,KAAlC,CAAwC,oBAAxC,CAP9D;CAQD;;;;;;CAMDY,UAAQ4B,UAAR,CAAmB6C,CAAnB,GAAuB,UAASC,CAAT,EAAY;CACjC,QAAI;CACF,aAAOzF,KAAKC,SAAL,CAAewF,CAAf,CAAP;CACD,KAFD,CAEE,OAAOC,GAAP,EAAY;CACZ,aAAO,iCAAiCA,IAAIrB,OAA5C;CACD;CACF,GAND;;;;;;;;CAeA,WAASvB,UAAT,CAAoBV,IAApB,EAA0B;CACxB,QAAIgB,YAAY,KAAKA,SAArB;;CAEAhB,SAAK,CAAL,IAAU,CAACgB,YAAY,IAAZ,GAAmB,EAApB,IACN,KAAK3B,SADC,IAEL2B,YAAY,KAAZ,GAAoB,GAFf,IAGNhB,KAAK,CAAL,CAHM,IAILgB,YAAY,KAAZ,GAAoB,GAJf,IAKN,GALM,GAKArC,QAAQ4E,QAAR,CAAiB,KAAKzD,IAAtB,CALV;;CAOA,QAAI,CAACkB,SAAL,EAAgB;;CAEhB,QAAIwC,IAAI,YAAY,KAAKvC,KAAzB;CACAjB,SAAKS,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkB+C,CAAlB,EAAqB,gBAArB;;;;;CAKA,QAAIpD,QAAQ,CAAZ;CACA,QAAIqD,QAAQ,CAAZ;CACAzD,SAAK,CAAL,EAAQ3D,OAAR,CAAgB,aAAhB,EAA+B,UAAS0B,KAAT,EAAgB;CAC7C,UAAI,SAASA,KAAb,EAAoB;CACpBqC;CACA,UAAI,SAASrC,KAAb,EAAoB;;;CAGlB0F,gBAAQrD,KAAR;CACD;CACF,KARD;;CAUAJ,SAAKS,MAAL,CAAYgD,KAAZ,EAAmB,CAAnB,EAAsBD,CAAtB;CACD;;;;;;;;;CASD,WAAS5C,GAAT,GAAe;;;CAGb,WAAO,qBAAoBC,OAApB,yCAAoBA,OAApB,MACFA,QAAQD,GADN,IAEF8C,SAASC,SAAT,CAAmB5C,KAAnB,CAAyBP,IAAzB,CAA8BK,QAAQD,GAAtC,EAA2CC,OAA3C,EAAoDX,SAApD,CAFL;CAGD;;;;;;;;;CASD,WAASqB,IAAT,CAAcD,UAAd,EAA0B;CACxB,QAAI;CACF,UAAI,QAAQA,UAAZ,EAAwB;CACtB3C,gBAAQyD,OAAR,CAAgBwB,UAAhB,CAA2B,OAA3B;CACD,OAFD,MAEO;CACLjF,gBAAQyD,OAAR,CAAgBtD,KAAhB,GAAwBwC,UAAxB;CACD;CACF,KAND,CAME,OAAMnF,CAAN,EAAS;CACZ;;;;;;;;;CASD,WAAS+F,IAAT,GAAgB;CACd,QAAI2B,CAAJ;CACA,QAAI;CACFA,UAAIlF,QAAQyD,OAAR,CAAgBtD,KAApB;CACD,KAFD,CAEE,OAAM3C,CAAN,EAAS;;;CAGX,QAAI,CAAC0H,CAAD,IAAM,OAAOrB,OAAP,KAAmB,WAAzB,IAAwC,SAASA,OAArD,EAA8D;CAC5DqB,UAAIrB,QAAQsB,GAAR,CAAYC,KAAhB;CACD;;CAED,WAAOF,CAAP;CACD;;;;;;CAMDlF,UAAQM,MAAR,CAAeiD,MAAf;;;;;;;;;;;;;CAaA,WAASI,YAAT,GAAwB;CACtB,QAAI;CACF,aAAOC,OAAOyB,YAAd;CACD,KAFD,CAEE,OAAO7H,CAAP,EAAU;CACb;;;;;;;;;;;;;;;;;;;;;;;;;;CCjMD;;;;CAKA,IAAI2C,UAAQK,aAAiB,sBAAjB,CAAZ;;;;;;CAMA,YAAiB8E,GAAjB;;;;;;;;;;;CAWA,SAASA,GAAT,CAAcxH,GAAd,EAAmByH,GAAnB,EAAwB;CACtB,MAAIC,MAAM1H,GAAV;;;CAGAyH,QAAMA,OAAOE,cAAAA,CAAOC,QAApB;CACA,MAAI,QAAQ5H,GAAZ,EAAiBA,MAAMyH,IAAII,QAAJ,GAAe,IAAf,GAAsBJ,IAAItH,IAAhC;;;CAGjB,MAAI,aAAa,OAAOH,GAAxB,EAA6B;CAC3B,QAAI,QAAQA,IAAI8H,MAAJ,CAAW,CAAX,CAAZ,EAA2B;CACzB,UAAI,QAAQ9H,IAAI8H,MAAJ,CAAW,CAAX,CAAZ,EAA2B;CACzB9H,cAAMyH,IAAII,QAAJ,GAAe7H,GAArB;CACD,OAFD,MAEO;CACLA,cAAMyH,IAAItH,IAAJ,GAAWH,GAAjB;CACD;CACF;;CAED,QAAI,CAAC,sBAAsBsF,IAAtB,CAA2BtF,GAA3B,CAAL,EAAsC;CACpCqC,cAAM,sBAAN,EAA8BrC,GAA9B;CACA,UAAI,gBAAgB,OAAOyH,GAA3B,EAAgC;CAC9BzH,cAAMyH,IAAII,QAAJ,GAAe,IAAf,GAAsB7H,GAA5B;CACD,OAFD,MAEO;CACLA,cAAM,aAAaA,GAAnB;CACD;CACF;;;CAGDqC,YAAM,UAAN,EAAkBrC,GAAlB;CACA0H,UAAMrI,WAASW,GAAT,CAAN;CACD;;;CAGD,MAAI,CAAC0H,IAAIK,IAAT,EAAe;CACb,QAAI,cAAczC,IAAd,CAAmBoC,IAAIG,QAAvB,CAAJ,EAAsC;CACpCH,UAAIK,IAAJ,GAAW,IAAX;CACD,KAFD,MAEO,IAAI,eAAezC,IAAf,CAAoBoC,IAAIG,QAAxB,CAAJ,EAAuC;CAC5CH,UAAIK,IAAJ,GAAW,KAAX;CACD;CACF;;CAEDL,MAAIM,IAAJ,GAAWN,IAAIM,IAAJ,IAAY,GAAvB;;CAEA,MAAIC,OAAOP,IAAIvH,IAAJ,CAASV,OAAT,CAAiB,GAAjB,MAA0B,CAAC,CAAtC;CACA,MAAIU,OAAO8H,OAAO,MAAMP,IAAIvH,IAAV,GAAiB,GAAxB,GAA8BuH,IAAIvH,IAA7C;;;CAGAuH,MAAIQ,EAAJ,GAASR,IAAIG,QAAJ,GAAe,KAAf,GAAuB1H,IAAvB,GAA8B,GAA9B,GAAoCuH,IAAIK,IAAjD;;CAEAL,MAAIS,IAAJ,GAAWT,IAAIG,QAAJ,GAAe,KAAf,GAAuB1H,IAAvB,IAA+BsH,OAAOA,IAAIM,IAAJ,KAAaL,IAAIK,IAAxB,GAA+B,EAA/B,GAAqC,MAAML,IAAIK,IAA9E,CAAX;;CAEA,SAAOL,GAAP;CACD;;;;;;;;CCzED;;;;CAIA,EAAmC;CACjCvF,kBAAA,GAAiBiG,OAAjB;CACD;;;;;;;;CAQD,WAASA,OAAT,CAAiBV,GAAjB,EAAsB;CACpB,QAAIA,GAAJ,EAAS,OAAOW,MAAMX,GAAN,CAAP;CACV;;;;;;;;;CAUD,WAASW,KAAT,CAAeX,GAAf,EAAoB;CAClB,SAAK,IAAIY,GAAT,IAAgBF,QAAQlB,SAAxB,EAAmC;CACjCQ,UAAIY,GAAJ,IAAWF,QAAQlB,SAAR,CAAkBoB,GAAlB,CAAX;CACD;CACD,WAAOZ,GAAP;CACD;;;;;;;;;;;CAWDU,UAAQlB,SAAR,CAAkBqB,EAAlB,GACAH,QAAQlB,SAAR,CAAkBsB,gBAAlB,GAAqC,UAASC,KAAT,EAAgBC,EAAhB,EAAmB;CACtD,SAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;CACA,KAAC,KAAKA,UAAL,CAAgB,MAAMF,KAAtB,IAA+B,KAAKE,UAAL,CAAgB,MAAMF,KAAtB,KAAgC,EAAhE,EACG7D,IADH,CACQ8D,EADR;CAEA,WAAO,IAAP;CACD,GAND;;;;;;;;;;;;CAkBAN,UAAQlB,SAAR,CAAkB0B,IAAlB,GAAyB,UAASH,KAAT,EAAgBC,EAAhB,EAAmB;CAC1C,aAASH,EAAT,GAAc;CACZ,WAAKM,GAAL,CAASJ,KAAT,EAAgBF,EAAhB;CACAG,SAAGpE,KAAH,CAAS,IAAT,EAAeb,SAAf;CACD;;CAED8E,OAAGG,EAAH,GAAQA,EAAR;CACA,SAAKH,EAAL,CAAQE,KAAR,EAAeF,EAAf;CACA,WAAO,IAAP;CACD,GATD;;;;;;;;;;;;CAqBAH,UAAQlB,SAAR,CAAkB2B,GAAlB,GACAT,QAAQlB,SAAR,CAAkB4B,cAAlB,GACAV,QAAQlB,SAAR,CAAkB6B,kBAAlB,GACAX,QAAQlB,SAAR,CAAkB8B,mBAAlB,GAAwC,UAASP,KAAT,EAAgBC,EAAhB,EAAmB;CACzD,SAAKC,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;;;CAGA,QAAI,KAAKlF,UAAU5D,MAAnB,EAA2B;CACzB,WAAK8I,UAAL,GAAkB,EAAlB;CACA,aAAO,IAAP;CACD;;;CAGD,QAAIM,YAAY,KAAKN,UAAL,CAAgB,MAAMF,KAAtB,CAAhB;CACA,QAAI,CAACQ,SAAL,EAAgB,OAAO,IAAP;;;CAGhB,QAAI,KAAKxF,UAAU5D,MAAnB,EAA2B;CACzB,aAAO,KAAK8I,UAAL,CAAgB,MAAMF,KAAtB,CAAP;CACA,aAAO,IAAP;CACD;;;CAGD,QAAIS,EAAJ;CACA,SAAK,IAAIjJ,IAAI,CAAb,EAAgBA,IAAIgJ,UAAUpJ,MAA9B,EAAsCI,GAAtC,EAA2C;CACzCiJ,WAAKD,UAAUhJ,CAAV,CAAL;CACA,UAAIiJ,OAAOR,EAAP,IAAaQ,GAAGR,EAAH,KAAUA,EAA3B,EAA+B;CAC7BO,kBAAUjF,MAAV,CAAiB/D,CAAjB,EAAoB,CAApB;CACA;CACD;CACF;CACD,WAAO,IAAP;CACD,GAhCD;;;;;;;;;;CA0CAmI,UAAQlB,SAAR,CAAkBiC,IAAlB,GAAyB,UAASV,KAAT,EAAe;CACtC,SAAKE,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;CACA,QAAIpF,OAAO,GAAG6F,KAAH,CAASrF,IAAT,CAAcN,SAAd,EAAyB,CAAzB,CAAX;CAAA,QACIwF,YAAY,KAAKN,UAAL,CAAgB,MAAMF,KAAtB,CADhB;;CAGA,QAAIQ,SAAJ,EAAe;CACbA,kBAAYA,UAAUG,KAAV,CAAgB,CAAhB,CAAZ;CACA,WAAK,IAAInJ,IAAI,CAAR,EAAW+E,MAAMiE,UAAUpJ,MAAhC,EAAwCI,IAAI+E,GAA5C,EAAiD,EAAE/E,CAAnD,EAAsD;CACpDgJ,kBAAUhJ,CAAV,EAAaqE,KAAb,CAAmB,IAAnB,EAAyBf,IAAzB;CACD;CACF;;CAED,WAAO,IAAP;CACD,GAbD;;;;;;;;;;CAuBA6E,UAAQlB,SAAR,CAAkBmC,SAAlB,GAA8B,UAASZ,KAAT,EAAe;CAC3C,SAAKE,UAAL,GAAkB,KAAKA,UAAL,IAAmB,EAArC;CACA,WAAO,KAAKA,UAAL,CAAgB,MAAMF,KAAtB,KAAgC,EAAvC;CACD,GAHD;;;;;;;;;;CAaAL,UAAQlB,SAAR,CAAkBoC,YAAlB,GAAiC,UAASb,KAAT,EAAe;CAC9C,WAAO,CAAC,CAAE,KAAKY,SAAL,CAAeZ,KAAf,EAAsB5I,MAAhC;CACD,GAFD;;;;;;;;CChKA,IAAI0J,WAAW,GAAGA,QAAlB;;CAEA,cAAiB/F,MAAMgG,OAAN,IAAiB,UAAUC,GAAV,EAAe;CAC/C,SAAOF,SAASxF,IAAT,CAAc0F,GAAd,KAAsB,gBAA7B;CACD,CAFD;;;;;;;CCDA,eAAiBC,KAAjB;;CAEA,IAAIC,mBAAmB,OAAOhC,cAAAA,CAAOiC,MAAd,KAAyB,UAAzB,IAAuC,OAAOjC,cAAAA,CAAOiC,MAAPjC,CAAckC,QAArB,KAAkC,UAAhG;CACA,IAAIC,wBAAwB,OAAOnC,cAAAA,CAAOoC,WAAd,KAA8B,UAA1D;;CAEA,IAAIC,SAAU,YAAY;CACxB,MAAIF,yBAAyB,OAAOnC,cAAAA,CAAOoC,WAAPpC,CAAmBqC,MAA1B,KAAqC,UAAlE,EAA8E;CAC5E,WAAOrC,cAAAA,CAAOoC,WAAPpC,CAAmBqC,MAA1B;CACD,GAFD,MAEO;CACL,WAAO,UAAUtC,GAAV,EAAe;CAAE,aAAOA,IAAIuC,MAAJ,YAAsBtC,cAAAA,CAAOoC,WAApC;CAAkD,KAA1E;CACD;CACF,CANY,EAAb;;;;;;;;CAcA,SAASL,KAAT,CAAehC,GAAf,EAAoB;CAClB,SAAQiC,oBAAoBhC,cAAAA,CAAOiC,MAAPjC,CAAckC,QAAdlC,CAAuBD,GAAvBC,CAArB,IACEmC,0BAA0BpC,eAAeC,cAAAA,CAAOoC,WAAtB,IAAqCC,OAAOtC,GAAP,CAA/D,CADT;CAED;;;;;;;;;;;CCvBD;;;;;;CAQA,IAAI6B,aAAWW,OAAOhD,SAAP,CAAiBqC,QAAhC;CACA,IAAIY,iBAAiB,OAAOxC,cAAAA,CAAOyC,IAAd,KAAuB,UAAvB,IAAqCb,WAASxF,IAAT,CAAc4D,cAAAA,CAAOyC,IAArB,MAA+B,0BAAzF;CACA,IAAIC,iBAAiB,OAAO1C,cAAAA,CAAO2C,IAAd,KAAuB,UAAvB,IAAqCf,WAASxF,IAAT,CAAc4D,cAAAA,CAAO2C,IAArB,MAA+B,0BAAzF;;;;;;;;;;;;CAYA,wBAA4B,0BAAA,CAASC,MAAT,EAAiB;CAC3C,MAAIC,UAAU,EAAd;CACA,MAAIC,aAAaF,OAAOG,IAAxB;CACA,MAAIC,OAAOJ,MAAX;CACAI,OAAKD,IAAL,GAAYE,mBAAmBH,UAAnB,EAA+BD,OAA/B,CAAZ;CACAG,OAAKE,WAAL,GAAmBL,QAAQ3K,MAA3B,CAL2C;CAM3C,SAAO,EAAC0K,QAAQI,IAAT,EAAeH,SAASA,OAAxB,EAAP;CACD,CAPD;;CASA,SAASI,kBAAT,CAA4BF,IAA5B,EAAkCF,OAAlC,EAA2C;CACzC,MAAI,CAACE,IAAL,EAAW,OAAOA,IAAP;;CAEX,MAAIhB,QAAMgB,IAAN,CAAJ,EAAiB;CACf,QAAII,cAAc,EAAEC,cAAc,IAAhB,EAAsBC,KAAKR,QAAQ3K,MAAnC,EAAlB;CACA2K,YAAQ5F,IAAR,CAAa8F,IAAb;CACA,WAAOI,WAAP;CACD,GAJD,MAIO,IAAItB,QAAQkB,IAAR,CAAJ,EAAmB;CACxB,QAAIO,UAAU,IAAIzH,KAAJ,CAAUkH,KAAK7K,MAAf,CAAd;CACA,SAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIyK,KAAK7K,MAAzB,EAAiCI,GAAjC,EAAsC;CACpCgL,cAAQhL,CAAR,IAAa2K,mBAAmBF,KAAKzK,CAAL,CAAnB,EAA4BuK,OAA5B,CAAb;CACD;CACD,WAAOS,OAAP;CACD,GANM,MAMA,IAAI,QAAOP,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,EAAEA,gBAAgBtH,IAAlB,CAAhC,EAAyD;CAC9D,QAAI6H,UAAU,EAAd;CACA,SAAK,IAAI3C,GAAT,IAAgBoC,IAAhB,EAAsB;CACpBO,cAAQ3C,GAAR,IAAesC,mBAAmBF,KAAKpC,GAAL,CAAnB,EAA8BkC,OAA9B,CAAf;CACD;CACD,WAAOS,OAAP;CACD;CACD,SAAOP,IAAP;CACD;;;;;;;;;;;CAWD,wBAA4B,0BAAA,CAASH,MAAT,EAAiBC,OAAjB,EAA0B;CACpDD,SAAOG,IAAP,GAAcQ,mBAAmBX,OAAOG,IAA1B,EAAgCF,OAAhC,CAAd;CACAD,SAAOM,WAAP,GAAqBnJ,SAArB,CAFoD;CAGpD,SAAO6I,MAAP;CACD,CAJD;;CAMA,SAASW,kBAAT,CAA4BR,IAA5B,EAAkCF,OAAlC,EAA2C;CACzC,MAAI,CAACE,IAAL,EAAW,OAAOA,IAAP;;CAEX,MAAIA,QAAQA,KAAKK,YAAjB,EAA+B;CAC7B,WAAOP,QAAQE,KAAKM,GAAb,CAAP,CAD6B;CAE9B,GAFD,MAEO,IAAIxB,QAAQkB,IAAR,CAAJ,EAAmB;CACxB,SAAK,IAAIzK,IAAI,CAAb,EAAgBA,IAAIyK,KAAK7K,MAAzB,EAAiCI,GAAjC,EAAsC;CACpCyK,WAAKzK,CAAL,IAAUiL,mBAAmBR,KAAKzK,CAAL,CAAnB,EAA4BuK,OAA5B,CAAV;CACD;CACF,GAJM,MAIA,IAAI,QAAOE,IAAP,yCAAOA,IAAP,OAAgB,QAApB,EAA8B;CACnC,SAAK,IAAIpC,GAAT,IAAgBoC,IAAhB,EAAsB;CACpBA,WAAKpC,GAAL,IAAY4C,mBAAmBR,KAAKpC,GAAL,CAAnB,EAA8BkC,OAA9B,CAAZ;CACD;CACF;;CAED,SAAOE,IAAP;CACD;;;;;;;;;;;;CAYD,kBAAsB,oBAAA,CAASA,IAAT,EAAeS,QAAf,EAAyB;CAC7C,WAASC,YAAT,CAAsB1D,GAAtB,EAA2B2D,MAA3B,EAAmCC,gBAAnC,EAAqD;CACnD,QAAI,CAAC5D,GAAL,EAAU,OAAOA,GAAP;;;CAGV,QAAKyC,kBAAkBzC,eAAe0C,IAAlC,IACCC,kBAAkB3C,eAAe4C,IADtC,EAC6C;CAC3CiB;;;CAGA,UAAIC,aAAa,IAAIC,UAAJ,EAAjB;CACAD,iBAAWE,MAAX,GAAoB,YAAW;;CAC7B,YAAIJ,gBAAJ,EAAsB;CACpBA,2BAAiBD,MAAjB,IAA2B,KAAKM,MAAhC;CACD,SAFD,MAGK;CACHC,yBAAe,KAAKD,MAApB;CACD;;;CAGD,YAAG,IAAIJ,YAAP,EAAqB;CACnBJ,mBAASS,YAAT;CACD;CACF,OAZD;;CAcAJ,iBAAWK,iBAAX,CAA6BnE,GAA7B,EAnB2C;CAoB5C,KArBD,MAqBO,IAAI8B,QAAQ9B,GAAR,CAAJ,EAAkB;;CACvB,WAAK,IAAIzH,IAAI,CAAb,EAAgBA,IAAIyH,IAAI7H,MAAxB,EAAgCI,GAAhC,EAAqC;CACnCmL,qBAAa1D,IAAIzH,CAAJ,CAAb,EAAqBA,CAArB,EAAwByH,GAAxB;CACD;CACF,KAJM,MAIA,IAAI,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAAf,IAA2B,CAACgC,QAAMhC,GAAN,CAAhC,EAA4C;;CACjD,WAAK,IAAIY,GAAT,IAAgBZ,GAAhB,EAAqB;CACnB0D,qBAAa1D,IAAIY,GAAJ,CAAb,EAAuBA,GAAvB,EAA4BZ,GAA5B;CACD;CACF;CACF;;CAED,MAAI6D,eAAe,CAAnB;CACA,MAAIK,eAAelB,IAAnB;CACAU,eAAaQ,YAAb;CACA,MAAI,CAACL,YAAL,EAAmB;CACjBJ,aAASS,YAAT;CACD;CACF,CA3CD;;;;;;;;;;;;;;;;;;;;;CChGA;;;;CAIA,MAAIvJ,QAAQK,aAAiB,kBAAjB,CAAZ;;;;;;;;CAYAR,kBAAA,GAAmB,CAAnB;;;;;;;;CAQAA,eAAA,GAAgB,CACd,SADc,EAEd,YAFc,EAGd,OAHc,EAId,KAJc,EAKd,OALc,EAMd,cANc,EAOd,YAPc,CAAhB;;;;;;;;CAgBAA,iBAAA,GAAkB,CAAlB;;;;;;;;CAQAA,oBAAA,GAAqB,CAArB;;;;;;;;CAQAA,eAAA,GAAgB,CAAhB;;;;;;;;CAQAA,aAAA,GAAc,CAAd;;;;;;;;CAQAA,eAAA,GAAgB,CAAhB;;;;;;;;CAQAA,sBAAA,GAAuB,CAAvB;;;;;;;;CAQAA,oBAAA,GAAqB,CAArB;;;;;;;;CAQAA,iBAAA,GAAkB4J,OAAlB;;;;;;;;CAQA5J,iBAAA,GAAkB6J,OAAlB;;;;;;;;CAQA,WAASD,OAAT,GAAmB;;CAEnB,MAAIE,eAAe9J,QAAQ+J,KAAR,GAAgB,gBAAnC;;;;;;;;;;;;CAYAH,UAAQ5E,SAAR,CAAkBgF,MAAlB,GAA2B,UAASxE,GAAT,EAAcyD,QAAd,EAAuB;CAChD9I,UAAM,oBAAN,EAA4BqF,GAA5B;;CAEA,QAAIxF,QAAQiK,YAAR,KAAyBzE,IAAI9G,IAA7B,IAAqCsB,QAAQkK,UAAR,KAAuB1E,IAAI9G,IAApE,EAA0E;CACxEyL,qBAAe3E,GAAf,EAAoByD,QAApB;CACD,KAFD,MAEO;CACL,UAAImB,WAAWC,eAAe7E,GAAf,CAAf;CACAyD,eAAS,CAACmB,QAAD,CAAT;CACD;CACF,GATD;;;;;;;;;;CAmBA,WAASC,cAAT,CAAwB7E,GAAxB,EAA6B;;;CAG3B,QAAIpI,MAAM,KAAKoI,IAAI9G,IAAnB;;;CAGA,QAAIsB,QAAQiK,YAAR,KAAyBzE,IAAI9G,IAA7B,IAAqCsB,QAAQkK,UAAR,KAAuB1E,IAAI9G,IAApE,EAA0E;CACxEtB,aAAOoI,IAAImD,WAAJ,GAAkB,GAAzB;CACD;;;;CAID,QAAInD,IAAI8E,GAAJ,IAAW,QAAQ9E,IAAI8E,GAA3B,EAAgC;CAC9BlN,aAAOoI,IAAI8E,GAAJ,GAAU,GAAjB;CACD;;;CAGD,QAAI,QAAQ9E,IAAIQ,EAAhB,EAAoB;CAClB5I,aAAOoI,IAAIQ,EAAX;CACD;;;CAGD,QAAI,QAAQR,IAAIgD,IAAhB,EAAsB;CACpB,UAAI+B,UAAUC,aAAahF,IAAIgD,IAAjB,CAAd;CACA,UAAI+B,YAAY,KAAhB,EAAuB;CACrBnN,eAAOmN,OAAP;CACD,OAFD,MAEO;CACL,eAAOT,YAAP;CACD;CACF;;CAED3J,UAAM,kBAAN,EAA0BqF,GAA1B,EAA+BpI,GAA/B;CACA,WAAOA,GAAP;CACD;;CAED,WAASoN,YAAT,CAAsBpN,GAAtB,EAA2B;CACzB,QAAI;CACF,aAAO6B,KAAKC,SAAL,CAAe9B,GAAf,CAAP;CACD,KAFD,CAEE,OAAMI,CAAN,EAAQ;CACR,aAAO,KAAP;CACD;CACF;;;;;;;;;;;;CAYD,WAAS2M,cAAT,CAAwB3E,GAAxB,EAA6ByD,QAA7B,EAAuC;;CAErC,aAASwB,aAAT,CAAuBf,YAAvB,EAAqC;CACnC,UAAIgB,iBAAiBC,SAAOC,iBAAP,CAAyBlB,YAAzB,CAArB;CACA,UAAIjB,OAAO4B,eAAeK,eAAerC,MAA9B,CAAX;CACA,UAAIC,UAAUoC,eAAepC,OAA7B;;CAEAA,cAAQ9G,OAAR,CAAgBiH,IAAhB,EALmC;CAMnCQ,eAASX,OAAT,EANmC;CAOpC;;CAEDqC,aAAOE,WAAP,CAAmBrF,GAAnB,EAAwBiF,aAAxB;CACD;;;;;;;;;CASD,WAASZ,OAAT,GAAmB;CACjB,SAAKiB,aAAL,GAAqB,IAArB;CACD;;;;;;CAMD5E,UAAQ2D,QAAQ7E,SAAhB;;;;;;;;;;CAUA6E,UAAQ7E,SAAR,CAAkB+F,GAAlB,GAAwB,UAASvF,GAAT,EAAc;CACpC,QAAI6C,MAAJ;CACA,QAAI,OAAO7C,GAAP,KAAe,QAAnB,EAA6B;CAC3B6C,eAAS2C,aAAaxF,GAAb,CAAT;CACA,UAAIxF,QAAQiK,YAAR,KAAyB5B,OAAO3J,IAAhC,IAAwCsB,QAAQkK,UAAR,KAAuB7B,OAAO3J,IAA1E,EAAgF;;CAC9E,aAAKoM,aAAL,GAAqB,IAAIG,mBAAJ,CAAwB5C,MAAxB,CAArB;;;CAGA,YAAI,KAAKyC,aAAL,CAAmBI,SAAnB,CAA6BvC,WAA7B,KAA6C,CAAjD,EAAoD;CAClD,eAAK1B,IAAL,CAAU,SAAV,EAAqBoB,MAArB;CACD;CACF,OAPD,MAOO;;CACL,aAAKpB,IAAL,CAAU,SAAV,EAAqBoB,MAArB;CACD;CACF,KAZD,MAaK,IAAIb,QAAMhC,GAAN,KAAcA,IAAI2F,MAAtB,EAA8B;;CACjC,UAAI,CAAC,KAAKL,aAAV,EAAyB;CACvB,cAAM,IAAI9L,KAAJ,CAAU,kDAAV,CAAN;CACD,OAFD,MAEO;CACLqJ,iBAAS,KAAKyC,aAAL,CAAmBM,cAAnB,CAAkC5F,GAAlC,CAAT;CACA,YAAI6C,MAAJ,EAAY;;CACV,eAAKyC,aAAL,GAAqB,IAArB;CACA,eAAK7D,IAAL,CAAU,SAAV,EAAqBoB,MAArB;CACD;CACF;CACF,KAVI,MAWA;CACH,YAAM,IAAIrJ,KAAJ,CAAU,mBAAmBwG,GAA7B,CAAN;CACD;CACF,GA7BD;;;;;;;;;;CAuCA,WAASwF,YAAT,CAAsB5N,GAAtB,EAA2B;CACzB,QAAIW,IAAI,CAAR;;CAEA,QAAIsN,IAAI;CACN3M,YAAM4M,OAAOlO,IAAIwI,MAAJ,CAAW,CAAX,CAAP;CADA,KAAR;;CAIA,QAAI,QAAQ5F,QAAQuL,KAAR,CAAcF,EAAE3M,IAAhB,CAAZ,EAAmC;CACjC,aAAO8M,MAAM,yBAAyBH,EAAE3M,IAAjC,CAAP;CACD;;;CAGD,QAAIsB,QAAQiK,YAAR,KAAyBoB,EAAE3M,IAA3B,IAAmCsB,QAAQkK,UAAR,KAAuBmB,EAAE3M,IAAhE,EAAsE;CACpE,UAAI+M,MAAM,EAAV;CACA,aAAOrO,IAAIwI,MAAJ,CAAW,EAAE7H,CAAb,MAAoB,GAA3B,EAAgC;CAC9B0N,eAAOrO,IAAIwI,MAAJ,CAAW7H,CAAX,CAAP;CACA,YAAIA,KAAKX,IAAIO,MAAb,EAAqB;CACtB;CACD,UAAI8N,OAAOH,OAAOG,GAAP,CAAP,IAAsBrO,IAAIwI,MAAJ,CAAW7H,CAAX,MAAkB,GAA5C,EAAiD;CAC/C,cAAM,IAAIiB,KAAJ,CAAU,qBAAV,CAAN;CACD;CACDqM,QAAE1C,WAAF,GAAgB2C,OAAOG,GAAP,CAAhB;CACD;;;CAGD,QAAI,QAAQrO,IAAIwI,MAAJ,CAAW7H,IAAI,CAAf,CAAZ,EAA+B;CAC7BsN,QAAEf,GAAF,GAAQ,EAAR;CACA,aAAO,EAAEvM,CAAT,EAAY;CACV,YAAI8G,IAAIzH,IAAIwI,MAAJ,CAAW7H,CAAX,CAAR;CACA,YAAI,QAAQ8G,CAAZ,EAAe;CACfwG,UAAEf,GAAF,IAASzF,CAAT;CACA,YAAI9G,MAAMX,IAAIO,MAAd,EAAsB;CACvB;CACF,KARD,MAQO;CACL0N,QAAEf,GAAF,GAAQ,GAAR;CACD;;;CAGD,QAAIoB,OAAOtO,IAAIwI,MAAJ,CAAW7H,IAAI,CAAf,CAAX;CACA,QAAI,OAAO2N,IAAP,IAAeJ,OAAOI,IAAP,KAAgBA,IAAnC,EAAyC;CACvCL,QAAErF,EAAF,GAAO,EAAP;CACA,aAAO,EAAEjI,CAAT,EAAY;CACV,YAAI8G,IAAIzH,IAAIwI,MAAJ,CAAW7H,CAAX,CAAR;CACA,YAAI,QAAQ8G,CAAR,IAAayG,OAAOzG,CAAP,KAAaA,CAA9B,EAAiC;CAC/B,YAAE9G,CAAF;CACA;CACD;CACDsN,UAAErF,EAAF,IAAQ5I,IAAIwI,MAAJ,CAAW7H,CAAX,CAAR;CACA,YAAIA,MAAMX,IAAIO,MAAd,EAAsB;CACvB;CACD0N,QAAErF,EAAF,GAAOsF,OAAOD,EAAErF,EAAT,CAAP;CACD;;;CAGD,QAAI5I,IAAIwI,MAAJ,CAAW,EAAE7H,CAAb,CAAJ,EAAqB;CACnB,UAAIwM,UAAUoB,SAASvO,IAAI6F,MAAJ,CAAWlF,CAAX,CAAT,CAAd;CACA,UAAI6N,iBAAiBrB,YAAY,KAAZ,KAAsBc,EAAE3M,IAAF,KAAWsB,QAAQ+J,KAAnB,IAA4BzC,QAAQiD,OAAR,CAAlD,CAArB;CACA,UAAIqB,cAAJ,EAAoB;CAClBP,UAAE7C,IAAF,GAAS+B,OAAT;CACD,OAFD,MAEO;CACL,eAAOiB,MAAM,iBAAN,CAAP;CACD;CACF;;CAEDrL,UAAM,kBAAN,EAA0B/C,GAA1B,EAA+BiO,CAA/B;CACA,WAAOA,CAAP;CACD;;CAED,WAASM,QAAT,CAAkBvO,GAAlB,EAAuB;CACrB,QAAI;CACF,aAAO6B,KAAKN,KAAL,CAAWvB,GAAX,CAAP;CACD,KAFD,CAEE,OAAMI,CAAN,EAAQ;CACR,aAAO,KAAP;CACD;CACF;;;;;;;;CAQDqM,UAAQ7E,SAAR,CAAkBzC,OAAlB,GAA4B,YAAW;CACrC,QAAI,KAAKuI,aAAT,EAAwB;CACtB,WAAKA,aAAL,CAAmBe,sBAAnB;CACD;CACF,GAJD;;;;;;;;;;;;CAgBA,WAASZ,mBAAT,CAA6B5C,MAA7B,EAAqC;CACnC,SAAK6C,SAAL,GAAiB7C,MAAjB;CACA,SAAKC,OAAL,GAAe,EAAf;CACD;;;;;;;;;;;;CAYD2C,sBAAoBjG,SAApB,CAA8BoG,cAA9B,GAA+C,UAASU,OAAT,EAAkB;CAC/D,SAAKxD,OAAL,CAAa5F,IAAb,CAAkBoJ,OAAlB;CACA,QAAI,KAAKxD,OAAL,CAAa3K,MAAb,KAAwB,KAAKuN,SAAL,CAAevC,WAA3C,EAAwD;;CACtD,UAAIN,SAASsC,SAAOoB,iBAAP,CAAyB,KAAKb,SAA9B,EAAyC,KAAK5C,OAA9C,CAAb;CACA,WAAKuD,sBAAL;CACA,aAAOxD,MAAP;CACD;CACD,WAAO,IAAP;CACD,GARD;;;;;;;;CAgBA4C,sBAAoBjG,SAApB,CAA8B6G,sBAA9B,GAAuD,YAAW;CAChE,SAAKX,SAAL,GAAiB,IAAjB;CACA,SAAK5C,OAAL,GAAe,EAAf;CACD,GAHD;;CAKA,WAASkD,KAAT,CAAeQ,GAAf,EAAoB;CAClB,WAAO;CACLtN,YAAMsB,QAAQ+J,KADT;CAELvB,YAAM,mBAAmBwD;CAFpB,KAAP;CAID;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CC/ZD;;;;;;;;CAQA,MAAI;CACF/L,kBAAA,GAAiB,OAAOgM,cAAP,KAA0B,WAA1B,IACf,qBAAqB,IAAIA,cAAJ,EADvB;CAED,GAHD,CAGE,OAAOtH,GAAP,EAAY;;;CAGZ1E,kBAAA,GAAiB,KAAjB;CACD;;;;;;;;;;CChBD;;;CAIA,qBAAiB,uBAAA,CAAUiM,IAAV,EAAgB;CAC/B,MAAIC,UAAUD,KAAKC,OAAnB;;;;CAIA,MAAIC,UAAUF,KAAKE,OAAnB;;;;CAIA,MAAIC,aAAaH,KAAKG,UAAtB;;;CAGA,MAAI;CACF,QAAI,gBAAgB,OAAOJ,cAAvB,KAA0C,CAACE,OAAD,IAAYG,OAAtD,CAAJ,EAAoE;CAClE,aAAO,IAAIL,cAAJ,EAAP;CACD;CACF,GAJD,CAIE,OAAOzO,CAAP,EAAU;;;;;CAKZ,MAAI;CACF,QAAI,gBAAgB,OAAO+O,cAAvB,IAAyC,CAACH,OAA1C,IAAqDC,UAAzD,EAAqE;CACnE,aAAO,IAAIE,cAAJ,EAAP;CACD;CACF,GAJD,CAIE,OAAO/O,CAAP,EAAU;;CAEZ,MAAI,CAAC2O,OAAL,EAAc;CACZ,QAAI;CACF,aAAO,IAAI1G,cAAAA,CAAO,CAAC,QAAD,EAAW+G,MAAX,CAAkB,QAAlB,EAA4BC,IAA5B,CAAiC,GAAjC,CAAPhH,CAAJ,CAAkD,mBAAlD,CAAP;CACD,KAFD,CAEE,OAAOjI,CAAP,EAAU;CACb;CACF,CAhCD;;;;;;;CCHA;;;;;;;CAOA,WAAiBwK,OAAO0E,IAAP,IAAe,SAASA,IAAT,CAAelH,GAAf,EAAmB;CACjD,MAAI+B,MAAM,EAAV;CACA,MAAIoF,MAAM3E,OAAOhD,SAAP,CAAiB4H,cAA3B;;CAEA,OAAK,IAAI7O,CAAT,IAAcyH,GAAd,EAAmB;CACjB,QAAImH,IAAI9K,IAAJ,CAAS2D,GAAT,EAAczH,CAAd,CAAJ,EAAsB;CACpBwJ,UAAI7E,IAAJ,CAAS3E,CAAT;CACD;CACF;CACD,SAAOwJ,GAAP;CACD,CAVD;;;;;;;CCRA;;;;;;CAQA,IAAIF,aAAWW,OAAOhD,SAAP,CAAiBqC,QAAhC;CACA,IAAIY,mBAAiB,OAAOC,IAAP,KAAgB,UAAhB,IACG,OAAOA,IAAP,KAAgB,WAAhB,IAA+Bb,WAASxF,IAAT,CAAcqG,IAAd,MAAwB,0BAD/E;CAEA,IAAIC,mBAAiB,OAAOC,IAAP,KAAgB,UAAhB,IACG,OAAOA,IAAP,KAAgB,WAAhB,IAA+Bf,WAASxF,IAAT,CAAcuG,IAAd,MAAwB,0BAD/E;;;;;;CAOA,iBAAiByE,SAAjB;;;;;;;;;;;CAWA,SAASA,SAAT,CAAoBrH,GAApB,EAAyB;CACvB,MAAI,CAACA,GAAD,IAAQ,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAA3B,EAAqC;CACnC,WAAO,KAAP;CACD;;CAED,MAAI8B,QAAQ9B,GAAR,CAAJ,EAAkB;CAChB,SAAK,IAAIzH,IAAI,CAAR,EAAW+O,IAAItH,IAAI7H,MAAxB,EAAgCI,IAAI+O,CAApC,EAAuC/O,GAAvC,EAA4C;CAC1C,UAAI8O,UAAUrH,IAAIzH,CAAJ,CAAV,CAAJ,EAAuB;CACrB,eAAO,IAAP;CACD;CACF;CACD,WAAO,KAAP;CACD;;CAED,MAAK,OAAO2J,MAAP,KAAkB,UAAlB,IAAgCA,OAAOC,QAAvC,IAAmDD,OAAOC,QAAP,CAAgBnC,GAAhB,CAApD,IACD,OAAOqC,WAAP,KAAuB,UAAvB,IAAqCrC,eAAeqC,WADnD,IAEDI,oBAAkBzC,eAAe0C,IAFhC,IAGDC,oBAAkB3C,eAAe4C,IAHpC,EAIE;CACA,WAAO,IAAP;CACD;;;CAGD,MAAI5C,IAAIuH,MAAJ,IAAc,OAAOvH,IAAIuH,MAAX,KAAsB,UAApC,IAAkDxL,UAAU5D,MAAV,KAAqB,CAA3E,EAA8E;CAC5E,WAAOkP,UAAUrH,IAAIuH,MAAJ,EAAV,EAAwB,IAAxB,CAAP;CACD;;CAED,OAAK,IAAI3G,GAAT,IAAgBZ,GAAhB,EAAqB;CACnB,QAAIwC,OAAOhD,SAAP,CAAiB4H,cAAjB,CAAgC/K,IAAhC,CAAqC2D,GAArC,EAA0CY,GAA1C,KAAkDyG,UAAUrH,IAAIY,GAAJ,CAAV,CAAtD,EAA2E;CACzE,aAAO,IAAP;CACD;CACF;;CAED,SAAO,KAAP;CACD;;;;;;;CC/DD;;;;;;;CAOA,wBAAiB,0BAAA,CAAS4G,WAAT,EAAsBC,KAAtB,EAA6BC,GAA7B,EAAkC;CACjD,MAAIC,QAAQH,YAAYI,UAAxB;CACAH,UAAQA,SAAS,CAAjB;CACAC,QAAMA,OAAOC,KAAb;;CAEA,MAAIH,YAAY9F,KAAhB,EAAuB;CAAE,WAAO8F,YAAY9F,KAAZ,CAAkB+F,KAAlB,EAAyBC,GAAzB,CAAP;CAAuC;;CAEhE,MAAID,QAAQ,CAAZ,EAAe;CAAEA,aAASE,KAAT;CAAiB;CAClC,MAAID,MAAM,CAAV,EAAa;CAAEA,WAAOC,KAAP;CAAe;CAC9B,MAAID,MAAMC,KAAV,EAAiB;CAAED,UAAMC,KAAN;CAAc;;CAEjC,MAAIF,SAASE,KAAT,IAAkBF,SAASC,GAA3B,IAAkCC,UAAU,CAAhD,EAAmD;CACjD,WAAO,IAAItF,WAAJ,CAAgB,CAAhB,CAAP;CACD;;CAED,MAAIwF,MAAM,IAAIC,UAAJ,CAAeN,WAAf,CAAV;CACA,MAAIvD,SAAS,IAAI6D,UAAJ,CAAeJ,MAAMD,KAArB,CAAb;CACA,OAAK,IAAIlP,IAAIkP,KAAR,EAAeM,KAAK,CAAzB,EAA4BxP,IAAImP,GAAhC,EAAqCnP,KAAKwP,IAA1C,EAAgD;CAC9C9D,WAAO8D,EAAP,IAAaF,IAAItP,CAAJ,CAAb;CACD;CACD,SAAO0L,OAAO1B,MAAd;CACD,CArBD;;;;;;;CCPA,cAAiByF,KAAjB;;CAEA,SAASA,KAAT,CAAeC,KAAf,EAAsBxE,QAAtB,EAAgCyE,MAAhC,EAAwC;CACpC,QAAIC,OAAO,KAAX;CACAD,aAASA,UAAUE,IAAnB;CACAC,UAAMJ,KAAN,GAAcA,KAAd;;CAEA,WAAQA,UAAU,CAAX,GAAgBxE,UAAhB,GAA6B4E,KAApC;;CAEA,aAASA,KAAT,CAAelJ,GAAf,EAAoB8E,MAApB,EAA4B;CACxB,YAAIoE,MAAMJ,KAAN,IAAe,CAAnB,EAAsB;CAClB,kBAAM,IAAIzO,KAAJ,CAAU,6BAAV,CAAN;CACH;CACD,UAAE6O,MAAMJ,KAAR;;;CAGA,YAAI9I,GAAJ,EAAS;CACLgJ,mBAAO,IAAP;CACA1E,qBAAStE,GAAT;;CAEAsE,uBAAWyE,MAAX;CACH,SALD,MAKO,IAAIG,MAAMJ,KAAN,KAAgB,CAAhB,IAAqB,CAACE,IAA1B,EAAgC;CACnC1E,qBAAS,IAAT,EAAeQ,MAAf;CACH;CACJ;CACJ;;CAED,SAASmE,IAAT,GAAgB;;;;;;;;AC3BhB,CACE,WAASE,IAAT,EAAe;;;CAGhB,MAAIC,cAAc,AAA8B/N,OAAhD;;;CAGA,MAAIgO,aAAa,AAA6B/N,MAA7B,IAChBA,OAAOD,OAAP,IAAkB+N,WADF,IACiB9N,MADlC;;;;CAKA,MAAIgO,aAAaC,QAAOzI,cAAP,KAAiB,QAAjB,IAA6BA,cAA9C;CACA,MAAIwI,WAAWxI,MAAX,KAAsBwI,UAAtB,IAAoCA,WAAWrK,MAAX,KAAsBqK,UAA9D,EAA0E;CACzEH,UAAOG,UAAP;CACA;;;;CAID,MAAIE,qBAAqBhP,OAAOiP,YAAhC;;;CAGA,WAASC,UAAT,CAAoBC,MAApB,EAA4B;CAC3B,OAAIC,SAAS,EAAb;CACA,OAAIC,UAAU,CAAd;CACA,OAAI7Q,SAAS2Q,OAAO3Q,MAApB;CACA,OAAI8Q,KAAJ;CACA,OAAIC,KAAJ;CACA,UAAOF,UAAU7Q,MAAjB,EAAyB;CACxB8Q,YAAQH,OAAO1N,UAAP,CAAkB4N,SAAlB,CAAR;CACA,QAAIC,SAAS,MAAT,IAAmBA,SAAS,MAA5B,IAAsCD,UAAU7Q,MAApD,EAA4D;;CAE3D+Q,aAAQJ,OAAO1N,UAAP,CAAkB4N,SAAlB,CAAR;CACA,SAAI,CAACE,QAAQ,MAAT,KAAoB,MAAxB,EAAgC;;CAC/BH,aAAO7L,IAAP,CAAY,CAAC,CAAC+L,QAAQ,KAAT,KAAmB,EAApB,KAA2BC,QAAQ,KAAnC,IAA4C,OAAxD;CACA,MAFD,MAEO;;;CAGNH,aAAO7L,IAAP,CAAY+L,KAAZ;CACAD;CACA;CACD,KAXD,MAWO;CACND,YAAO7L,IAAP,CAAY+L,KAAZ;CACA;CACD;CACD,UAAOF,MAAP;CACA;;;CAGD,WAASI,UAAT,CAAoBC,KAApB,EAA2B;CAC1B,OAAIjR,SAASiR,MAAMjR,MAAnB;CACA,OAAI8D,QAAQ,CAAC,CAAb;CACA,OAAIgN,KAAJ;CACA,OAAIF,SAAS,EAAb;CACA,UAAO,EAAE9M,KAAF,GAAU9D,MAAjB,EAAyB;CACxB8Q,YAAQG,MAAMnN,KAAN,CAAR;CACA,QAAIgN,QAAQ,MAAZ,EAAoB;CACnBA,cAAS,OAAT;CACAF,eAAUJ,mBAAmBM,UAAU,EAAV,GAAe,KAAf,GAAuB,MAA1C,CAAV;CACAA,aAAQ,SAASA,QAAQ,KAAzB;CACA;CACDF,cAAUJ,mBAAmBM,KAAnB,CAAV;CACA;CACD,UAAOF,MAAP;CACA;;CAED,WAASM,gBAAT,CAA0BC,SAA1B,EAAqCC,MAArC,EAA6C;CAC5C,OAAID,aAAa,MAAb,IAAuBA,aAAa,MAAxC,EAAgD;CAC/C,QAAIC,MAAJ,EAAY;CACX,WAAM/P,MACL,sBAAsB8P,UAAUzH,QAAV,CAAmB,EAAnB,EAAuB2H,WAAvB,EAAtB,GACA,wBAFK,CAAN;CAIA;CACD,WAAO,KAAP;CACA;CACD,UAAO,IAAP;CACA;;;CAGD,WAASC,UAAT,CAAoBH,SAApB,EAA+BI,KAA/B,EAAsC;CACrC,UAAOf,mBAAqBW,aAAaI,KAAd,GAAuB,IAAxB,GAAgC,IAAnD,CAAP;CACA;;CAED,WAASC,eAAT,CAAyBL,SAAzB,EAAoCC,MAApC,EAA4C;CAC3C,OAAI,CAACD,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CAClC,WAAOX,mBAAmBW,SAAnB,CAAP;CACA;CACD,OAAIM,SAAS,EAAb;CACA,OAAI,CAACN,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CAClCM,aAASjB,mBAAqBW,aAAa,CAAd,GAAmB,IAApB,GAA4B,IAA/C,CAAT;CACA,IAFD,MAGK,IAAI,CAACA,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CACvC,QAAI,CAACD,iBAAiBC,SAAjB,EAA4BC,MAA5B,CAAL,EAA0C;CACzCD,iBAAY,MAAZ;CACA;CACDM,aAASjB,mBAAqBW,aAAa,EAAd,GAAoB,IAArB,GAA6B,IAAhD,CAAT;CACAM,cAAUH,WAAWH,SAAX,EAAsB,CAAtB,CAAV;CACA,IANI,MAOA,IAAI,CAACA,YAAY,UAAb,KAA4B,CAAhC,EAAmC;;CACvCM,aAASjB,mBAAqBW,aAAa,EAAd,GAAoB,IAArB,GAA6B,IAAhD,CAAT;CACAM,cAAUH,WAAWH,SAAX,EAAsB,EAAtB,CAAV;CACAM,cAAUH,WAAWH,SAAX,EAAsB,CAAtB,CAAV;CACA;CACDM,aAAUjB,mBAAoBW,YAAY,IAAb,GAAqB,IAAxC,CAAV;CACA,UAAOM,MAAP;CACA;;CAED,WAASC,UAAT,CAAoBf,MAApB,EAA4BpC,IAA5B,EAAkC;CACjCA,UAAOA,QAAQ,EAAf;CACA,OAAI6C,SAAS,UAAU7C,KAAK6C,MAA5B;;CAEA,OAAIO,aAAajB,WAAWC,MAAX,CAAjB;CACA,OAAI3Q,SAAS2R,WAAW3R,MAAxB;CACA,OAAI8D,QAAQ,CAAC,CAAb;CACA,OAAIqN,SAAJ;CACA,OAAIS,aAAa,EAAjB;CACA,UAAO,EAAE9N,KAAF,GAAU9D,MAAjB,EAAyB;CACxBmR,gBAAYQ,WAAW7N,KAAX,CAAZ;CACA8N,kBAAcJ,gBAAgBL,SAAhB,EAA2BC,MAA3B,CAAd;CACA;CACD,UAAOQ,UAAP;CACA;;;;CAID,WAASC,oBAAT,GAAgC;CAC/B,OAAIC,aAAaC,SAAjB,EAA4B;CAC3B,UAAM1Q,MAAM,oBAAN,CAAN;CACA;;CAED,OAAI2Q,mBAAmBC,UAAUH,SAAV,IAAuB,IAA9C;CACAA;;CAEA,OAAI,CAACE,mBAAmB,IAApB,KAA6B,IAAjC,EAAuC;CACtC,WAAOA,mBAAmB,IAA1B;CACA;;;CAGD,SAAM3Q,MAAM,2BAAN,CAAN;CACA;;CAED,WAAS6Q,YAAT,CAAsBd,MAAtB,EAA8B;CAC7B,OAAIe,KAAJ;CACA,OAAIC,KAAJ;CACA,OAAIC,KAAJ;CACA,OAAIC,KAAJ;CACA,OAAInB,SAAJ;;CAEA,OAAIW,YAAYC,SAAhB,EAA2B;CAC1B,UAAM1Q,MAAM,oBAAN,CAAN;CACA;;CAED,OAAIyQ,aAAaC,SAAjB,EAA4B;CAC3B,WAAO,KAAP;CACA;;;CAGDI,WAAQF,UAAUH,SAAV,IAAuB,IAA/B;CACAA;;;CAGA,OAAI,CAACK,QAAQ,IAAT,KAAkB,CAAtB,EAAyB;CACxB,WAAOA,KAAP;CACA;;;CAGD,OAAI,CAACA,QAAQ,IAAT,KAAkB,IAAtB,EAA4B;CAC3BC,YAAQP,sBAAR;CACAV,gBAAa,CAACgB,QAAQ,IAAT,KAAkB,CAAnB,GAAwBC,KAApC;CACA,QAAIjB,aAAa,IAAjB,EAAuB;CACtB,YAAOA,SAAP;CACA,KAFD,MAEO;CACN,WAAM9P,MAAM,2BAAN,CAAN;CACA;CACD;;;CAGD,OAAI,CAAC8Q,QAAQ,IAAT,KAAkB,IAAtB,EAA4B;CAC3BC,YAAQP,sBAAR;CACAQ,YAAQR,sBAAR;CACAV,gBAAa,CAACgB,QAAQ,IAAT,KAAkB,EAAnB,GAA0BC,SAAS,CAAnC,GAAwCC,KAApD;CACA,QAAIlB,aAAa,MAAjB,EAAyB;CACxB,YAAOD,iBAAiBC,SAAjB,EAA4BC,MAA5B,IAAsCD,SAAtC,GAAkD,MAAzD;CACA,KAFD,MAEO;CACN,WAAM9P,MAAM,2BAAN,CAAN;CACA;CACD;;;CAGD,OAAI,CAAC8Q,QAAQ,IAAT,KAAkB,IAAtB,EAA4B;CAC3BC,YAAQP,sBAAR;CACAQ,YAAQR,sBAAR;CACAS,YAAQT,sBAAR;CACAV,gBAAa,CAACgB,QAAQ,IAAT,KAAkB,IAAnB,GAA4BC,SAAS,IAArC,GACVC,SAAS,IADC,GACOC,KADnB;CAEA,QAAInB,aAAa,QAAb,IAAyBA,aAAa,QAA1C,EAAoD;CACnD,YAAOA,SAAP;CACA;CACD;;CAED,SAAM9P,MAAM,wBAAN,CAAN;CACA;;CAED,MAAI4Q,SAAJ;CACA,MAAIF,SAAJ;CACA,MAAID,SAAJ;CACA,WAASS,UAAT,CAAoBX,UAApB,EAAgCrD,IAAhC,EAAsC;CACrCA,UAAOA,QAAQ,EAAf;CACA,OAAI6C,SAAS,UAAU7C,KAAK6C,MAA5B;;CAEAa,eAAYvB,WAAWkB,UAAX,CAAZ;CACAG,eAAYE,UAAUjS,MAAtB;CACA8R,eAAY,CAAZ;CACA,OAAIH,aAAa,EAAjB;CACA,OAAIa,GAAJ;CACA,UAAO,CAACA,MAAMN,aAAad,MAAb,CAAP,MAAiC,KAAxC,EAA+C;CAC9CO,eAAW5M,IAAX,CAAgByN,GAAhB;CACA;CACD,UAAOxB,WAAWW,UAAX,CAAP;CACA;;;;CAID,MAAIc,OAAO;CACV,cAAW,OADD;CAEV,aAAUf,UAFA;CAGV,aAAUa;CAHA,GAAX;;;;CAQA,MACC,OAAOG,SAAP,IAAiB,UAAjB,IACAnC,QAAOmC,UAAOC,GAAd,KAAqB,QADrB,IAEAD,UAAOC,GAHR,EAIE;CACDD,aAAO,YAAW;CACjB,WAAOD,IAAP;CACA,IAFDC;CAGA,GARD,MAQO,IAAItC,eAAe,CAACA,YAAYwC,QAAhC,EAA0C;CAChD,OAAIvC,UAAJ,EAAgB;;CACfA,eAAWhO,OAAX,GAAqBoQ,IAArB;CACA,IAFD,MAEO;;CACN,QAAII,SAAS,EAAb;CACA,QAAI5D,iBAAiB4D,OAAO5D,cAA5B;CACA,SAAK,IAAIxG,GAAT,IAAgBgK,IAAhB,EAAsB;CACrBxD,oBAAe/K,IAAf,CAAoBuO,IAApB,EAA0BhK,GAA1B,MAAmC2H,YAAY3H,GAAZ,IAAmBgK,KAAKhK,GAAL,CAAtD;CACA;CACD;CACD,GAVM,MAUA;;CACN0H,QAAKsC,IAAL,GAAYA,IAAZ;CACA;CAED,EA7PC,EA6PAK,cA7PA,CAAD;;;;;;;;;CCDD;;;;;;;CAOA,GAAC,YAAU;AACT;CAEA,QAAIC,QAAQ,kEAAZ;;;CAGA,QAAIC,SAAS,IAAIrD,UAAJ,CAAe,GAAf,CAAb;CACA,SAAK,IAAIvP,IAAI,CAAb,EAAgBA,IAAI2S,MAAM/S,MAA1B,EAAkCI,GAAlC,EAAuC;CACrC4S,aAAOD,MAAM9P,UAAN,CAAiB7C,CAAjB,CAAP,IAA8BA,CAA9B;CACD;;CAEDiC,kBAAA,GAAiB,UAASgN,WAAT,EAAsB;CACrC,UAAIG,QAAQ,IAAIG,UAAJ,CAAeN,WAAf,CAAZ;CAAA,UACAjP,CADA;CAAA,UACG+E,MAAMqK,MAAMxP,MADf;CAAA,UACuBwN,SAAS,EADhC;;CAGA,WAAKpN,IAAI,CAAT,EAAYA,IAAI+E,GAAhB,EAAqB/E,KAAG,CAAxB,EAA2B;CACzBoN,kBAAUuF,MAAMvD,MAAMpP,CAAN,KAAY,CAAlB,CAAV;CACAoN,kBAAUuF,MAAO,CAACvD,MAAMpP,CAAN,IAAW,CAAZ,KAAkB,CAAnB,GAAyBoP,MAAMpP,IAAI,CAAV,KAAgB,CAA/C,CAAV;CACAoN,kBAAUuF,MAAO,CAACvD,MAAMpP,IAAI,CAAV,IAAe,EAAhB,KAAuB,CAAxB,GAA8BoP,MAAMpP,IAAI,CAAV,KAAgB,CAApD,CAAV;CACAoN,kBAAUuF,MAAMvD,MAAMpP,IAAI,CAAV,IAAe,EAArB,CAAV;CACD;;CAED,UAAK+E,MAAM,CAAP,KAAc,CAAlB,EAAqB;CACnBqI,iBAASA,OAAO1N,SAAP,CAAiB,CAAjB,EAAoB0N,OAAOxN,MAAP,GAAgB,CAApC,IAAyC,GAAlD;CACD,OAFD,MAEO,IAAImF,MAAM,CAAN,KAAY,CAAhB,EAAmB;CACxBqI,iBAASA,OAAO1N,SAAP,CAAiB,CAAjB,EAAoB0N,OAAOxN,MAAP,GAAgB,CAApC,IAAyC,IAAlD;CACD;;CAED,aAAOwN,MAAP;CACD,KAlBD;;CAoBAnL,kBAAA,GAAkB,UAASmL,MAAT,EAAiB;CACjC,UAAIyF,eAAezF,OAAOxN,MAAP,GAAgB,IAAnC;CAAA,UACAmF,MAAMqI,OAAOxN,MADb;CAAA,UACqBI,CADrB;CAAA,UACwBsN,IAAI,CAD5B;CAAA,UAEAwF,QAFA;CAAA,UAEUC,QAFV;CAAA,UAEoBC,QAFpB;CAAA,UAE8BC,QAF9B;;CAIA,UAAI7F,OAAOA,OAAOxN,MAAP,GAAgB,CAAvB,MAA8B,GAAlC,EAAuC;CACrCiT;CACA,YAAIzF,OAAOA,OAAOxN,MAAP,GAAgB,CAAvB,MAA8B,GAAlC,EAAuC;CACrCiT;CACD;CACF;;CAED,UAAI5D,cAAc,IAAInF,WAAJ,CAAgB+I,YAAhB,CAAlB;CAAA,UACAzD,QAAQ,IAAIG,UAAJ,CAAeN,WAAf,CADR;;CAGA,WAAKjP,IAAI,CAAT,EAAYA,IAAI+E,GAAhB,EAAqB/E,KAAG,CAAxB,EAA2B;CACzB8S,mBAAWF,OAAOxF,OAAOvK,UAAP,CAAkB7C,CAAlB,CAAP,CAAX;CACA+S,mBAAWH,OAAOxF,OAAOvK,UAAP,CAAkB7C,IAAE,CAApB,CAAP,CAAX;CACAgT,mBAAWJ,OAAOxF,OAAOvK,UAAP,CAAkB7C,IAAE,CAApB,CAAP,CAAX;CACAiT,mBAAWL,OAAOxF,OAAOvK,UAAP,CAAkB7C,IAAE,CAApB,CAAP,CAAX;;CAEAoP,cAAM9B,GAAN,IAAcwF,YAAY,CAAb,GAAmBC,YAAY,CAA5C;CACA3D,cAAM9B,GAAN,IAAc,CAACyF,WAAW,EAAZ,KAAmB,CAApB,GAA0BC,YAAY,CAAnD;CACA5D,cAAM9B,GAAN,IAAc,CAAC0F,WAAW,CAAZ,KAAkB,CAAnB,GAAyBC,WAAW,EAAjD;CACD;;CAED,aAAOhE,WAAP;CACD,KA3BD;CA4BD,GA3DD;;;;;;;;;;;;CCPA;;;;CAIA,IAAIiE,cAAcxL,cAAAA,CAAOwL,WAAPxL,IACbA,cAAAA,CAAOyL,iBADMzL,IAEbA,cAAAA,CAAO0L,aAFM1L,IAGbA,cAAAA,CAAO2L,cAHZ;;;;;;CASA,IAAIC,gBAAiB,YAAW;CAC9B,MAAI;CACF,QAAIC,IAAI,IAAIpJ,IAAJ,CAAS,CAAC,IAAD,CAAT,CAAR;CACA,WAAOoJ,EAAEC,IAAF,KAAW,CAAlB;CACD,GAHD,CAGE,OAAM/T,CAAN,EAAS;CACT,WAAO,KAAP;CACD;CACF,CAPmB,EAApB;;;;;;;CAcA,IAAIgU,8BAA8BH,iBAAkB,YAAW;CAC7D,MAAI;CACF,QAAI/T,IAAI,IAAI4K,IAAJ,CAAS,CAAC,IAAIoF,UAAJ,CAAe,CAAC,CAAD,EAAG,CAAH,CAAf,CAAD,CAAT,CAAR;CACA,WAAOhQ,EAAEiU,IAAF,KAAW,CAAlB;CACD,GAHD,CAGE,OAAM/T,CAAN,EAAS;CACT,WAAO,KAAP;CACD;CACF,CAPkD,EAAnD;;;;;;CAaA,IAAIiU,uBAAuBR,eACtBA,YAAYjM,SAAZ,CAAsB0M,MADA,IAEtBT,YAAYjM,SAAZ,CAAsB2M,OAF3B;;;;;;;;CAUA,SAASC,mBAAT,CAA6BC,GAA7B,EAAkC;CAChC,OAAK,IAAI9T,IAAI,CAAb,EAAgBA,IAAI8T,IAAIlU,MAAxB,EAAgCI,GAAhC,EAAqC;CACnC,QAAI+T,QAAQD,IAAI9T,CAAJ,CAAZ;CACA,QAAI+T,MAAM/J,MAAN,YAAwBF,WAA5B,EAAyC;CACvC,UAAI4D,MAAMqG,MAAM/J,MAAhB;;;;CAIA,UAAI+J,MAAM1E,UAAN,KAAqB3B,IAAI2B,UAA7B,EAAyC;CACvC,YAAI2E,OAAO,IAAIzE,UAAJ,CAAewE,MAAM1E,UAArB,CAAX;CACA2E,aAAKC,GAAL,CAAS,IAAI1E,UAAJ,CAAe7B,GAAf,EAAoBqG,MAAMG,UAA1B,EAAsCH,MAAM1E,UAA5C,CAAT;CACA3B,cAAMsG,KAAKhK,MAAX;CACD;;CAED8J,UAAI9T,CAAJ,IAAS0N,GAAT;CACD;CACF;CACF;;CAED,SAASyG,sBAAT,CAAgCL,GAAhC,EAAqCpT,OAArC,EAA8C;CAC5CA,YAAUA,WAAW,EAArB;;CAEA,MAAI0T,KAAK,IAAIlB,WAAJ,EAAT;CACAW,sBAAoBC,GAApB;;CAEA,OAAK,IAAI9T,IAAI,CAAb,EAAgBA,IAAI8T,IAAIlU,MAAxB,EAAgCI,GAAhC,EAAqC;CACnCoU,OAAGT,MAAH,CAAUG,IAAI9T,CAAJ,CAAV;CACD;;CAED,SAAQU,QAAQC,IAAT,GAAiByT,GAAGR,OAAH,CAAWlT,QAAQC,IAAnB,CAAjB,GAA4CyT,GAAGR,OAAH,EAAnD;CACD;CAED,SAASS,eAAT,CAAyBP,GAAzB,EAA8BpT,OAA9B,EAAuC;CACrCmT,sBAAoBC,GAApB;CACA,SAAO,IAAI3J,IAAJ,CAAS2J,GAAT,EAAcpT,WAAW,EAAzB,CAAP;CACD;CAED,WAAkB,YAAW;CAC3B,MAAI4S,aAAJ,EAAmB;CACjB,WAAOG,8BAA8B/L,cAAAA,CAAOyC,IAArC,GAA4CkK,eAAnD;CACD,GAFD,MAEO,IAAIX,oBAAJ,EAA0B;CAC/B,WAAOS,sBAAP;CACD,GAFM,MAEA;CACL,WAAO1S,SAAP;CACD;CACF,CARgB,EAAjB;;;;;;;;;;;;;;;;;;;;;;CCvFA;;;;CAUA,MAAI6S,aAAJ;CACA,MAAI5M,cAAAA,IAAUA,cAAAA,CAAOoC,WAArB,EAAkC;CAChCwK,oBAAgB7R,YAAhB;CACD;;;;;;;;;CASD,MAAI8R,YAAY,OAAOxO,SAAP,KAAqB,WAArB,IAAoC,WAAWV,IAAX,CAAgBU,UAAUC,SAA1B,CAApD;;;;;;;;CAQA,MAAIwO,cAAc,OAAOzO,SAAP,KAAqB,WAArB,IAAoC,aAAaV,IAAb,CAAkBU,UAAUC,SAA5B,CAAtD;;;;;;CAMA,MAAIyO,gBAAgBF,aAAaC,WAAjC;;;;;;CAMAvS,kBAAA,GAAmB,CAAnB;;;;;;CAMA,MAAIyS,UAAUzS,eAAA,GAAkB;CAC5B0S,UAAU,CADkB;CAAA,MAE5BC,OAAU,CAFkB;CAAA,MAG5BC,MAAU,CAHkB;CAI5BC,UAAU,CAJkB;CAK5BvP,aAAU,CALkB;CAM5BwP,aAAU,CANkB;CAO5BlF,UAAU;CAPkB,GAAhC;;CAUA,MAAImF,cAAcrG,OAAK+F,OAAL,CAAlB;;;;;;CAMA,MAAI9N,MAAM,EAAEjG,MAAM,OAAR,EAAiB8J,MAAM,cAAvB,EAAV;;;;;;;;;;;;;;;;;;;;;;CAwBAxI,sBAAA,GAAuB,UAAUqI,MAAV,EAAkB2K,cAAlB,EAAkC3D,UAAlC,EAA8CpG,QAA9C,EAAwD;CAC7E,QAAI,OAAO+J,cAAP,KAA0B,UAA9B,EAA0C;CACxC/J,iBAAW+J,cAAX;CACAA,uBAAiB,KAAjB;CACD;;CAED,QAAI,OAAO3D,UAAP,KAAsB,UAA1B,EAAsC;CACpCpG,iBAAWoG,UAAX;CACAA,mBAAa,IAAb;CACD;;CAED,QAAI7G,OAAQH,OAAOG,IAAP,KAAgBhJ,SAAjB,GACPA,SADO,GAEP6I,OAAOG,IAAP,CAAYT,MAAZ,IAAsBM,OAAOG,IAFjC;;CAIA,QAAI/C,cAAAA,CAAOoC,WAAPpC,IAAsB+C,gBAAgBX,WAA1C,EAAuD;CACrD,aAAOoL,kBAAkB5K,MAAlB,EAA0B2K,cAA1B,EAA0C/J,QAA1C,CAAP;CACD,KAFD,MAEO,IAAIf,UAAQM,gBAAgB/C,cAAAA,CAAOyC,IAAnC,EAAyC;CAC9C,aAAOgL,WAAW7K,MAAX,EAAmB2K,cAAnB,EAAmC/J,QAAnC,CAAP;CACD;;;CAGD,QAAIT,QAAQA,KAAK2C,MAAjB,EAAyB;CACvB,aAAOgI,mBAAmB9K,MAAnB,EAA2BY,QAA3B,CAAP;CACD;;;CAGD,QAAImK,UAAUX,QAAQpK,OAAO3J,IAAf,CAAd;;;CAGA,QAAIc,cAAc6I,OAAOG,IAAzB,EAA+B;CAC7B4K,iBAAW/D,aAAae,OAAKpG,MAAL,CAAY7K,OAAOkJ,OAAOG,IAAd,CAAZ,EAAiC,EAAEuG,QAAQ,KAAV,EAAjC,CAAb,GAAmE5P,OAAOkJ,OAAOG,IAAd,CAA9E;CACD;;CAED,WAAOS,SAAS,KAAKmK,OAAd,CAAP;CAED,GApCD;;CAsCA,WAASD,kBAAT,CAA4B9K,MAA5B,EAAoCY,QAApC,EAA8C;;CAE5C,QAAI3F,UAAU,MAAMtD,QAAQyS,OAAR,CAAgBpK,OAAO3J,IAAvB,CAAN,GAAqC2J,OAAOG,IAAP,CAAYA,IAA/D;CACA,WAAOS,SAAS3F,OAAT,CAAP;CACD;;;;;;CAMD,WAAS2P,iBAAT,CAA2B5K,MAA3B,EAAmC2K,cAAnC,EAAmD/J,QAAnD,EAA6D;CAC3D,QAAI,CAAC+J,cAAL,EAAqB;CACnB,aAAOhT,QAAQqT,kBAAR,CAA2BhL,MAA3B,EAAmCY,QAAnC,CAAP;CACD;;CAED,QAAIT,OAAOH,OAAOG,IAAlB;CACA,QAAI8K,eAAe,IAAIhG,UAAJ,CAAe9E,IAAf,CAAnB;CACA,QAAI+K,eAAe,IAAIjG,UAAJ,CAAe,IAAI9E,KAAK4E,UAAxB,CAAnB;;CAEAmG,iBAAa,CAAb,IAAkBd,QAAQpK,OAAO3J,IAAf,CAAlB;CACA,SAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAIuV,aAAa3V,MAAjC,EAAyCI,GAAzC,EAA8C;CAC5CwV,mBAAaxV,IAAE,CAAf,IAAoBuV,aAAavV,CAAb,CAApB;CACD;;CAED,WAAOkL,SAASsK,aAAaxL,MAAtB,CAAP;CACD;;CAED,WAASyL,uBAAT,CAAiCnL,MAAjC,EAAyC2K,cAAzC,EAAyD/J,QAAzD,EAAmE;CACjE,QAAI,CAAC+J,cAAL,EAAqB;CACnB,aAAOhT,QAAQqT,kBAAR,CAA2BhL,MAA3B,EAAmCY,QAAnC,CAAP;CACD;;CAED,QAAIwK,KAAK,IAAIlK,UAAJ,EAAT;CACAkK,OAAGjK,MAAH,GAAY,YAAW;CACrBnB,aAAOG,IAAP,GAAciL,GAAGhK,MAAjB;CACAzJ,cAAQ0T,YAAR,CAAqBrL,MAArB,EAA6B2K,cAA7B,EAA6C,IAA7C,EAAmD/J,QAAnD;CACD,KAHD;CAIA,WAAOwK,GAAG9J,iBAAH,CAAqBtB,OAAOG,IAA5B,CAAP;CACD;;CAED,WAAS0K,UAAT,CAAoB7K,MAApB,EAA4B2K,cAA5B,EAA4C/J,QAA5C,EAAsD;CACpD,QAAI,CAAC+J,cAAL,EAAqB;CACnB,aAAOhT,QAAQqT,kBAAR,CAA2BhL,MAA3B,EAAmCY,QAAnC,CAAP;CACD;;CAED,QAAIuJ,aAAJ,EAAmB;CACjB,aAAOgB,wBAAwBnL,MAAxB,EAAgC2K,cAAhC,EAAgD/J,QAAhD,CAAP;CACD;;CAED,QAAItL,SAAS,IAAI2P,UAAJ,CAAe,CAAf,CAAb;CACA3P,WAAO,CAAP,IAAY8U,QAAQpK,OAAO3J,IAAf,CAAZ;CACA,QAAIiV,OAAO,IAAIzL,MAAJ,CAAS,CAACvK,OAAOoK,MAAR,EAAgBM,OAAOG,IAAvB,CAAT,CAAX;;CAEA,WAAOS,SAAS0K,IAAT,CAAP;CACD;;;;;;;;;CASD3T,4BAAA,GAA6B,UAASqI,MAAT,EAAiBY,QAAjB,EAA2B;CACtD,QAAI3F,UAAU,MAAMtD,QAAQyS,OAAR,CAAgBpK,OAAO3J,IAAvB,CAApB;CACA,QAAIwJ,UAAQG,OAAOG,IAAP,YAAuB/C,cAAAA,CAAOyC,IAA1C,EAAgD;CAC9C,UAAIuL,KAAK,IAAIlK,UAAJ,EAAT;CACAkK,SAAGjK,MAAH,GAAY,YAAW;CACrB,YAAIoK,MAAMH,GAAGhK,MAAH,CAAU5G,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAV;CACAoG,iBAAS3F,UAAUsQ,GAAnB;CACD,OAHD;CAIA,aAAOH,GAAGI,aAAH,CAAiBxL,OAAOG,IAAxB,CAAP;CACD;;CAED,QAAIsL,OAAJ;CACA,QAAI;CACFA,gBAAU3U,OAAOiP,YAAP,CAAoBhM,KAApB,CAA0B,IAA1B,EAAgC,IAAIkL,UAAJ,CAAejF,OAAOG,IAAtB,CAAhC,CAAV;CACD,KAFD,CAEE,OAAOhL,CAAP,EAAU;;CAEV,UAAIuW,QAAQ,IAAIzG,UAAJ,CAAejF,OAAOG,IAAtB,CAAZ;CACA,UAAIwL,QAAQ,IAAI1S,KAAJ,CAAUyS,MAAMpW,MAAhB,CAAZ;CACA,WAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIgW,MAAMpW,MAA1B,EAAkCI,GAAlC,EAAuC;CACrCiW,cAAMjW,CAAN,IAAWgW,MAAMhW,CAAN,CAAX;CACD;CACD+V,gBAAU3U,OAAOiP,YAAP,CAAoBhM,KAApB,CAA0B,IAA1B,EAAgC4R,KAAhC,CAAV;CACD;CACD1Q,eAAWmC,cAAAA,CAAOwO,IAAPxO,CAAYqO,OAAZrO,CAAX;CACA,WAAOwD,SAAS3F,OAAT,CAAP;CACD,GAzBD;;;;;;;;;CAkCAtD,sBAAA,GAAuB,UAAUwI,IAAV,EAAgB0L,UAAhB,EAA4BhE,UAA5B,EAAwC;CAC7D,QAAI1H,SAAShJ,SAAb,EAAwB;CACtB,aAAOmF,GAAP;CACD;;CAED,QAAI,OAAO6D,IAAP,KAAgB,QAApB,EAA8B;CAC5B,UAAIA,KAAK5C,MAAL,CAAY,CAAZ,MAAmB,GAAvB,EAA4B;CAC1B,eAAO5F,QAAQmU,kBAAR,CAA2B3L,KAAKvF,MAAL,CAAY,CAAZ,CAA3B,EAA2CiR,UAA3C,CAAP;CACD;;CAED,UAAIhE,UAAJ,EAAgB;CACd1H,eAAO4L,UAAU5L,IAAV,CAAP;CACA,YAAIA,SAAS,KAAb,EAAoB;CAClB,iBAAO7D,GAAP;CACD;CACF;CACD,UAAIjG,OAAO8J,KAAK5C,MAAL,CAAY,CAAZ,CAAX;;CAEA,UAAI0F,OAAO5M,IAAP,KAAgBA,IAAhB,IAAwB,CAACqU,YAAYrU,IAAZ,CAA7B,EAAgD;CAC9C,eAAOiG,GAAP;CACD;;CAED,UAAI6D,KAAK7K,MAAL,GAAc,CAAlB,EAAqB;CACnB,eAAO,EAAEe,MAAMqU,YAAYrU,IAAZ,CAAR,EAA2B8J,MAAMA,KAAK/K,SAAL,CAAe,CAAf,CAAjC,EAAP;CACD,OAFD,MAEO;CACL,eAAO,EAAEiB,MAAMqU,YAAYrU,IAAZ,CAAR,EAAP;CACD;CACF;;CAED,QAAI2V,UAAU,IAAI/G,UAAJ,CAAe9E,IAAf,CAAd;CACA,QAAI9J,OAAO2V,QAAQ,CAAR,CAAX;CACA,QAAIC,OAAOC,YAAY/L,IAAZ,EAAkB,CAAlB,CAAX;CACA,QAAIN,UAAQgM,eAAe,MAA3B,EAAmC;CACjCI,aAAO,IAAIpM,MAAJ,CAAS,CAACoM,IAAD,CAAT,CAAP;CACD;CACD,WAAO,EAAE5V,MAAMqU,YAAYrU,IAAZ,CAAR,EAA2B8J,MAAM8L,IAAjC,EAAP;CACD,GApCD;;CAsCA,WAASF,SAAT,CAAmB5L,IAAnB,EAAyB;CACvB,QAAI;CACFA,aAAO4H,OAAKoE,MAAL,CAAYhM,IAAZ,EAAkB,EAAEuG,QAAQ,KAAV,EAAlB,CAAP;CACD,KAFD,CAEE,OAAOvR,CAAP,EAAU;CACV,aAAO,KAAP;CACD;CACD,WAAOgL,IAAP;CACD;;;;;;;;;CASDxI,4BAAA,GAA6B,UAASgM,GAAT,EAAckI,UAAd,EAA0B;CACrD,QAAIxV,OAAOqU,YAAY/G,IAAIpG,MAAJ,CAAW,CAAX,CAAZ,CAAX;CACA,QAAI,CAACyM,aAAL,EAAoB;CAClB,aAAO,EAAE3T,MAAMA,IAAR,EAAc8J,MAAM,EAAE2C,QAAQ,IAAV,EAAgB3C,MAAMwD,IAAI/I,MAAJ,CAAW,CAAX,CAAtB,EAApB,EAAP;CACD;;CAED,QAAIuF,OAAO6J,cAAcmC,MAAd,CAAqBxI,IAAI/I,MAAJ,CAAW,CAAX,CAArB,CAAX;;CAEA,QAAIiR,eAAe,MAAf,IAAyBhM,MAA7B,EAAmC;CACjCM,aAAO,IAAIN,MAAJ,CAAS,CAACM,IAAD,CAAT,CAAP;CACD;;CAED,WAAO,EAAE9J,MAAMA,IAAR,EAAc8J,MAAMA,IAApB,EAAP;CACD,GAbD;;;;;;;;;;;;;;;;;;CA+BAxI,uBAAA,GAAwB,UAAUyS,OAAV,EAAmBO,cAAnB,EAAmC/J,QAAnC,EAA6C;CACnE,QAAI,OAAO+J,cAAP,KAA0B,UAA9B,EAA0C;CACxC/J,iBAAW+J,cAAX;CACAA,uBAAiB,IAAjB;CACD;;CAED,QAAIyB,WAAW5H,YAAU4F,OAAV,CAAf;;CAEA,QAAIO,kBAAkByB,QAAtB,EAAgC;CAC9B,UAAIvM,UAAQ,CAACsK,aAAb,EAA4B;CAC1B,eAAOxS,QAAQ0U,mBAAR,CAA4BjC,OAA5B,EAAqCxJ,QAArC,CAAP;CACD;;CAED,aAAOjJ,QAAQ2U,0BAAR,CAAmClC,OAAnC,EAA4CxJ,QAA5C,CAAP;CACD;;CAED,QAAI,CAACwJ,QAAQ9U,MAAb,EAAqB;CACnB,aAAOsL,SAAS,IAAT,CAAP;CACD;;CAED,aAAS2L,eAAT,CAAyBtR,OAAzB,EAAkC;CAChC,aAAOA,QAAQ3F,MAAR,GAAiB,GAAjB,GAAuB2F,OAA9B;CACD;;CAED,aAASuR,SAAT,CAAmBxM,MAAnB,EAA2ByM,YAA3B,EAAyC;CACvC9U,cAAQ0T,YAAR,CAAqBrL,MAArB,EAA6B,CAACoM,QAAD,GAAY,KAAZ,GAAoBzB,cAAjD,EAAiE,KAAjE,EAAwE,UAAS1P,OAAT,EAAkB;CACxFwR,qBAAa,IAAb,EAAmBF,gBAAgBtR,OAAhB,CAAnB;CACD,OAFD;CAGD;;CAEDyR,QAAItC,OAAJ,EAAaoC,SAAb,EAAwB,UAASlQ,GAAT,EAAcqQ,OAAd,EAAuB;CAC7C,aAAO/L,SAAS+L,QAAQvI,IAAR,CAAa,EAAb,CAAT,CAAP;CACD,KAFD;CAGD,GAjCD;;;;;;CAuCA,WAASsI,GAAT,CAAalD,GAAb,EAAkBoD,IAAlB,EAAwBC,IAAxB,EAA8B;CAC5B,QAAIzL,SAAS,IAAInI,KAAJ,CAAUuQ,IAAIlU,MAAd,CAAb;CACA,QAAI+N,OAAO8B,QAAMqE,IAAIlU,MAAV,EAAkBuX,IAAlB,CAAX;;CAEA,QAAIC,gBAAgB,SAAhBA,aAAgB,CAASpX,CAAT,EAAYqX,EAAZ,EAAgBpO,EAAhB,EAAoB;CACtCiO,WAAKG,EAAL,EAAS,UAAS5J,KAAT,EAAgBQ,GAAhB,EAAqB;CAC5BvC,eAAO1L,CAAP,IAAYiO,GAAZ;CACAhF,WAAGwE,KAAH,EAAU/B,MAAV;CACD,OAHD;CAID,KALD;;CAOA,SAAK,IAAI1L,IAAI,CAAb,EAAgBA,IAAI8T,IAAIlU,MAAxB,EAAgCI,GAAhC,EAAqC;CACnCoX,oBAAcpX,CAAd,EAAiB8T,IAAI9T,CAAJ,CAAjB,EAAyB2N,IAAzB;CACD;CACF;;;;;;;;;;CAUD1L,uBAAA,GAAwB,UAAUwI,IAAV,EAAgB0L,UAAhB,EAA4BjL,QAA5B,EAAsC;CAC5D,QAAI,OAAOT,IAAP,KAAgB,QAApB,EAA8B;CAC5B,aAAOxI,QAAQqV,qBAAR,CAA8B7M,IAA9B,EAAoC0L,UAApC,EAAgDjL,QAAhD,CAAP;CACD;;CAED,QAAI,OAAOiL,UAAP,KAAsB,UAA1B,EAAsC;CACpCjL,iBAAWiL,UAAX;CACAA,mBAAa,IAAb;CACD;;CAED,QAAI7L,MAAJ;CACA,QAAIG,SAAS,EAAb,EAAiB;;CAEf,aAAOS,SAAStE,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED,QAAIhH,SAAS,EAAb;CAAA,QAAiB0B,CAAjB;CAAA,QAAoB2M,GAApB;;CAEA,SAAK,IAAIjO,IAAI,CAAR,EAAW+O,IAAItE,KAAK7K,MAAzB,EAAiCI,IAAI+O,CAArC,EAAwC/O,GAAxC,EAA6C;CAC3C,UAAIuX,MAAM9M,KAAK5C,MAAL,CAAY7H,CAAZ,CAAV;;CAEA,UAAIuX,QAAQ,GAAZ,EAAiB;CACf3X,kBAAU2X,GAAV;CACA;CACD;;CAED,UAAI3X,WAAW,EAAX,IAAkBA,WAAW0B,IAAIiM,OAAO3N,MAAP,CAAf,CAAtB,EAAuD;;CAErD,eAAOsL,SAAStE,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAEDqH,YAAMxD,KAAKvF,MAAL,CAAYlF,IAAI,CAAhB,EAAmBsB,CAAnB,CAAN;;CAEA,UAAI1B,UAAUqO,IAAIrO,MAAlB,EAA0B;;CAExB,eAAOsL,SAAStE,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED,UAAIqH,IAAIrO,MAAR,EAAgB;CACd0K,iBAASrI,QAAQuV,YAAR,CAAqBvJ,GAArB,EAA0BkI,UAA1B,EAAsC,KAAtC,CAAT;;CAEA,YAAIvP,IAAIjG,IAAJ,KAAa2J,OAAO3J,IAApB,IAA4BiG,IAAI6D,IAAJ,KAAaH,OAAOG,IAApD,EAA0D;;CAExD,iBAAOS,SAAStE,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED,YAAI6Q,MAAMvM,SAASZ,MAAT,EAAiBtK,IAAIsB,CAArB,EAAwByN,CAAxB,CAAV;CACA,YAAI,UAAU0I,GAAd,EAAmB;CACpB;;;CAGDzX,WAAKsB,CAAL;CACA1B,eAAS,EAAT;CACD;;CAED,QAAIA,WAAW,EAAf,EAAmB;;CAEjB,aAAOsL,SAAStE,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;CAEF,GA5DD;;;;;;;;;;;;;;;;CA4EA3E,oCAAA,GAAqC,UAASyS,OAAT,EAAkBxJ,QAAlB,EAA4B;CAC/D,QAAI,CAACwJ,QAAQ9U,MAAb,EAAqB;CACnB,aAAOsL,SAAS,IAAIpB,WAAJ,CAAgB,CAAhB,CAAT,CAAP;CACD;;CAED,aAASgN,SAAT,CAAmBxM,MAAnB,EAA2ByM,YAA3B,EAAyC;CACvC9U,cAAQ0T,YAAR,CAAqBrL,MAArB,EAA6B,IAA7B,EAAmC,IAAnC,EAAyC,UAASG,IAAT,EAAe;CACtD,eAAOsM,aAAa,IAAb,EAAmBtM,IAAnB,CAAP;CACD,OAFD;CAGD;;CAEDuM,QAAItC,OAAJ,EAAaoC,SAAb,EAAwB,UAASlQ,GAAT,EAAc8Q,cAAd,EAA8B;CACpD,UAAIC,cAAcD,eAAeE,MAAf,CAAsB,UAASC,GAAT,EAAcvK,CAAd,EAAiB;CACvD,YAAIvI,GAAJ;CACA,YAAI,OAAOuI,CAAP,KAAa,QAAjB,EAA0B;CACxBvI,gBAAMuI,EAAE1N,MAAR;CACD,SAFD,MAEO;CACLmF,gBAAMuI,EAAE+B,UAAR;CACD;CACD,eAAOwI,MAAM9S,IAAIuE,QAAJ,GAAe1J,MAArB,GAA8BmF,GAA9B,GAAoC,CAA3C,CAPuD;CAQxD,OARiB,EAQf,CARe,CAAlB;;CAUA,UAAI+S,cAAc,IAAIvI,UAAJ,CAAeoI,WAAf,CAAlB;;CAEA,UAAII,cAAc,CAAlB;CACAL,qBAAeM,OAAf,CAAuB,UAAS1K,CAAT,EAAY;CACjC,YAAI2K,WAAW,OAAO3K,CAAP,KAAa,QAA5B;CACA,YAAI4K,KAAK5K,CAAT;CACA,YAAI2K,QAAJ,EAAc;CACZ,cAAIE,OAAO,IAAI5I,UAAJ,CAAejC,EAAE1N,MAAjB,CAAX;CACA,eAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIsN,EAAE1N,MAAtB,EAA8BI,GAA9B,EAAmC;CACjCmY,iBAAKnY,CAAL,IAAUsN,EAAEzK,UAAF,CAAa7C,CAAb,CAAV;CACD;CACDkY,eAAKC,KAAKnO,MAAV;CACD;;CAED,YAAIiO,QAAJ,EAAc;;CACZH,sBAAYC,aAAZ,IAA6B,CAA7B;CACD,SAFD,MAEO;;CACLD,sBAAYC,aAAZ,IAA6B,CAA7B;CACD;;CAED,YAAIK,SAASF,GAAG7I,UAAH,CAAc/F,QAAd,EAAb;CACA,aAAK,IAAItJ,IAAI,CAAb,EAAgBA,IAAIoY,OAAOxY,MAA3B,EAAmCI,GAAnC,EAAwC;CACtC8X,sBAAYC,aAAZ,IAA6BvR,SAAS4R,OAAOpY,CAAP,CAAT,CAA7B;CACD;CACD8X,oBAAYC,aAAZ,IAA6B,GAA7B;;CAEA,YAAII,OAAO,IAAI5I,UAAJ,CAAe2I,EAAf,CAAX;CACA,aAAK,IAAIlY,IAAI,CAAb,EAAgBA,IAAImY,KAAKvY,MAAzB,EAAiCI,GAAjC,EAAsC;CACpC8X,sBAAYC,aAAZ,IAA6BI,KAAKnY,CAAL,CAA7B;CACD;CACF,OA3BD;;CA6BA,aAAOkL,SAAS4M,YAAY9N,MAArB,CAAP;CACD,KA5CD;CA6CD,GAxDD;;;;;;CA8DA/H,6BAAA,GAA8B,UAASyS,OAAT,EAAkBxJ,QAAlB,EAA4B;CACxD,aAAS4L,SAAT,CAAmBxM,MAAnB,EAA2ByM,YAA3B,EAAyC;CACvC9U,cAAQ0T,YAAR,CAAqBrL,MAArB,EAA6B,IAA7B,EAAmC,IAAnC,EAAyC,UAAS+K,OAAT,EAAkB;CACzD,YAAIgD,mBAAmB,IAAI9I,UAAJ,CAAe,CAAf,CAAvB;CACA8I,yBAAiB,CAAjB,IAAsB,CAAtB;CACA,YAAI,OAAOhD,OAAP,KAAmB,QAAvB,EAAiC;CAC/B,cAAI8C,OAAO,IAAI5I,UAAJ,CAAe8F,QAAQzV,MAAvB,CAAX;CACA,eAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIqV,QAAQzV,MAA5B,EAAoCI,GAApC,EAAyC;CACvCmY,iBAAKnY,CAAL,IAAUqV,QAAQxS,UAAR,CAAmB7C,CAAnB,CAAV;CACD;CACDqV,oBAAU8C,KAAKnO,MAAf;CACAqO,2BAAiB,CAAjB,IAAsB,CAAtB;CACD;;CAED,YAAItT,MAAOsQ,mBAAmBvL,WAApB,GACNuL,QAAQhG,UADF,GAENgG,QAAQ7B,IAFZ;;CAIA,YAAI4E,SAASrT,IAAIuE,QAAJ,EAAb;CACA,YAAIgP,YAAY,IAAI/I,UAAJ,CAAe6I,OAAOxY,MAAP,GAAgB,CAA/B,CAAhB;CACA,aAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIoY,OAAOxY,MAA3B,EAAmCI,GAAnC,EAAwC;CACtCsY,oBAAUtY,CAAV,IAAewG,SAAS4R,OAAOpY,CAAP,CAAT,CAAf;CACD;CACDsY,kBAAUF,OAAOxY,MAAjB,IAA2B,GAA3B;;CAEA,YAAIuK,MAAJ,EAAU;CACR,cAAIyL,OAAO,IAAIzL,MAAJ,CAAS,CAACkO,iBAAiBrO,MAAlB,EAA0BsO,UAAUtO,MAApC,EAA4CqL,OAA5C,CAAT,CAAX;CACA0B,uBAAa,IAAb,EAAmBnB,IAAnB;CACD;CACF,OA3BD;CA4BD;;CAEDoB,QAAItC,OAAJ,EAAaoC,SAAb,EAAwB,UAASlQ,GAAT,EAAcqQ,OAAd,EAAuB;CAC7C,aAAO/L,SAAS,IAAIf,MAAJ,CAAS8M,OAAT,CAAT,CAAP;CACD,KAFD;CAGD,GAnCD;;;;;;;;;;;CA8CAhV,+BAAA,GAAgC,UAAUwI,IAAV,EAAgB0L,UAAhB,EAA4BjL,QAA5B,EAAsC;CACpE,QAAI,OAAOiL,UAAP,KAAsB,UAA1B,EAAsC;CACpCjL,iBAAWiL,UAAX;CACAA,mBAAa,IAAb;CACD;;CAED,QAAIoC,aAAa9N,IAAjB;CACA,QAAIF,UAAU,EAAd;;CAEA,WAAOgO,WAAWlJ,UAAX,GAAwB,CAA/B,EAAkC;CAChC,UAAImJ,YAAY,IAAIjJ,UAAJ,CAAegJ,UAAf,CAAhB;CACA,UAAIN,WAAWO,UAAU,CAAV,MAAiB,CAAhC;CACA,UAAIC,YAAY,EAAhB;;CAEA,WAAK,IAAIzY,IAAI,CAAb,GAAkBA,GAAlB,EAAuB;CACrB,YAAIwY,UAAUxY,CAAV,MAAiB,GAArB,EAA0B;;;CAG1B,YAAIyY,UAAU7Y,MAAV,GAAmB,GAAvB,EAA4B;CAC1B,iBAAOsL,SAAStE,GAAT,EAAc,CAAd,EAAiB,CAAjB,CAAP;CACD;;CAED6R,qBAAaD,UAAUxY,CAAV,CAAb;CACD;;CAEDuY,mBAAa/B,YAAY+B,UAAZ,EAAwB,IAAIE,UAAU7Y,MAAtC,CAAb;CACA6Y,kBAAYjS,SAASiS,SAAT,CAAZ;;CAEA,UAAIxK,MAAMuI,YAAY+B,UAAZ,EAAwB,CAAxB,EAA2BE,SAA3B,CAAV;CACA,UAAIR,QAAJ,EAAc;CACZ,YAAI;CACFhK,gBAAM7M,OAAOiP,YAAP,CAAoBhM,KAApB,CAA0B,IAA1B,EAAgC,IAAIkL,UAAJ,CAAetB,GAAf,CAAhC,CAAN;CACD,SAFD,CAEE,OAAOxO,CAAP,EAAU;;CAEV,cAAIuW,QAAQ,IAAIzG,UAAJ,CAAetB,GAAf,CAAZ;CACAA,gBAAM,EAAN;CACA,eAAK,IAAIjO,IAAI,CAAb,EAAgBA,IAAIgW,MAAMpW,MAA1B,EAAkCI,GAAlC,EAAuC;CACrCiO,mBAAO7M,OAAOiP,YAAP,CAAoB2F,MAAMhW,CAAN,CAApB,CAAP;CACD;CACF;CACF;;CAEDuK,cAAQ5F,IAAR,CAAasJ,GAAb;CACAsK,mBAAa/B,YAAY+B,UAAZ,EAAwBE,SAAxB,CAAb;CACD;;CAED,QAAIC,QAAQnO,QAAQ3K,MAApB;CACA2K,YAAQyN,OAAR,CAAgB,UAAShO,MAAT,EAAiBhK,CAAjB,EAAoB;CAClCkL,eAASjJ,QAAQuV,YAAR,CAAqBxN,MAArB,EAA6BmM,UAA7B,EAAyC,IAAzC,CAAT,EAAyDnW,CAAzD,EAA4D0Y,KAA5D;CACD,KAFD;CAGD,GAlDD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CC3iBA;;;;;;;;CAWA,gBAAiBC,SAAjB;;;;;;;;;CASA,SAASA,SAAT,CAAoBxK,IAApB,EAA0B;CACxB,OAAKpG,IAAL,GAAYoG,KAAKpG,IAAjB;CACA,OAAK6Q,QAAL,GAAgBzK,KAAKyK,QAArB;CACA,OAAK9Q,IAAL,GAAYqG,KAAKrG,IAAjB;CACA,OAAK+Q,MAAL,GAAc1K,KAAK0K,MAAnB;CACA,OAAKC,KAAL,GAAa3K,KAAK2K,KAAlB;CACA,OAAKC,cAAL,GAAsB5K,KAAK4K,cAA3B;CACA,OAAKC,iBAAL,GAAyB7K,KAAK6K,iBAA9B;CACA,OAAKC,UAAL,GAAkB,EAAlB;CACA,OAAKC,KAAL,GAAa/K,KAAK+K,KAAL,IAAc,KAA3B;CACA,OAAKC,MAAL,GAAchL,KAAKgL,MAAnB;CACA,OAAK7K,UAAL,GAAkBH,KAAKG,UAAvB;;;CAGA,OAAK8K,GAAL,GAAWjL,KAAKiL,GAAhB;CACA,OAAK/Q,GAAL,GAAW8F,KAAK9F,GAAhB;CACA,OAAKgR,UAAL,GAAkBlL,KAAKkL,UAAvB;CACA,OAAKC,IAAL,GAAYnL,KAAKmL,IAAjB;CACA,OAAKC,EAAL,GAAUpL,KAAKoL,EAAf;CACA,OAAKC,OAAL,GAAerL,KAAKqL,OAApB;CACA,OAAKC,kBAAL,GAA0BtL,KAAKsL,kBAA/B;CACA,OAAKC,SAAL,GAAiBvL,KAAKuL,SAAtB;;;CAGA,OAAKC,YAAL,GAAoBxL,KAAKwL,YAAzB;CACA,OAAKC,YAAL,GAAoBzL,KAAKyL,YAAzB;CACD;;;;;;CAMDzR,QAAQwQ,UAAU1R,SAAlB;;;;;;;;;;CAUA0R,UAAU1R,SAAV,CAAoB4S,OAApB,GAA8B,UAAU5L,GAAV,EAAe6L,IAAf,EAAqB;CACjD,MAAIlT,MAAM,IAAI3F,KAAJ,CAAUgN,GAAV,CAAV;CACArH,MAAIjG,IAAJ,GAAW,gBAAX;CACAiG,MAAImT,WAAJ,GAAkBD,IAAlB;CACA,OAAK5Q,IAAL,CAAU,OAAV,EAAmBtC,GAAnB;CACA,SAAO,IAAP;CACD,CAND;;;;;;;;CAcA+R,UAAU1R,SAAV,CAAoB0N,IAApB,GAA2B,YAAY;CACrC,MAAI,aAAa,KAAKsE,UAAlB,IAAgC,OAAO,KAAKA,UAAhD,EAA4D;CAC1D,SAAKA,UAAL,GAAkB,SAAlB;CACA,SAAKe,MAAL;CACD;;CAED,SAAO,IAAP;CACD,CAPD;;;;;;;;CAeArB,UAAU1R,SAAV,CAAoB2N,KAApB,GAA4B,YAAY;CACtC,MAAI,cAAc,KAAKqE,UAAnB,IAAiC,WAAW,KAAKA,UAArD,EAAiE;CAC/D,SAAKgB,OAAL;CACA,SAAKC,OAAL;CACD;;CAED,SAAO,IAAP;CACD,CAPD;;;;;;;;;CAgBAvB,UAAU1R,SAAV,CAAoBkT,IAApB,GAA2B,UAAUzF,OAAV,EAAmB;CAC5C,MAAI,WAAW,KAAKuE,UAApB,EAAgC;CAC9B,SAAKmB,KAAL,CAAW1F,OAAX;CACD,GAFD,MAEO;CACL,UAAM,IAAIzT,KAAJ,CAAU,oBAAV,CAAN;CACD;CACF,CAND;;;;;;;;CAcA0X,UAAU1R,SAAV,CAAoBoT,MAApB,GAA6B,YAAY;CACvC,OAAKpB,UAAL,GAAkB,MAAlB;CACA,OAAKqB,QAAL,GAAgB,IAAhB;CACA,OAAKpR,IAAL,CAAU,MAAV;CACD,CAJD;;;;;;;;;CAaAyP,UAAU1R,SAAV,CAAoBsT,MAApB,GAA6B,UAAU9P,IAAV,EAAgB;CAC3C,MAAIH,SAASkQ,OAAOhD,YAAP,CAAoB/M,IAApB,EAA0B,KAAK0O,MAAL,CAAYhD,UAAtC,CAAb;CACA,OAAKsE,QAAL,CAAcnQ,MAAd;CACD,CAHD;;;;;;CASAqO,UAAU1R,SAAV,CAAoBwT,QAApB,GAA+B,UAAUnQ,MAAV,EAAkB;CAC/C,OAAKpB,IAAL,CAAU,QAAV,EAAoBoB,MAApB;CACD,CAFD;;;;;;;;CAUAqO,UAAU1R,SAAV,CAAoBiT,OAApB,GAA8B,YAAY;CACxC,OAAKjB,UAAL,GAAkB,QAAlB;CACA,OAAK/P,IAAL,CAAU,OAAV;CACD,CAHD;;;;;;;CCzJA;;;;;;;;CAQA,aAAiB,eAAA,CAAUzB,GAAV,EAAe;CAC9B,MAAIpI,MAAM,EAAV;;CAEA,OAAK,IAAIW,CAAT,IAAcyH,GAAd,EAAmB;CACjB,QAAIA,IAAIoH,cAAJ,CAAmB7O,CAAnB,CAAJ,EAA2B;CACzB,UAAIX,IAAIO,MAAR,EAAgBP,OAAO,GAAP;CAChBA,aAAOqb,mBAAmB1a,CAAnB,IAAwB,GAAxB,GAA8B0a,mBAAmBjT,IAAIzH,CAAJ,CAAnB,CAArC;CACD;CACF;;CAED,SAAOX,GAAP;CACD,CAXD;;;;;;;;;CAoBA,aAAiB,eAAA,CAASsb,EAAT,EAAY;CAC3B,MAAIC,MAAM,EAAV;CACA,MAAIC,QAAQF,GAAG7V,KAAH,CAAS,GAAT,CAAZ;CACA,OAAK,IAAI9E,IAAI,CAAR,EAAW+O,IAAI8L,MAAMjb,MAA1B,EAAkCI,IAAI+O,CAAtC,EAAyC/O,GAAzC,EAA8C;CAC5C,QAAI8a,OAAOD,MAAM7a,CAAN,EAAS8E,KAAT,CAAe,GAAf,CAAX;CACA8V,QAAIG,mBAAmBD,KAAK,CAAL,CAAnB,CAAJ,IAAmCC,mBAAmBD,KAAK,CAAL,CAAnB,CAAnC;CACD;CACD,SAAOF,GAAP;CACD,CARD;;;;;;;;;;;;;;CC3BA,uBAAiB,yBAAA,CAASrH,CAAT,EAAYhU,CAAZ,EAAc;CAC7B,MAAIkJ,KAAK,SAALA,EAAK,GAAU,EAAnB;CACAA,KAAGxB,SAAH,GAAe1H,EAAE0H,SAAjB;CACAsM,IAAEtM,SAAF,GAAc,IAAIwB,EAAJ,EAAd;CACA8K,IAAEtM,SAAF,CAAY+T,WAAZ,GAA0BzH,CAA1B;CACD,CALD;;;;;;;CCCA,IAAI0H,WAAW,mEAAmEnW,KAAnE,CAAyE,EAAzE,CAAf;CAAA,IACIlF,SAAS,EADb;CAAA,IAEIoX,MAAM,EAFV;CAAA,IAGIkE,OAAO,CAHX;CAAA,IAIIlb,IAAI,CAJR;CAAA,IAKIqD,IALJ;;;;;;;;;CAcA,SAAS4I,QAAT,CAAgBlB,GAAhB,EAAqB;CACnB,MAAIsK,UAAU,EAAd;;CAEA,KAAG;CACDA,cAAU4F,SAASlQ,MAAMnL,MAAf,IAAyByV,OAAnC;CACAtK,UAAMpJ,KAAKI,KAAL,CAAWgJ,MAAMnL,MAAjB,CAAN;CACD,GAHD,QAGSmL,MAAM,CAHf;;CAKA,SAAOsK,OAAP;CACD;;;;;;;;;CASD,SAASoB,QAAT,CAAgBpX,GAAhB,EAAqB;CACnB,MAAI8b,UAAU,CAAd;;CAEA,OAAKnb,IAAI,CAAT,EAAYA,IAAIX,IAAIO,MAApB,EAA4BI,GAA5B,EAAiC;CAC/Bmb,cAAUA,UAAUvb,MAAV,GAAmBoX,IAAI3X,IAAIwI,MAAJ,CAAW7H,CAAX,CAAJ,CAA7B;CACD;;CAED,SAAOmb,OAAP;CACD;;;;;;;;CAQD,SAASC,KAAT,GAAiB;CACf,MAAIC,MAAMpP,SAAO,CAAC,IAAI9I,IAAJ,EAAR,CAAV;;CAEA,MAAIkY,QAAQhY,IAAZ,EAAkB,OAAO6X,OAAO,CAAP,EAAU7X,OAAOgY,GAAxB;CAClB,SAAOA,MAAK,GAAL,GAAUpP,SAAOiP,MAAP,CAAjB;CACD;;;;;CAKD,OAAOlb,IAAIJ,MAAX,EAAmBI,GAAnB;CAAwBgX,MAAIiE,SAASjb,CAAT,CAAJ,IAAmBA,CAAnB;CAAxB;;;CAKAob,MAAMnP,MAAN,GAAeA,QAAf;CACAmP,MAAM3E,MAAN,GAAeA,QAAf;CACA,cAAiB2E,KAAjB;;;;;;;;;;;;;;;;;CCnEA;;;;CASA,IAAIhZ,UAAQK,aAAiB,0BAAjB,CAAZ;;;;;;CAMA,cAAiB6Y,OAAjB;;;;;;CAMA,IAAIC,UAAW,YAAY;CACzB,MAAIrN,iBAAiBsN,UAArB;CACA,MAAIC,MAAM,IAAIvN,cAAJ,CAAmB,EAAEE,SAAS,KAAX,EAAnB,CAAV;CACA,SAAO,QAAQqN,IAAIC,YAAnB;CACD,CAJa,EAAd;;;;;;;;;CAaA,SAASJ,OAAT,CAAkBnN,IAAlB,EAAwB;CACtB,MAAIwN,cAAexN,QAAQA,KAAKwN,WAAhC;CACA,MAAI,CAACJ,OAAD,IAAYI,WAAhB,EAA6B;CAC3B,SAAK1G,cAAL,GAAsB,KAAtB;CACD;CACD0D,cAAU7U,IAAV,CAAe,IAAf,EAAqBqK,IAArB;CACD;;;;;;CAMDyN,QAAQN,OAAR,EAAiB3C,WAAjB;;;;;;CAMA2C,QAAQrU,SAAR,CAAkBnF,IAAlB,GAAyB,SAAzB;;;;;;;;;CASAwZ,QAAQrU,SAAR,CAAkB+S,MAAlB,GAA2B,YAAY;CACrC,OAAK6B,IAAL;CACD,CAFD;;;;;;;;;CAWAP,QAAQrU,SAAR,CAAkB6U,KAAlB,GAA0B,UAAUC,OAAV,EAAmB;CAC3C,MAAI9Y,OAAO,IAAX;;CAEA,OAAKgW,UAAL,GAAkB,SAAlB;;CAEA,WAAS6C,KAAT,GAAkB;CAChB1Z,YAAM,QAAN;CACAa,SAAKgW,UAAL,GAAkB,QAAlB;CACA8C;CACD;;CAED,MAAI,KAAKC,OAAL,IAAgB,CAAC,KAAK1B,QAA1B,EAAoC;CAClC,QAAI5B,QAAQ,CAAZ;;CAEA,QAAI,KAAKsD,OAAT,EAAkB;CAChB5Z,cAAM,6CAAN;CACAsW;CACA,WAAK/P,IAAL,CAAU,cAAV,EAA0B,YAAY;CACpCvG,gBAAM,4BAAN;CACA,UAAEsW,KAAF,IAAWoD,OAAX;CACD,OAHD;CAID;;CAED,QAAI,CAAC,KAAKxB,QAAV,EAAoB;CAClBlY,cAAM,6CAAN;CACAsW;CACA,WAAK/P,IAAL,CAAU,OAAV,EAAmB,YAAY;CAC7BvG,gBAAM,4BAAN;CACA,UAAEsW,KAAF,IAAWoD,OAAX;CACD,OAHD;CAID;CACF,GApBD,MAoBO;CACLA;CACD;CACF,CAlCD;;;;;;;;CA0CAR,QAAQrU,SAAR,CAAkB4U,IAAlB,GAAyB,YAAY;CACnCzZ,UAAM,SAAN;CACA,OAAK4Z,OAAL,GAAe,IAAf;CACA,OAAKC,MAAL;CACA,OAAK/S,IAAL,CAAU,MAAV;CACD,CALD;;;;;;;;CAaAoS,QAAQrU,SAAR,CAAkBsT,MAAlB,GAA2B,UAAU9P,IAAV,EAAgB;CACzC,MAAIxH,OAAO,IAAX;CACAb,UAAM,qBAAN,EAA6BqI,IAA7B;CACA,MAAIS,WAAW,SAAXA,QAAW,CAAUZ,MAAV,EAAkB5G,KAAlB,EAAyBgV,KAAzB,EAAgC;;CAE7C,QAAI,cAAczV,KAAKgW,UAAvB,EAAmC;CACjChW,WAAKoX,MAAL;CACD;;;CAGD,QAAI,YAAY/P,OAAO3J,IAAvB,EAA6B;CAC3BsC,WAAKiX,OAAL;CACA,aAAO,KAAP;CACD;;;CAGDjX,SAAKwX,QAAL,CAAcnQ,MAAd;CACD,GAdD;;;CAiBAkQ,SAAO0B,aAAP,CAAqBzR,IAArB,EAA2B,KAAK0O,MAAL,CAAYhD,UAAvC,EAAmDjL,QAAnD;;;CAGA,MAAI,aAAa,KAAK+N,UAAtB,EAAkC;;CAEhC,SAAK+C,OAAL,GAAe,KAAf;CACA,SAAK9S,IAAL,CAAU,cAAV;;CAEA,QAAI,WAAW,KAAK+P,UAApB,EAAgC;CAC9B,WAAK4C,IAAL;CACD,KAFD,MAEO;CACLzZ,cAAM,sCAAN,EAA8C,KAAK6W,UAAnD;CACD;CACF;CACF,CAlCD;;;;;;;;CA0CAqC,QAAQrU,SAAR,CAAkBgT,OAAlB,GAA4B,YAAY;CACtC,MAAIhX,OAAO,IAAX;;CAEA,WAAS2R,KAAT,GAAkB;CAChBxS,YAAM,sBAAN;CACAa,SAAKmX,KAAL,CAAW,CAAC,EAAEzZ,MAAM,OAAR,EAAD,CAAX;CACD;;CAED,MAAI,WAAW,KAAKsY,UAApB,EAAgC;CAC9B7W,YAAM,0BAAN;CACAwS;CACD,GAHD,MAGO;;;CAGLxS,YAAM,sCAAN;CACA,SAAKuG,IAAL,CAAU,MAAV,EAAkBiM,KAAlB;CACD;CACF,CAjBD;;;;;;;;;;CA2BA0G,QAAQrU,SAAR,CAAkBmT,KAAlB,GAA0B,UAAU1F,OAAV,EAAmB;CAC3C,MAAIzR,OAAO,IAAX;CACA,OAAKqX,QAAL,GAAgB,KAAhB;CACA,MAAI6B,aAAa,SAAbA,UAAa,GAAY;CAC3BlZ,SAAKqX,QAAL,GAAgB,IAAhB;CACArX,SAAKiG,IAAL,CAAU,OAAV;CACD,GAHD;;CAKAsR,SAAO4B,aAAP,CAAqB1H,OAArB,EAA8B,KAAKO,cAAnC,EAAmD,UAAUxK,IAAV,EAAgB;CACjExH,SAAKoZ,OAAL,CAAa5R,IAAb,EAAmB0R,UAAnB;CACD,GAFD;CAGD,CAXD;;;;;;;;CAmBAb,QAAQrU,SAAR,CAAkBlH,GAAlB,GAAwB,YAAY;CAClC,MAAI+Y,QAAQ,KAAKA,KAAL,IAAc,EAA1B;CACA,MAAIwD,SAAS,KAAKzD,MAAL,GAAc,OAAd,GAAwB,MAArC;CACA,MAAI/Q,OAAO,EAAX;;;CAGA,MAAI,UAAU,KAAKkR,iBAAnB,EAAsC;CACpCF,UAAM,KAAKC,cAAX,IAA6BqC,SAA7B;CACD;;CAED,MAAI,CAAC,KAAKnG,cAAN,IAAwB,CAAC6D,MAAMyD,GAAnC,EAAwC;CACtCzD,UAAMjD,GAAN,GAAY,CAAZ;CACD;;CAEDiD,UAAQ0D,UAAQvQ,MAAR,CAAe6M,KAAf,CAAR;;;CAGA,MAAI,KAAKhR,IAAL,KAAe,YAAYwU,MAAZ,IAAsB/O,OAAO,KAAKzF,IAAZ,MAAsB,GAA7C,IACd,WAAWwU,MAAX,IAAqB/O,OAAO,KAAKzF,IAAZ,MAAsB,EAD3C,CAAJ,EACqD;CACnDA,WAAO,MAAM,KAAKA,IAAlB;CACD;;;CAGD,MAAIgR,MAAMlZ,MAAV,EAAkB;CAChBkZ,YAAQ,MAAMA,KAAd;CACD;;CAED,MAAI9Q,OAAO,KAAK4Q,QAAL,CAAcpZ,OAAd,CAAsB,GAAtB,MAA+B,CAAC,CAA3C;CACA,SAAO8c,SAAS,KAAT,IAAkBtU,OAAO,MAAM,KAAK4Q,QAAX,GAAsB,GAA7B,GAAmC,KAAKA,QAA1D,IAAsE9Q,IAAtE,GAA6E,KAAKC,IAAlF,GAAyF+Q,KAAhG;CACD,CA7BD;;;;;;;;;CCvNA;;;;CAQA,IAAI1W,UAAQK,aAAiB,8BAAjB,CAAZ;;;;;;CAMA,iBAAiBga,GAAjB;CACA,gBAAyBC,OAAzB;;;;;;CAMA,SAASC,KAAT,GAAkB;;;;;;;;;CASlB,SAASF,GAAT,CAActO,IAAd,EAAoB;CAClBmN,YAAQxX,IAAR,CAAa,IAAb,EAAmBqK,IAAnB;CACA,OAAKyO,cAAL,GAAsBzO,KAAKyO,cAA3B;CACA,OAAKjD,YAAL,GAAoBxL,KAAKwL,YAAzB;;CAEA,MAAIjS,cAAAA,CAAOC,QAAX,EAAqB;CACnB,QAAIkV,QAAQ,aAAalV,SAASC,QAAlC;CACA,QAAIE,OAAOH,SAASG,IAApB;;;CAGA,QAAI,CAACA,IAAL,EAAW;CACTA,aAAO+U,QAAQ,GAAR,GAAc,EAArB;CACD;;CAED,SAAKC,EAAL,GAAU3O,KAAKyK,QAAL,KAAkBlR,cAAAA,CAAOC,QAAPD,CAAgBkR,QAAlC,IACR9Q,SAASqG,KAAKrG,IADhB;CAEA,SAAKiV,EAAL,GAAU5O,KAAK0K,MAAL,KAAgBgE,KAA1B;CACD;CACF;;;;;;CAMDjB,QAAQa,GAAR,EAAanB,SAAb;;;;;;CAMAmB,IAAIxV,SAAJ,CAAcgO,cAAd,GAA+B,IAA/B;;;;;;;;;CASAwH,IAAIxV,SAAJ,CAAc+V,OAAd,GAAwB,UAAU7O,IAAV,EAAgB;CACtCA,SAAOA,QAAQ,EAAf;CACAA,OAAKpO,GAAL,GAAW,KAAKA,GAAL,EAAX;CACAoO,OAAK2O,EAAL,GAAU,KAAKA,EAAf;CACA3O,OAAK4O,EAAL,GAAU,KAAKA,EAAf;CACA5O,OAAK+K,KAAL,GAAa,KAAKA,KAAL,IAAc,KAA3B;CACA/K,OAAK8G,cAAL,GAAsB,KAAKA,cAA3B;CACA9G,OAAKG,UAAL,GAAkB,KAAKA,UAAvB;;;CAGAH,OAAKiL,GAAL,GAAW,KAAKA,GAAhB;CACAjL,OAAK9F,GAAL,GAAW,KAAKA,GAAhB;CACA8F,OAAKkL,UAAL,GAAkB,KAAKA,UAAvB;CACAlL,OAAKmL,IAAL,GAAY,KAAKA,IAAjB;CACAnL,OAAKoL,EAAL,GAAU,KAAKA,EAAf;CACApL,OAAKqL,OAAL,GAAe,KAAKA,OAApB;CACArL,OAAKsL,kBAAL,GAA0B,KAAKA,kBAA/B;CACAtL,OAAKyO,cAAL,GAAsB,KAAKA,cAA3B;;;CAGAzO,OAAKwL,YAAL,GAAoB,KAAKA,YAAzB;;CAEA,SAAO,IAAI+C,OAAJ,CAAYvO,IAAZ,CAAP;CACD,CAvBD;;;;;;;;;;CAiCAsO,IAAIxV,SAAJ,CAAcoV,OAAd,GAAwB,UAAU5R,IAAV,EAAgBhC,EAAhB,EAAoB;CAC1C,MAAIiO,WAAW,OAAOjM,IAAP,KAAgB,QAAhB,IAA4BA,SAAShJ,SAApD;CACA,MAAIwb,MAAM,KAAKD,OAAL,CAAa,EAAEE,QAAQ,MAAV,EAAkBzS,MAAMA,IAAxB,EAA8BiM,UAAUA,QAAxC,EAAb,CAAV;CACA,MAAIzT,OAAO,IAAX;CACAga,MAAI3U,EAAJ,CAAO,SAAP,EAAkBG,EAAlB;CACAwU,MAAI3U,EAAJ,CAAO,OAAP,EAAgB,UAAU1B,GAAV,EAAe;CAC7B3D,SAAK4W,OAAL,CAAa,gBAAb,EAA+BjT,GAA/B;CACD,GAFD;CAGA,OAAKuW,OAAL,GAAeF,GAAf;CACD,CATD;;;;;;;;CAiBAR,IAAIxV,SAAJ,CAAcgV,MAAd,GAAuB,YAAY;CACjC7Z,UAAM,UAAN;CACA,MAAI6a,MAAM,KAAKD,OAAL,EAAV;CACA,MAAI/Z,OAAO,IAAX;CACAga,MAAI3U,EAAJ,CAAO,MAAP,EAAe,UAAUmC,IAAV,EAAgB;CAC7BxH,SAAKsX,MAAL,CAAY9P,IAAZ;CACD,GAFD;CAGAwS,MAAI3U,EAAJ,CAAO,OAAP,EAAgB,UAAU1B,GAAV,EAAe;CAC7B3D,SAAK4W,OAAL,CAAa,gBAAb,EAA+BjT,GAA/B;CACD,GAFD;CAGA,OAAKwW,OAAL,GAAeH,GAAf;CACD,CAXD;;;;;;;;;CAoBA,SAASP,OAAT,CAAkBvO,IAAlB,EAAwB;CACtB,OAAK+O,MAAL,GAAc/O,KAAK+O,MAAL,IAAe,KAA7B;CACA,OAAKnd,GAAL,GAAWoO,KAAKpO,GAAhB;CACA,OAAK+c,EAAL,GAAU,CAAC,CAAC3O,KAAK2O,EAAjB;CACA,OAAKC,EAAL,GAAU,CAAC,CAAC5O,KAAK4O,EAAjB;CACA,OAAKM,KAAL,GAAa,UAAUlP,KAAKkP,KAA5B;CACA,OAAK5S,IAAL,GAAYhJ,cAAc0M,KAAK1D,IAAnB,GAA0B0D,KAAK1D,IAA/B,GAAsC,IAAlD;CACA,OAAKyO,KAAL,GAAa/K,KAAK+K,KAAlB;CACA,OAAKxC,QAAL,GAAgBvI,KAAKuI,QAArB;CACA,OAAKzB,cAAL,GAAsB9G,KAAK8G,cAA3B;CACA,OAAK3G,UAAL,GAAkBH,KAAKG,UAAvB;CACA,OAAKsO,cAAL,GAAsBzO,KAAKyO,cAA3B;;;CAGA,OAAKxD,GAAL,GAAWjL,KAAKiL,GAAhB;CACA,OAAK/Q,GAAL,GAAW8F,KAAK9F,GAAhB;CACA,OAAKgR,UAAL,GAAkBlL,KAAKkL,UAAvB;CACA,OAAKC,IAAL,GAAYnL,KAAKmL,IAAjB;CACA,OAAKC,EAAL,GAAUpL,KAAKoL,EAAf;CACA,OAAKC,OAAL,GAAerL,KAAKqL,OAApB;CACA,OAAKC,kBAAL,GAA0BtL,KAAKsL,kBAA/B;;;CAGA,OAAKE,YAAL,GAAoBxL,KAAKwL,YAAzB;;CAEA,OAAK2D,MAAL;CACD;;;;;;CAMDnV,QAAQuU,QAAQzV,SAAhB;;;;;;;;CAQAyV,QAAQzV,SAAR,CAAkBqW,MAAlB,GAA2B,YAAY;CACrC,MAAInP,OAAO,EAAE+K,OAAO,KAAKA,KAAd,EAAqB9K,SAAS,KAAK0O,EAAnC,EAAuCzO,SAAS,KAAK0O,EAArD,EAAyDzO,YAAY,KAAKA,UAA1E,EAAX;;;CAGAH,OAAKiL,GAAL,GAAW,KAAKA,GAAhB;CACAjL,OAAK9F,GAAL,GAAW,KAAKA,GAAhB;CACA8F,OAAKkL,UAAL,GAAkB,KAAKA,UAAvB;CACAlL,OAAKmL,IAAL,GAAY,KAAKA,IAAjB;CACAnL,OAAKoL,EAAL,GAAU,KAAKA,EAAf;CACApL,OAAKqL,OAAL,GAAe,KAAKA,OAApB;CACArL,OAAKsL,kBAAL,GAA0B,KAAKA,kBAA/B;;CAEA,MAAIgC,MAAM,KAAKA,GAAL,GAAW,IAAIvN,UAAJ,CAAmBC,IAAnB,CAArB;CACA,MAAIlL,OAAO,IAAX;;CAEA,MAAI;CACFb,YAAM,iBAAN,EAAyB,KAAK8a,MAA9B,EAAsC,KAAKnd,GAA3C;CACA0b,QAAI9G,IAAJ,CAAS,KAAKuI,MAAd,EAAsB,KAAKnd,GAA3B,EAAgC,KAAKsd,KAArC;CACA,QAAI;CACF,UAAI,KAAK1D,YAAT,EAAuB;CACrB8B,YAAI8B,qBAAJ,IAA6B9B,IAAI8B,qBAAJ,CAA0B,IAA1B,CAA7B;CACA,aAAK,IAAIvd,CAAT,IAAc,KAAK2Z,YAAnB,EAAiC;CAC/B,cAAI,KAAKA,YAAL,CAAkB9K,cAAlB,CAAiC7O,CAAjC,CAAJ,EAAyC;CACvCyb,gBAAI+B,gBAAJ,CAAqBxd,CAArB,EAAwB,KAAK2Z,YAAL,CAAkB3Z,CAAlB,CAAxB;CACD;CACF;CACF;CACF,KATD,CASE,OAAOP,CAAP,EAAU;;CAEZ,QAAI,WAAW,KAAKyd,MAApB,EAA4B;CAC1B,UAAI;CACF,YAAI,KAAKxG,QAAT,EAAmB;CACjB+E,cAAI+B,gBAAJ,CAAqB,cAArB,EAAqC,0BAArC;CACD,SAFD,MAEO;CACL/B,cAAI+B,gBAAJ,CAAqB,cAArB,EAAqC,0BAArC;CACD;CACF,OAND,CAME,OAAO/d,CAAP,EAAU;CACb;;CAED,QAAI;CACFgc,UAAI+B,gBAAJ,CAAqB,QAArB,EAA+B,KAA/B;CACD,KAFD,CAEE,OAAO/d,CAAP,EAAU;;;CAGZ,QAAI,qBAAqBgc,GAAzB,EAA8B;CAC5BA,UAAIgC,eAAJ,GAAsB,IAAtB;CACD;;CAED,QAAI,KAAKb,cAAT,EAAyB;CACvBnB,UAAIiC,OAAJ,GAAc,KAAKd,cAAnB;CACD;;CAED,QAAI,KAAKe,MAAL,EAAJ,EAAmB;CACjBlC,UAAIhQ,MAAJ,GAAa,YAAY;CACvBxI,aAAK2a,MAAL;CACD,OAFD;CAGAnC,UAAIoC,OAAJ,GAAc,YAAY;CACxB5a,aAAK4W,OAAL,CAAa4B,IAAIqC,YAAjB;CACD,OAFD;CAGD,KAPD,MAOO;CACLrC,UAAIsC,kBAAJ,GAAyB,YAAY;CACnC,YAAItC,IAAIxC,UAAJ,KAAmB,CAAvB,EAA0B;CACxB,cAAI;CACF,gBAAI+E,cAAcvC,IAAIwC,iBAAJ,CAAsB,cAAtB,CAAlB;CACA,gBAAIhb,KAAKgS,cAAL,IAAuB+I,gBAAgB,0BAA3C,EAAuE;CACrEvC,kBAAIC,YAAJ,GAAmB,aAAnB;CACD;CACF,WALD,CAKE,OAAOjc,CAAP,EAAU;CACb;CACD,YAAI,MAAMgc,IAAIxC,UAAd,EAA0B;CAC1B,YAAI,QAAQwC,IAAIyC,MAAZ,IAAsB,SAASzC,IAAIyC,MAAvC,EAA+C;CAC7Cjb,eAAK2a,MAAL;CACD,SAFD,MAEO;;;CAGLO,qBAAW,YAAY;CACrBlb,iBAAK4W,OAAL,CAAa4B,IAAIyC,MAAjB;CACD,WAFD,EAEG,CAFH;CAGD;CACF,OAnBD;CAoBD;;CAED9b,YAAM,aAAN,EAAqB,KAAKqI,IAA1B;CACAgR,QAAItB,IAAJ,CAAS,KAAK1P,IAAd;CACD,GArED,CAqEE,OAAOhL,CAAP,EAAU;;;;CAIV0e,eAAW,YAAY;CACrBlb,WAAK4W,OAAL,CAAapa,CAAb;CACD,KAFD,EAEG,CAFH;CAGA;CACD;;CAED,MAAIiI,cAAAA,CAAOzB,QAAX,EAAqB;CACnB,SAAKvC,KAAL,GAAagZ,QAAQ0B,aAAR,EAAb;CACA1B,YAAQ2B,QAAR,CAAiB,KAAK3a,KAAtB,IAA+B,IAA/B;CACD;CACF,CAlGD;;;;;;;;CA0GAgZ,QAAQzV,SAAR,CAAkBqX,SAAlB,GAA8B,YAAY;CACxC,OAAKpV,IAAL,CAAU,SAAV;CACA,OAAKqV,OAAL;CACD,CAHD;;;;;;;;CAWA7B,QAAQzV,SAAR,CAAkBsT,MAAlB,GAA2B,UAAU9P,IAAV,EAAgB;CACzC,OAAKvB,IAAL,CAAU,MAAV,EAAkBuB,IAAlB;CACA,OAAK6T,SAAL;CACD,CAHD;;;;;;;;CAWA5B,QAAQzV,SAAR,CAAkB4S,OAAlB,GAA4B,UAAUjT,GAAV,EAAe;CACzC,OAAKsC,IAAL,CAAU,OAAV,EAAmBtC,GAAnB;CACA,OAAK2X,OAAL,CAAa,IAAb;CACD,CAHD;;;;;;;;CAWA7B,QAAQzV,SAAR,CAAkBsX,OAAlB,GAA4B,UAAUC,SAAV,EAAqB;CAC/C,MAAI,gBAAgB,OAAO,KAAK/C,GAA5B,IAAmC,SAAS,KAAKA,GAArD,EAA0D;CACxD;CACD;;CAED,MAAI,KAAKkC,MAAL,EAAJ,EAAmB;CACjB,SAAKlC,GAAL,CAAShQ,MAAT,GAAkB,KAAKgQ,GAAL,CAASoC,OAAT,GAAmBlB,KAArC;CACD,GAFD,MAEO;CACL,SAAKlB,GAAL,CAASsC,kBAAT,GAA8BpB,KAA9B;CACD;;CAED,MAAI6B,SAAJ,EAAe;CACb,QAAI;CACF,WAAK/C,GAAL,CAASgD,KAAT;CACD,KAFD,CAEE,OAAOhf,CAAP,EAAU;CACb;;CAED,MAAIiI,cAAAA,CAAOzB,QAAX,EAAqB;CACnB,WAAOyW,QAAQ2B,QAAR,CAAiB,KAAK3a,KAAtB,CAAP;CACD;;CAED,OAAK+X,GAAL,GAAW,IAAX;CACD,CAtBD;;;;;;;;CA8BAiB,QAAQzV,SAAR,CAAkB2W,MAAlB,GAA2B,YAAY;CACrC,MAAInT,IAAJ;CACA,MAAI;CACF,QAAIuT,WAAJ;CACA,QAAI;CACFA,oBAAc,KAAKvC,GAAL,CAASwC,iBAAT,CAA2B,cAA3B,CAAd;CACD,KAFD,CAEE,OAAOxe,CAAP,EAAU;CACZ,QAAIue,gBAAgB,0BAApB,EAAgD;CAC9CvT,aAAO,KAAKgR,GAAL,CAASiD,QAAT,IAAqB,KAAKjD,GAAL,CAASqC,YAArC;CACD,KAFD,MAEO;CACLrT,aAAO,KAAKgR,GAAL,CAASqC,YAAhB;CACD;CACF,GAVD,CAUE,OAAOre,CAAP,EAAU;CACV,SAAKoa,OAAL,CAAapa,CAAb;CACD;CACD,MAAI,QAAQgL,IAAZ,EAAkB;CAChB,SAAK8P,MAAL,CAAY9P,IAAZ;CACD;CACF,CAlBD;;;;;;;;CA0BAiS,QAAQzV,SAAR,CAAkB0W,MAAlB,GAA2B,YAAY;CACrC,SAAO,gBAAgB,OAAOjW,cAAAA,CAAO8G,cAA9B,IAAgD,CAAC,KAAKuO,EAAtD,IAA4D,KAAKzO,UAAxE;CACD,CAFD;;;;;;;;CAUAoO,QAAQzV,SAAR,CAAkBwX,KAAlB,GAA0B,YAAY;CACpC,OAAKF,OAAL;CACD,CAFD;;;;;;;;CAUA7B,QAAQ0B,aAAR,GAAwB,CAAxB;CACA1B,QAAQ2B,QAAR,GAAmB,EAAnB;;CAEA,IAAI3W,cAAAA,CAAOzB,QAAX,EAAqB;CACnB,MAAIyB,cAAAA,CAAOiX,WAAX,EAAwB;CACtBjX,kBAAAA,CAAOiX,WAAPjX,CAAmB,UAAnBA,EAA+BkX,aAA/BlX;CACD,GAFD,MAEO,IAAIA,cAAAA,CAAOa,gBAAX,EAA6B;CAClCb,kBAAAA,CAAOa,gBAAPb,CAAwB,cAAxBA,EAAwCkX,aAAxClX,EAAuD,KAAvDA;CACD;CACF;;CAED,SAASkX,aAAT,GAA0B;CACxB,OAAK,IAAI5e,CAAT,IAAc0c,QAAQ2B,QAAtB,EAAgC;CAC9B,QAAI3B,QAAQ2B,QAAR,CAAiBxP,cAAjB,CAAgC7O,CAAhC,CAAJ,EAAwC;CACtC0c,cAAQ2B,QAAR,CAAiBre,CAAjB,EAAoBye,KAApB;CACD;CACF;CACF;;;;;;;;;CC1ZD;;;;;;;;CAWA,mBAAiBI,YAAjB;;;;;;CAMA,IAAIC,WAAW,KAAf;CACA,IAAIC,kBAAkB,MAAtB;;;;;;CAMA,IAAI/V,SAAJ;;;;;;CAMA,SAAS2T,OAAT,GAAkB;;;;;;;;;CASlB,SAASkC,YAAT,CAAuB1Q,IAAvB,EAA6B;CAC3BmN,YAAQxX,IAAR,CAAa,IAAb,EAAmBqK,IAAnB;;CAEA,OAAK2K,KAAL,GAAa,KAAKA,KAAL,IAAc,EAA3B;;;;CAIA,MAAI,CAAC9P,SAAL,EAAgB;;CAEd,QAAI,CAACtB,cAAAA,CAAOsX,MAAZ,EAAoBtX,cAAAA,CAAOsX,MAAPtX,GAAgB,EAAhBA;CACpBsB,gBAAYtB,cAAAA,CAAOsX,MAAnB;CACD;;;CAGD,OAAKtb,KAAL,GAAasF,UAAUpJ,MAAvB;;;CAGA,MAAIqD,OAAO,IAAX;CACA+F,YAAUrE,IAAV,CAAe,UAAUsJ,GAAV,EAAe;CAC5BhL,SAAKsX,MAAL,CAAYtM,GAAZ;CACD,GAFD;;;CAKA,OAAK6K,KAAL,CAAWpS,CAAX,GAAe,KAAKhD,KAApB;;;CAGA,MAAIgE,cAAAA,CAAOzB,QAAPyB,IAAmBA,cAAAA,CAAOa,gBAA9B,EAAgD;CAC9Cb,kBAAAA,CAAOa,gBAAPb,CAAwB,cAAxBA,EAAwC,YAAY;CAClD,UAAIzE,KAAKgc,MAAT,EAAiBhc,KAAKgc,MAAL,CAAYpB,OAAZ,GAAsBlB,OAAtB;CAClB,KAFDjV,EAEG,KAFHA;CAGD;CACF;;;;;;CAMDkU,QAAQiD,YAAR,EAAsBvD,SAAtB;;;;;;CAMAuD,aAAa5X,SAAb,CAAuBgO,cAAvB,GAAwC,KAAxC;;;;;;;;CAQA4J,aAAa5X,SAAb,CAAuBgT,OAAvB,GAAiC,YAAY;CAC3C,MAAI,KAAKgF,MAAT,EAAiB;CACf,SAAKA,MAAL,CAAYC,UAAZ,CAAuBC,WAAvB,CAAmC,KAAKF,MAAxC;CACA,SAAKA,MAAL,GAAc,IAAd;CACD;;CAED,MAAI,KAAKG,IAAT,EAAe;CACb,SAAKA,IAAL,CAAUF,UAAV,CAAqBC,WAArB,CAAiC,KAAKC,IAAtC;CACA,SAAKA,IAAL,GAAY,IAAZ;CACA,SAAKC,MAAL,GAAc,IAAd;CACD;;CAED/D,YAAQrU,SAAR,CAAkBgT,OAAlB,CAA0BnW,IAA1B,CAA+B,IAA/B;CACD,CAbD;;;;;;;;CAqBA+a,aAAa5X,SAAb,CAAuBgV,MAAvB,GAAgC,YAAY;CAC1C,MAAIhZ,OAAO,IAAX;CACA,MAAIgc,SAAShZ,SAASqZ,aAAT,CAAuB,QAAvB,CAAb;;CAEA,MAAI,KAAKL,MAAT,EAAiB;CACf,SAAKA,MAAL,CAAYC,UAAZ,CAAuBC,WAAvB,CAAmC,KAAKF,MAAxC;CACA,SAAKA,MAAL,GAAc,IAAd;CACD;;CAEDA,SAAO5B,KAAP,GAAe,IAAf;CACA4B,SAAO3f,GAAP,GAAa,KAAKS,GAAL,EAAb;CACAkf,SAAOpB,OAAP,GAAiB,UAAUpe,CAAV,EAAa;CAC5BwD,SAAK4W,OAAL,CAAa,kBAAb,EAAiCpa,CAAjC;CACD,GAFD;;CAIA,MAAI8f,WAAWtZ,SAASuZ,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAf;CACA,MAAID,QAAJ,EAAc;CACZA,aAASL,UAAT,CAAoBO,YAApB,CAAiCR,MAAjC,EAAyCM,QAAzC;CACD,GAFD,MAEO;CACL,KAACtZ,SAASyZ,IAAT,IAAiBzZ,SAAS0Z,IAA3B,EAAiCC,WAAjC,CAA6CX,MAA7C;CACD;CACD,OAAKA,MAAL,GAAcA,MAAd;;CAEA,MAAIY,YAAY,gBAAgB,OAAO9Z,SAAvB,IAAoC,SAASV,IAAT,CAAcU,UAAUC,SAAxB,CAApD;;CAEA,MAAI6Z,SAAJ,EAAe;CACb1B,eAAW,YAAY;CACrB,UAAIkB,SAASpZ,SAASqZ,aAAT,CAAuB,QAAvB,CAAb;CACArZ,eAAS0Z,IAAT,CAAcC,WAAd,CAA0BP,MAA1B;CACApZ,eAAS0Z,IAAT,CAAcR,WAAd,CAA0BE,MAA1B;CACD,KAJD,EAIG,GAJH;CAKD;CACF,CAhCD;;;;;;;;;;CA0CAR,aAAa5X,SAAb,CAAuBoV,OAAvB,GAAiC,UAAU5R,IAAV,EAAgBhC,EAAhB,EAAoB;CACnD,MAAIxF,OAAO,IAAX;;CAEA,MAAI,CAAC,KAAKmc,IAAV,EAAgB;CACd,QAAIA,OAAOnZ,SAASqZ,aAAT,CAAuB,MAAvB,CAAX;CACA,QAAIQ,OAAO7Z,SAASqZ,aAAT,CAAuB,UAAvB,CAAX;CACA,QAAIrX,KAAK,KAAK8X,QAAL,GAAgB,gBAAgB,KAAKrc,KAA9C;CACA,QAAI2b,MAAJ;;CAEAD,SAAKY,SAAL,GAAiB,UAAjB;CACAZ,SAAKjZ,KAAL,CAAW8Z,QAAX,GAAsB,UAAtB;CACAb,SAAKjZ,KAAL,CAAW+Z,GAAX,GAAiB,SAAjB;CACAd,SAAKjZ,KAAL,CAAWga,IAAX,GAAkB,SAAlB;CACAf,SAAKgB,MAAL,GAAcnY,EAAd;CACAmX,SAAKlC,MAAL,GAAc,MAAd;CACAkC,SAAKiB,YAAL,CAAkB,gBAAlB,EAAoC,OAApC;CACAP,SAAKhe,IAAL,GAAY,GAAZ;CACAsd,SAAKQ,WAAL,CAAiBE,IAAjB;CACA7Z,aAAS0Z,IAAT,CAAcC,WAAd,CAA0BR,IAA1B;;CAEA,SAAKA,IAAL,GAAYA,IAAZ;CACA,SAAKU,IAAL,GAAYA,IAAZ;CACD;;CAED,OAAKV,IAAL,CAAUkB,MAAV,GAAmB,KAAKvgB,GAAL,EAAnB;;CAEA,WAASwgB,QAAT,GAAqB;CACnBC;CACA/X;CACD;;CAED,WAAS+X,UAAT,GAAuB;CACrB,QAAIvd,KAAKoc,MAAT,EAAiB;CACf,UAAI;CACFpc,aAAKmc,IAAL,CAAUD,WAAV,CAAsBlc,KAAKoc,MAA3B;CACD,OAFD,CAEE,OAAO5f,CAAP,EAAU;CACVwD,aAAK4W,OAAL,CAAa,oCAAb,EAAmDpa,CAAnD;CACD;CACF;;CAED,QAAI;;CAEF,UAAIghB,OAAO,sCAAsCxd,KAAK8c,QAA3C,GAAsD,IAAjE;CACAV,eAASpZ,SAASqZ,aAAT,CAAuBmB,IAAvB,CAAT;CACD,KAJD,CAIE,OAAOhhB,CAAP,EAAU;CACV4f,eAASpZ,SAASqZ,aAAT,CAAuB,QAAvB,CAAT;CACAD,aAAOvd,IAAP,GAAcmB,KAAK8c,QAAnB;CACAV,aAAO/f,GAAP,GAAa,cAAb;CACD;;CAED+f,WAAOpX,EAAP,GAAYhF,KAAK8c,QAAjB;;CAEA9c,SAAKmc,IAAL,CAAUQ,WAAV,CAAsBP,MAAtB;CACApc,SAAKoc,MAAL,GAAcA,MAAd;CACD;;CAEDmB;;;;CAIA/V,SAAOA,KAAK9K,OAAL,CAAaof,eAAb,EAA8B,MAA9B,CAAP;CACA,OAAKe,IAAL,CAAUpP,KAAV,GAAkBjG,KAAK9K,OAAL,CAAamf,QAAb,EAAuB,KAAvB,CAAlB;;CAEA,MAAI;CACF,SAAKM,IAAL,CAAUsB,MAAV;CACD,GAFD,CAEE,OAAOjhB,CAAP,EAAU;;CAEZ,MAAI,KAAK4f,MAAL,CAAYV,WAAhB,EAA6B;CAC3B,SAAKU,MAAL,CAAYtB,kBAAZ,GAAiC,YAAY;CAC3C,UAAI9a,KAAKoc,MAAL,CAAYpG,UAAZ,KAA2B,UAA/B,EAA2C;CACzCsH;CACD;CACF,KAJD;CAKD,GAND,MAMO;CACL,SAAKlB,MAAL,CAAY5T,MAAZ,GAAqB8U,QAArB;CACD;CACF,CA5ED;;;;;;;AC1JA,eAAe,EAAf;;;;;;;;CCAA;;;;CASA,IAAIne,UAAQK,aAAiB,4BAAjB,CAAZ;CACA,IAAIke,mBAAmBjZ,cAAAA,CAAOkZ,SAAPlZ,IAAoBA,cAAAA,CAAOmZ,YAAlD;CACA,IAAIC,aAAJ;CACA,IAAI,OAAOjb,MAAP,KAAkB,WAAtB,EAAmC;CACjC,MAAI;CACFib,oBAAgBtF,YAAhB;CACD,GAFD,CAEE,OAAO/b,CAAP,EAAU;CACb;;;;;;;;CAQD,IAAImhB,YAAYD,gBAAhB;CACA,IAAI,CAACC,SAAD,IAAc,OAAO/a,MAAP,KAAkB,WAApC,EAAiD;CAC/C+a,cAAYE,aAAZ;CACD;;;;;;CAMD,gBAAiBC,EAAjB;;;;;;;;;CASA,SAASA,EAAT,CAAa5S,IAAb,EAAmB;CACjB,MAAIwN,cAAexN,QAAQA,KAAKwN,WAAhC;CACA,MAAIA,WAAJ,EAAiB;CACf,SAAK1G,cAAL,GAAsB,KAAtB;CACD;CACD,OAAK+L,iBAAL,GAAyB7S,KAAK6S,iBAA9B;CACA,OAAKC,qBAAL,GAA6BN,oBAAoB,CAACxS,KAAKuL,SAAvD;CACA,OAAKwH,SAAL,GAAiB/S,KAAK+S,SAAtB;CACA,MAAI,CAAC,KAAKD,qBAAV,EAAiC;CAC/BL,gBAAYE,aAAZ;CACD;CACDnI,cAAU7U,IAAV,CAAe,IAAf,EAAqBqK,IAArB;CACD;;;;;;CAMDyN,QAAQmF,EAAR,EAAYpI,WAAZ;;;;;;;;CAQAoI,GAAG9Z,SAAH,CAAanF,IAAb,GAAoB,WAApB;;;;;;CAMAif,GAAG9Z,SAAH,CAAagO,cAAb,GAA8B,IAA9B;;;;;;;;CAQA8L,GAAG9Z,SAAH,CAAa+S,MAAb,GAAsB,YAAY;CAChC,MAAI,CAAC,KAAKmH,KAAL,EAAL,EAAmB;;CAEjB;CACD;;CAED,MAAIphB,MAAM,KAAKA,GAAL,EAAV;CACA,MAAImhB,YAAY,KAAKA,SAArB;CACA,MAAI/S,OAAO;CACT+K,WAAO,KAAKA,KADH;CAET8H,uBAAmB,KAAKA;CAFf,GAAX;;;CAMA7S,OAAKiL,GAAL,GAAW,KAAKA,GAAhB;CACAjL,OAAK9F,GAAL,GAAW,KAAKA,GAAhB;CACA8F,OAAKkL,UAAL,GAAkB,KAAKA,UAAvB;CACAlL,OAAKmL,IAAL,GAAY,KAAKA,IAAjB;CACAnL,OAAKoL,EAAL,GAAU,KAAKA,EAAf;CACApL,OAAKqL,OAAL,GAAe,KAAKA,OAApB;CACArL,OAAKsL,kBAAL,GAA0B,KAAKA,kBAA/B;CACA,MAAI,KAAKE,YAAT,EAAuB;CACrBxL,SAAKiT,OAAL,GAAe,KAAKzH,YAApB;CACD;CACD,MAAI,KAAKC,YAAT,EAAuB;CACrBzL,SAAKyL,YAAL,GAAoB,KAAKA,YAAzB;CACD;;CAED,MAAI;CACF,SAAKyH,EAAL,GAAU,KAAKJ,qBAAL,GAA8BC,YAAY,IAAIN,SAAJ,CAAc7gB,GAAd,EAAmBmhB,SAAnB,CAAZ,GAA4C,IAAIN,SAAJ,CAAc7gB,GAAd,CAA1E,GAAgG,IAAI6gB,SAAJ,CAAc7gB,GAAd,EAAmBmhB,SAAnB,EAA8B/S,IAA9B,CAA1G;CACD,GAFD,CAEE,OAAOvH,GAAP,EAAY;CACZ,WAAO,KAAKsC,IAAL,CAAU,OAAV,EAAmBtC,GAAnB,CAAP;CACD;;CAED,MAAI,KAAKya,EAAL,CAAQlL,UAAR,KAAuB1U,SAA3B,EAAsC;CACpC,SAAKwT,cAAL,GAAsB,KAAtB;CACD;;CAED,MAAI,KAAKoM,EAAL,CAAQC,QAAR,IAAoB,KAAKD,EAAL,CAAQC,QAAR,CAAiB1U,MAAzC,EAAiD;CAC/C,SAAKqI,cAAL,GAAsB,IAAtB;CACA,SAAKoM,EAAL,CAAQlL,UAAR,GAAqB,YAArB;CACD,GAHD,MAGO;CACL,SAAKkL,EAAL,CAAQlL,UAAR,GAAqB,aAArB;CACD;;CAED,OAAKoL,iBAAL;CACD,CA9CD;;;;;;;;CAsDAR,GAAG9Z,SAAH,CAAasa,iBAAb,GAAiC,YAAY;CAC3C,MAAIte,OAAO,IAAX;;CAEA,OAAKoe,EAAL,CAAQG,MAAR,GAAiB,YAAY;CAC3Bve,SAAKoX,MAAL;CACD,GAFD;CAGA,OAAKgH,EAAL,CAAQI,OAAR,GAAkB,YAAY;CAC5Bxe,SAAKiX,OAAL;CACD,GAFD;CAGA,OAAKmH,EAAL,CAAQK,SAAR,GAAoB,UAAUC,EAAV,EAAc;CAChC1e,SAAKsX,MAAL,CAAYoH,GAAGlX,IAAf;CACD,GAFD;CAGA,OAAK4W,EAAL,CAAQxD,OAAR,GAAkB,UAAUpe,CAAV,EAAa;CAC7BwD,SAAK4W,OAAL,CAAa,iBAAb,EAAgCpa,CAAhC;CACD,GAFD;CAGD,CAfD;;;;;;;;;CAwBAshB,GAAG9Z,SAAH,CAAamT,KAAb,GAAqB,UAAU1F,OAAV,EAAmB;CACtC,MAAIzR,OAAO,IAAX;CACA,OAAKqX,QAAL,GAAgB,KAAhB;;;;CAIA,MAAI5B,QAAQhE,QAAQ9U,MAApB;CACA,OAAK,IAAII,IAAI,CAAR,EAAW+O,IAAI2J,KAApB,EAA2B1Y,IAAI+O,CAA/B,EAAkC/O,GAAlC,EAAuC;CACrC,KAAC,UAAUsK,MAAV,EAAkB;CACjBkQ,aAAO7E,YAAP,CAAoBrL,MAApB,EAA4BrH,KAAKgS,cAAjC,EAAiD,UAAUxK,IAAV,EAAgB;CAC/D,YAAI,CAACxH,KAAKge,qBAAV,EAAiC;;CAE/B,cAAI9S,OAAO,EAAX;CACA,cAAI7D,OAAO5J,OAAX,EAAoB;CAClByN,iBAAKyT,QAAL,GAAgBtX,OAAO5J,OAAP,CAAekhB,QAA/B;CACD;;CAED,cAAI3e,KAAK+d,iBAAT,EAA4B;CAC1B,gBAAIjc,MAAM,aAAa,OAAO0F,IAApB,GAA2B/C,cAAAA,CAAOiC,MAAPjC,CAAc2H,UAAd3H,CAAyB+C,IAAzB/C,CAA3B,GAA4D+C,KAAK7K,MAA3E;CACA,gBAAImF,MAAM9B,KAAK+d,iBAAL,CAAuBa,SAAjC,EAA4C;CAC1C1T,mBAAKyT,QAAL,GAAgB,KAAhB;CACD;CACF;CACF;;;;;CAKD,YAAI;CACF,cAAI3e,KAAKge,qBAAT,EAAgC;;CAE9Bhe,iBAAKoe,EAAL,CAAQlH,IAAR,CAAa1P,IAAb;CACD,WAHD,MAGO;CACLxH,iBAAKoe,EAAL,CAAQlH,IAAR,CAAa1P,IAAb,EAAmB0D,IAAnB;CACD;CACF,SAPD,CAOE,OAAO1O,CAAP,EAAU;CACV2C,kBAAM,uCAAN;CACD;;CAED,UAAEsW,KAAF,IAAWvB,MAAX;CACD,OA/BD;CAgCD,KAjCD,EAiCGzC,QAAQ1U,CAAR,CAjCH;CAkCD;;CAED,WAASmX,IAAT,GAAiB;CACflU,SAAKiG,IAAL,CAAU,OAAV;;;;CAIAiV,eAAW,YAAY;CACrBlb,WAAKqX,QAAL,GAAgB,IAAhB;CACArX,WAAKiG,IAAL,CAAU,OAAV;CACD,KAHD,EAGG,CAHH;CAID;CACF,CAtDD;;;;;;;;CA8DA6X,GAAG9Z,SAAH,CAAaiT,OAAb,GAAuB,YAAY;CACjCvB,cAAU1R,SAAV,CAAoBiT,OAApB,CAA4BpW,IAA5B,CAAiC,IAAjC;CACD,CAFD;;;;;;;;CAUAid,GAAG9Z,SAAH,CAAagT,OAAb,GAAuB,YAAY;CACjC,MAAI,OAAO,KAAKoH,EAAZ,KAAmB,WAAvB,EAAoC;CAClC,SAAKA,EAAL,CAAQzM,KAAR;CACD;CACF,CAJD;;;;;;;;CAYAmM,GAAG9Z,SAAH,CAAalH,GAAb,GAAmB,YAAY;CAC7B,MAAI+Y,QAAQ,KAAKA,KAAL,IAAc,EAA1B;CACA,MAAIwD,SAAS,KAAKzD,MAAL,GAAc,KAAd,GAAsB,IAAnC;CACA,MAAI/Q,OAAO,EAAX;;;CAGA,MAAI,KAAKA,IAAL,KAAe,UAAUwU,MAAV,IAAoB/O,OAAO,KAAKzF,IAAZ,MAAsB,GAA3C,IACf,SAASwU,MAAT,IAAmB/O,OAAO,KAAKzF,IAAZ,MAAsB,EADxC,CAAJ,EACkD;CAChDA,WAAO,MAAM,KAAKA,IAAlB;CACD;;;CAGD,MAAI,KAAKkR,iBAAT,EAA4B;CAC1BF,UAAM,KAAKC,cAAX,IAA6BqC,SAA7B;CACD;;;CAGD,MAAI,CAAC,KAAKnG,cAAV,EAA0B;CACxB6D,UAAMjD,GAAN,GAAY,CAAZ;CACD;;CAEDiD,UAAQ0D,UAAQvQ,MAAR,CAAe6M,KAAf,CAAR;;;CAGA,MAAIA,MAAMlZ,MAAV,EAAkB;CAChBkZ,YAAQ,MAAMA,KAAd;CACD;;CAED,MAAI9Q,OAAO,KAAK4Q,QAAL,CAAcpZ,OAAd,CAAsB,GAAtB,MAA+B,CAAC,CAA3C;CACA,SAAO8c,SAAS,KAAT,IAAkBtU,OAAO,MAAM,KAAK4Q,QAAX,GAAsB,GAA7B,GAAmC,KAAKA,QAA1D,IAAsE9Q,IAAtE,GAA6E,KAAKC,IAAlF,GAAyF+Q,KAAhG;CACD,CA9BD;;;;;;;;;CAuCAiI,GAAG9Z,SAAH,CAAaka,KAAb,GAAqB,YAAY;CAC/B,SAAO,CAAC,CAACP,SAAF,IAAe,EAAE,kBAAkBA,SAAlB,IAA+B,KAAK9e,IAAL,KAAcif,GAAG9Z,SAAH,CAAanF,IAA5D,CAAtB;CACD,CAFD;;;;;;;;;;;;;CC3RA;;;;;;;;CAaA,gBAAkBka,SAAlB;CACA,kBAAoB8F,WAApB;;;;;;;;;CASA,SAAS9F,SAAT,CAAkB7N,IAAlB,EAAwB;CACtB,MAAIsN,GAAJ;CACA,MAAIqB,KAAK,KAAT;CACA,MAAIC,KAAK,KAAT;CACA,MAAIgF,QAAQ,UAAU5T,KAAK4T,KAA3B;;CAEA,MAAIra,cAAAA,CAAOC,QAAX,EAAqB;CACnB,QAAIkV,QAAQ,aAAalV,SAASC,QAAlC;CACA,QAAIE,OAAOH,SAASG,IAApB;;;CAGA,QAAI,CAACA,IAAL,EAAW;CACTA,aAAO+U,QAAQ,GAAR,GAAc,EAArB;CACD;;CAEDC,SAAK3O,KAAKyK,QAAL,KAAkBjR,SAASiR,QAA3B,IAAuC9Q,SAASqG,KAAKrG,IAA1D;CACAiV,SAAK5O,KAAK0K,MAAL,KAAgBgE,KAArB;CACD;;CAED1O,OAAKC,OAAL,GAAe0O,EAAf;CACA3O,OAAKE,OAAL,GAAe0O,EAAf;CACAtB,QAAM,IAAIvN,UAAJ,CAAmBC,IAAnB,CAAN;;CAEA,MAAI,UAAUsN,GAAV,IAAiB,CAACtN,KAAK6T,UAA3B,EAAuC;CACrC,WAAO,IAAIvF,KAAJ,CAAQtO,IAAR,CAAP;CACD,GAFD,MAEO;CACL,QAAI,CAAC4T,KAAL,EAAY,MAAM,IAAI9gB,KAAJ,CAAU,gBAAV,CAAN;CACZ,WAAO,IAAIghB,KAAJ,CAAU9T,IAAV,CAAP;CACD;CACF;;;;;;;;;;;;;;CCnDD,IAAI3O,UAAU,GAAGA,OAAjB;;CAEA,cAAiB,gBAAA,CAASgK,GAAT,EAAc/B,GAAd,EAAkB;CACjC,MAAIjI,OAAJ,EAAa,OAAOgK,IAAIhK,OAAJ,CAAYiI,GAAZ,CAAP;CACb,OAAK,IAAIzH,IAAI,CAAb,EAAgBA,IAAIwJ,IAAI5J,MAAxB,EAAgC,EAAEI,CAAlC,EAAqC;CACnC,QAAIwJ,IAAIxJ,CAAJ,MAAWyH,GAAf,EAAoB,OAAOzH,CAAP;CACrB;CACD,SAAO,CAAC,CAAR;CACD,CAND;;;;;;;;;;;CCHA;;;;CAMA,IAAIoC,UAAQK,aAAiB,yBAAjB,CAAZ;;;;;;CAUA,aAAiByf,MAAjB;;;;;;;;;;CAUA,SAASA,MAAT,CAAiBniB,GAAjB,EAAsBoO,IAAtB,EAA4B;CAC1B,MAAI,EAAE,gBAAgB+T,MAAlB,CAAJ,EAA+B,OAAO,IAAIA,MAAJ,CAAWniB,GAAX,EAAgBoO,IAAhB,CAAP;;CAE/BA,SAAOA,QAAQ,EAAf;;CAEA,MAAIpO,OAAO,qBAAoBA,GAApB,yCAAoBA,GAApB,EAAX,EAAoC;CAClCoO,WAAOpO,GAAP;CACAA,UAAM,IAAN;CACD;;CAED,MAAIA,GAAJ,EAAS;CACPA,UAAMX,WAASW,GAAT,CAAN;CACAoO,SAAKyK,QAAL,GAAgB7Y,IAAIG,IAApB;CACAiO,SAAK0K,MAAL,GAAc9Y,IAAI6H,QAAJ,KAAiB,OAAjB,IAA4B7H,IAAI6H,QAAJ,KAAiB,KAA3D;CACAuG,SAAKrG,IAAL,GAAY/H,IAAI+H,IAAhB;CACA,QAAI/H,IAAI+Y,KAAR,EAAe3K,KAAK2K,KAAL,GAAa/Y,IAAI+Y,KAAjB;CAChB,GAND,MAMO,IAAI3K,KAAKjO,IAAT,EAAe;CACpBiO,SAAKyK,QAAL,GAAgBxZ,WAAS+O,KAAKjO,IAAd,EAAoBA,IAApC;CACD;;CAED,OAAK2Y,MAAL,GAAc,QAAQ1K,KAAK0K,MAAb,GAAsB1K,KAAK0K,MAA3B,GACTnR,cAAAA,CAAOC,QAAPD,IAAmB,aAAaC,SAASC,QAD9C;;CAGA,MAAIuG,KAAKyK,QAAL,IAAiB,CAACzK,KAAKrG,IAA3B,EAAiC;;CAE/BqG,SAAKrG,IAAL,GAAY,KAAK+Q,MAAL,GAAc,KAAd,GAAsB,IAAlC;CACD;;CAED,OAAKK,KAAL,GAAa/K,KAAK+K,KAAL,IAAc,KAA3B;CACA,OAAKN,QAAL,GAAgBzK,KAAKyK,QAAL,KACblR,cAAAA,CAAOC,QAAPD,GAAkBC,SAASiR,QAA3BlR,GAAsC,WADzB,CAAhB;CAEA,OAAKI,IAAL,GAAYqG,KAAKrG,IAAL,KAAcJ,cAAAA,CAAOC,QAAPD,IAAmBC,SAASG,IAA5BJ,GACpBC,SAASG,IADWJ,GAEnB,KAAKmR,MAAL,GAAc,GAAd,GAAoB,EAFf,CAAZ;CAGA,OAAKC,KAAL,GAAa3K,KAAK2K,KAAL,IAAc,EAA3B;CACA,MAAI,aAAa,OAAO,KAAKA,KAA7B,EAAoC,KAAKA,KAAL,GAAa0D,UAAQ/F,MAAR,CAAe,KAAKqC,KAApB,CAAb;CACpC,OAAK/D,OAAL,GAAe,UAAU5G,KAAK4G,OAA9B;CACA,OAAKhN,IAAL,GAAY,CAACoG,KAAKpG,IAAL,IAAa,YAAd,EAA4BpI,OAA5B,CAAoC,KAApC,EAA2C,EAA3C,IAAiD,GAA7D;CACA,OAAKqiB,UAAL,GAAkB,CAAC,CAAC7T,KAAK6T,UAAzB;CACA,OAAKD,KAAL,GAAa,UAAU5T,KAAK4T,KAA5B;CACA,OAAKpG,WAAL,GAAmB,CAAC,CAACxN,KAAKwN,WAA1B;CACA,OAAKrN,UAAL,GAAkB,CAAC,CAACH,KAAKG,UAAzB;CACA,OAAKyK,cAAL,GAAsB5K,KAAK4K,cAAL,IAAuB,GAA7C;CACA,OAAKC,iBAAL,GAAyB7K,KAAK6K,iBAA9B;CACA,OAAKmJ,UAAL,GAAkBhU,KAAKgU,UAAL,IAAmB,CAAC,SAAD,EAAY,WAAZ,CAArC;CACA,OAAKC,gBAAL,GAAwBjU,KAAKiU,gBAAL,IAAyB,EAAjD;CACA,OAAKnJ,UAAL,GAAkB,EAAlB;CACA,OAAKoJ,WAAL,GAAmB,EAAnB;CACA,OAAKC,aAAL,GAAqB,CAArB;CACA,OAAKC,UAAL,GAAkBpU,KAAKoU,UAAL,IAAmB,GAArC;CACA,OAAKC,eAAL,GAAuBrU,KAAKqU,eAAL,IAAwB,KAA/C;CACA,OAAKrM,UAAL,GAAkB,IAAlB;CACA,OAAKsM,kBAAL,GAA0BtU,KAAKsU,kBAA/B;CACA,OAAKzB,iBAAL,GAAyB,UAAU7S,KAAK6S,iBAAf,GAAoC7S,KAAK6S,iBAAL,IAA0B,EAA9D,GAAoE,KAA7F;;CAEA,MAAI,SAAS,KAAKA,iBAAlB,EAAqC,KAAKA,iBAAL,GAAyB,EAAzB;CACrC,MAAI,KAAKA,iBAAL,IAA0B,QAAQ,KAAKA,iBAAL,CAAuBa,SAA7D,EAAwE;CACtE,SAAKb,iBAAL,CAAuBa,SAAvB,GAAmC,IAAnC;CACD;;;CAGD,OAAKzI,GAAL,GAAWjL,KAAKiL,GAAL,IAAY,IAAvB;CACA,OAAK/Q,GAAL,GAAW8F,KAAK9F,GAAL,IAAY,IAAvB;CACA,OAAKgR,UAAL,GAAkBlL,KAAKkL,UAAL,IAAmB,IAArC;CACA,OAAKC,IAAL,GAAYnL,KAAKmL,IAAL,IAAa,IAAzB;CACA,OAAKC,EAAL,GAAUpL,KAAKoL,EAAL,IAAW,IAArB;CACA,OAAKC,OAAL,GAAerL,KAAKqL,OAAL,IAAgB,IAA/B;CACA,OAAKC,kBAAL,GAA0BtL,KAAKsL,kBAAL,KAA4BhY,SAA5B,GAAwC,IAAxC,GAA+C0M,KAAKsL,kBAA9E;CACA,OAAKC,SAAL,GAAiB,CAAC,CAACvL,KAAKuL,SAAxB;;;CAGA,MAAIxJ,aAAaC,QAAOzI,cAAP,MAAkB,QAAlB,IAA8BA,cAA/C;CACA,MAAIwI,WAAWxI,MAAX,KAAsBwI,UAA1B,EAAsC;CACpC,QAAI/B,KAAKwL,YAAL,IAAqB1P,OAAO0E,IAAP,CAAYR,KAAKwL,YAAjB,EAA+B/Z,MAA/B,GAAwC,CAAjE,EAAoE;CAClE,WAAK+Z,YAAL,GAAoBxL,KAAKwL,YAAzB;CACD;;CAED,QAAIxL,KAAKyL,YAAT,EAAuB;CACrB,WAAKA,YAAL,GAAoBzL,KAAKyL,YAAzB;CACD;CACF;;;CAGD,OAAK3R,EAAL,GAAU,IAAV;CACA,OAAKya,QAAL,GAAgB,IAAhB;CACA,OAAKC,YAAL,GAAoB,IAApB;CACA,OAAKC,WAAL,GAAmB,IAAnB;;;CAGA,OAAKC,iBAAL,GAAyB,IAAzB;CACA,OAAKC,gBAAL,GAAwB,IAAxB;;CAEA,OAAKnO,IAAL;CACD;;CAEDuN,OAAOa,qBAAP,GAA+B,KAA/B;;;;;;CAMA5a,QAAQ+Z,OAAOjb,SAAf;;;;;;;;CAQAib,OAAOta,QAAP,GAAkB4S,OAAO5S,QAAzB;;;;;;;CAOAsa,OAAOA,MAAP,GAAgBA,MAAhB;CACAA,OAAOvJ,SAAP,GAAmB6C,WAAnB;CACA0G,OAAOC,UAAP,GAAoBA,YAApB;CACAD,OAAO1H,MAAP,GAAgBA,MAAhB;;;;;;;;;;CAUA0H,OAAOjb,SAAP,CAAiB+b,eAAjB,GAAmC,UAAUlhB,IAAV,EAAgB;CACjDM,UAAM,yBAAN,EAAiCN,IAAjC;CACA,MAAIgX,QAAQmK,MAAM,KAAKnK,KAAX,CAAZ;;;CAGAA,QAAMoK,GAAN,GAAY1I,OAAO5S,QAAnB;;;CAGAkR,QAAMqK,SAAN,GAAkBrhB,IAAlB;;;CAGA,MAAIpB,UAAU,KAAK0hB,gBAAL,CAAsBtgB,IAAtB,KAA+B,EAA7C;;;CAGA,MAAI,KAAKmG,EAAT,EAAa6Q,MAAMyD,GAAN,GAAY,KAAKtU,EAAjB;;CAEb,MAAIkb,YAAY,IAAIhB,aAAWrgB,IAAX,CAAJ,CAAqB;CACnCgX,WAAOA,KAD4B;CAEnCK,YAAQ,IAF2B;CAGnCD,WAAOxY,QAAQwY,KAAR,IAAiB,KAAKA,KAHM;CAInCN,cAAUlY,QAAQkY,QAAR,IAAoB,KAAKA,QAJA;CAKnC9Q,UAAMpH,QAAQoH,IAAR,IAAgB,KAAKA,IALQ;CAMnC+Q,YAAQnY,QAAQmY,MAAR,IAAkB,KAAKA,MANI;CAOnC9Q,UAAMrH,QAAQqH,IAAR,IAAgB,KAAKA,IAPQ;CAQnCia,gBAAYthB,QAAQshB,UAAR,IAAsB,KAAKA,UARJ;CASnCD,WAAOrhB,QAAQqhB,KAAR,IAAiB,KAAKA,KATM;CAUnCpG,iBAAajb,QAAQib,WAAR,IAAuB,KAAKA,WAVN;CAWnCrN,gBAAY5N,QAAQ4N,UAAR,IAAsB,KAAKA,UAXJ;CAYnC0K,uBAAmBtY,QAAQsY,iBAAR,IAA6B,KAAKA,iBAZlB;CAanCD,oBAAgBrY,QAAQqY,cAAR,IAA0B,KAAKA,cAbZ;CAcnCwJ,gBAAY7hB,QAAQ6hB,UAAR,IAAsB,KAAKA,UAdJ;CAenCnJ,SAAK1Y,QAAQ0Y,GAAR,IAAe,KAAKA,GAfU;CAgBnC/Q,SAAK3H,QAAQ2H,GAAR,IAAe,KAAKA,GAhBU;CAiBnCgR,gBAAY3Y,QAAQ2Y,UAAR,IAAsB,KAAKA,UAjBJ;CAkBnCC,UAAM5Y,QAAQ4Y,IAAR,IAAgB,KAAKA,IAlBQ;CAmBnCC,QAAI7Y,QAAQ6Y,EAAR,IAAc,KAAKA,EAnBY;CAoBnCC,aAAS9Y,QAAQ8Y,OAAR,IAAmB,KAAKA,OApBE;CAqBnCC,wBAAoB/Y,QAAQ+Y,kBAAR,IAA8B,KAAKA,kBArBpB;CAsBnCuH,uBAAmBtgB,QAAQsgB,iBAAR,IAA6B,KAAKA,iBAtBlB;CAuBnCrH,kBAAcjZ,QAAQiZ,YAAR,IAAwB,KAAKA,YAvBR;CAwBnCD,eAAWhZ,QAAQgZ,SAAR,IAAqB,KAAKA,SAxBF;CAyBnCE,kBAAclZ,QAAQkZ,YAAR,IAAwB,KAAKA,YAzBR;CA0BnCgD,oBAAgBlc,QAAQkc,cAAR,IAA0B,KAAKA,cA1BZ;CA2BnCsE,eAAWxgB,QAAQwgB,SAAR,IAAqB,KAAM;CA3BH,GAArB,CAAhB;;CA8BA,SAAOiC,SAAP;CACD,CA/CD;;CAiDA,SAASF,KAAT,CAAgBxb,GAAhB,EAAqB;CACnB,MAAI2b,IAAI,EAAR;CACA,OAAK,IAAIpjB,CAAT,IAAcyH,GAAd,EAAmB;CACjB,QAAIA,IAAIoH,cAAJ,CAAmB7O,CAAnB,CAAJ,EAA2B;CACzBojB,QAAEpjB,CAAF,IAAOyH,IAAIzH,CAAJ,CAAP;CACD;CACF;CACD,SAAOojB,CAAP;CACD;;;;;;;CAODlB,OAAOjb,SAAP,CAAiB0N,IAAjB,GAAwB,YAAY;CAClC,MAAIwO,SAAJ;CACA,MAAI,KAAKX,eAAL,IAAwBN,OAAOa,qBAA/B,IAAwD,KAAKZ,UAAL,CAAgB3iB,OAAhB,CAAwB,WAAxB,MAAyC,CAAC,CAAtG,EAAyG;CACvG2jB,gBAAY,WAAZ;CACD,GAFD,MAEO,IAAI,MAAM,KAAKhB,UAAL,CAAgBviB,MAA1B,EAAkC;;CAEvC,QAAIqD,OAAO,IAAX;CACAkb,eAAW,YAAY;CACrBlb,WAAKiG,IAAL,CAAU,OAAV,EAAmB,yBAAnB;CACD,KAFD,EAEG,CAFH;CAGA;CACD,GAPM,MAOA;CACLia,gBAAY,KAAKhB,UAAL,CAAgB,CAAhB,CAAZ;CACD;CACD,OAAKlJ,UAAL,GAAkB,SAAlB;;;CAGA,MAAI;CACFkK,gBAAY,KAAKH,eAAL,CAAqBG,SAArB,CAAZ;CACD,GAFD,CAEE,OAAO1jB,CAAP,EAAU;CACV,SAAK0iB,UAAL,CAAgBhR,KAAhB;CACA,SAAKwD,IAAL;CACA;CACD;;CAEDwO,YAAUxO,IAAV;CACA,OAAK0O,YAAL,CAAkBF,SAAlB;CACD,CA3BD;;;;;;;;CAmCAjB,OAAOjb,SAAP,CAAiBoc,YAAjB,GAAgC,UAAUF,SAAV,EAAqB;CACnD/gB,UAAM,sBAAN,EAA8B+gB,UAAUrhB,IAAxC;CACA,MAAImB,OAAO,IAAX;;CAEA,MAAI,KAAKkgB,SAAT,EAAoB;CAClB/gB,YAAM,gCAAN,EAAwC,KAAK+gB,SAAL,CAAerhB,IAAvD;CACA,SAAKqhB,SAAL,CAAera,kBAAf;CACD;;;CAGD,OAAKqa,SAAL,GAAiBA,SAAjB;;;CAGAA,YACC7a,EADD,CACI,OADJ,EACa,YAAY;CACvBrF,SAAKqgB,OAAL;CACD,GAHD,EAIChb,EAJD,CAII,QAJJ,EAIc,UAAUgC,MAAV,EAAkB;CAC9BrH,SAAKwX,QAAL,CAAcnQ,MAAd;CACD,GAND,EAOChC,EAPD,CAOI,OAPJ,EAOa,UAAU7I,CAAV,EAAa;CACxBwD,SAAK4W,OAAL,CAAapa,CAAb;CACD,GATD,EAUC6I,EAVD,CAUI,OAVJ,EAUa,YAAY;CACvBrF,SAAKiX,OAAL,CAAa,iBAAb;CACD,GAZD;CAaD,CA1BD;;;;;;;;;CAmCAgI,OAAOjb,SAAP,CAAiBsc,KAAjB,GAAyB,UAAUzhB,IAAV,EAAgB;CACvCM,UAAM,wBAAN,EAAgCN,IAAhC;CACA,MAAIqhB,YAAY,KAAKH,eAAL,CAAqBlhB,IAArB,EAA2B,EAAEyhB,OAAO,CAAT,EAA3B,CAAhB;CACA,MAAIC,SAAS,KAAb;CACA,MAAIvgB,OAAO,IAAX;;CAEAif,SAAOa,qBAAP,GAA+B,KAA/B;;CAEA,WAASU,eAAT,GAA4B;CAC1B,QAAIxgB,KAAKwf,kBAAT,EAA6B;CAC3B,UAAIiB,qBAAqB,CAAC,KAAKzO,cAAN,IAAwBhS,KAAKkgB,SAAL,CAAelO,cAAhE;CACAuO,eAASA,UAAUE,kBAAnB;CACD;CACD,QAAIF,MAAJ,EAAY;;CAEZphB,YAAM,6BAAN,EAAqCN,IAArC;CACAqhB,cAAUhJ,IAAV,CAAe,CAAC,EAAExZ,MAAM,MAAR,EAAgB8J,MAAM,OAAtB,EAAD,CAAf;CACA0Y,cAAUxa,IAAV,CAAe,QAAf,EAAyB,UAAUsF,GAAV,EAAe;CACtC,UAAIuV,MAAJ,EAAY;CACZ,UAAI,WAAWvV,IAAItN,IAAf,IAAuB,YAAYsN,IAAIxD,IAA3C,EAAiD;CAC/CrI,gBAAM,2BAAN,EAAmCN,IAAnC;CACAmB,aAAK0gB,SAAL,GAAiB,IAAjB;CACA1gB,aAAKiG,IAAL,CAAU,WAAV,EAAuBia,SAAvB;CACA,YAAI,CAACA,SAAL,EAAgB;CAChBjB,eAAOa,qBAAP,GAA+B,gBAAgBI,UAAUrhB,IAAzD;;CAEAM,gBAAM,gCAAN,EAAwCa,KAAKkgB,SAAL,CAAerhB,IAAvD;CACAmB,aAAKkgB,SAAL,CAAerH,KAAf,CAAqB,YAAY;CAC/B,cAAI0H,MAAJ,EAAY;CACZ,cAAI,aAAavgB,KAAKgW,UAAtB,EAAkC;CAClC7W,kBAAM,+CAAN;;CAEAmc;;CAEAtb,eAAKogB,YAAL,CAAkBF,SAAlB;CACAA,oBAAUhJ,IAAV,CAAe,CAAC,EAAExZ,MAAM,SAAR,EAAD,CAAf;CACAsC,eAAKiG,IAAL,CAAU,SAAV,EAAqBia,SAArB;CACAA,sBAAY,IAAZ;CACAlgB,eAAK0gB,SAAL,GAAiB,KAAjB;CACA1gB,eAAK2gB,KAAL;CACD,SAbD;CAcD,OAtBD,MAsBO;CACLxhB,gBAAM,6BAAN,EAAqCN,IAArC;CACA,YAAI8E,MAAM,IAAI3F,KAAJ,CAAU,aAAV,CAAV;CACA2F,YAAIuc,SAAJ,GAAgBA,UAAUrhB,IAA1B;CACAmB,aAAKiG,IAAL,CAAU,cAAV,EAA0BtC,GAA1B;CACD;CACF,KA9BD;CA+BD;;CAED,WAASid,eAAT,GAA4B;CAC1B,QAAIL,MAAJ,EAAY;;;CAGZA,aAAS,IAAT;;CAEAjF;;CAEA4E,cAAUvO,KAAV;CACAuO,gBAAY,IAAZ;CACD;;;CAGD,WAAStF,OAAT,CAAkBjX,GAAlB,EAAuB;CACrB,QAAI6G,QAAQ,IAAIxM,KAAJ,CAAU,kBAAkB2F,GAA5B,CAAZ;CACA6G,UAAM0V,SAAN,GAAkBA,UAAUrhB,IAA5B;;CAEA+hB;;CAEAzhB,YAAM,kDAAN,EAA0DN,IAA1D,EAAgE8E,GAAhE;;CAEA3D,SAAKiG,IAAL,CAAU,cAAV,EAA0BuE,KAA1B;CACD;;CAED,WAASqW,gBAAT,GAA6B;CAC3BjG,YAAQ,kBAAR;CACD;;;CAGD,WAAS4D,OAAT,GAAoB;CAClB5D,YAAQ,eAAR;CACD;;;CAGD,WAASkG,SAAT,CAAoBC,EAApB,EAAwB;CACtB,QAAIb,aAAaa,GAAGliB,IAAH,KAAYqhB,UAAUrhB,IAAvC,EAA6C;CAC3CM,cAAM,4BAAN,EAAoC4hB,GAAGliB,IAAvC,EAA6CqhB,UAAUrhB,IAAvD;CACA+hB;CACD;CACF;;;CAGD,WAAStF,OAAT,GAAoB;CAClB4E,cAAUta,cAAV,CAAyB,MAAzB,EAAiC4a,eAAjC;CACAN,cAAUta,cAAV,CAAyB,OAAzB,EAAkCgV,OAAlC;CACAsF,cAAUta,cAAV,CAAyB,OAAzB,EAAkCib,gBAAlC;CACA7gB,SAAK4F,cAAL,CAAoB,OAApB,EAA6B4Y,OAA7B;CACAxe,SAAK4F,cAAL,CAAoB,WAApB,EAAiCkb,SAAjC;CACD;;CAEDZ,YAAUxa,IAAV,CAAe,MAAf,EAAuB8a,eAAvB;CACAN,YAAUxa,IAAV,CAAe,OAAf,EAAwBkV,OAAxB;CACAsF,YAAUxa,IAAV,CAAe,OAAf,EAAwBmb,gBAAxB;;CAEA,OAAKnb,IAAL,CAAU,OAAV,EAAmB8Y,OAAnB;CACA,OAAK9Y,IAAL,CAAU,WAAV,EAAuBob,SAAvB;;CAEAZ,YAAUxO,IAAV;CACD,CA5GD;;;;;;;;CAoHAuN,OAAOjb,SAAP,CAAiBoT,MAAjB,GAA0B,YAAY;CACpCjY,UAAM,aAAN;CACA,OAAK6W,UAAL,GAAkB,MAAlB;CACAiJ,SAAOa,qBAAP,GAA+B,gBAAgB,KAAKI,SAAL,CAAerhB,IAA9D;CACA,OAAKoH,IAAL,CAAU,MAAV;CACA,OAAK0a,KAAL;;;;CAIA,MAAI,WAAW,KAAK3K,UAAhB,IAA8B,KAAKlE,OAAnC,IAA8C,KAAKoO,SAAL,CAAerH,KAAjE,EAAwE;CACtE1Z,YAAM,yBAAN;CACA,SAAK,IAAIpC,IAAI,CAAR,EAAW+O,IAAI,KAAK2T,QAAL,CAAc9iB,MAAlC,EAA0CI,IAAI+O,CAA9C,EAAiD/O,GAAjD,EAAsD;CACpD,WAAKujB,KAAL,CAAW,KAAKb,QAAL,CAAc1iB,CAAd,CAAX;CACD;CACF;CACF,CAfD;;;;;;;;CAuBAkiB,OAAOjb,SAAP,CAAiBwT,QAAjB,GAA4B,UAAUnQ,MAAV,EAAkB;CAC5C,MAAI,cAAc,KAAK2O,UAAnB,IAAiC,WAAW,KAAKA,UAAjD,IACA,cAAc,KAAKA,UADvB,EACmC;CACjC7W,YAAM,sCAAN,EAA8CkI,OAAO3J,IAArD,EAA2D2J,OAAOG,IAAlE;;CAEA,SAAKvB,IAAL,CAAU,QAAV,EAAoBoB,MAApB;;;CAGA,SAAKpB,IAAL,CAAU,WAAV;;CAEA,YAAQoB,OAAO3J,IAAf;CACE,WAAK,MAAL;CACE,aAAKsjB,WAAL,CAAiB/iB,KAAKN,KAAL,CAAW0J,OAAOG,IAAlB,CAAjB;CACA;;CAEF,WAAK,MAAL;CACE,aAAKyZ,OAAL;CACA,aAAKhb,IAAL,CAAU,MAAV;CACA;;CAEF,WAAK,OAAL;CACE,YAAItC,MAAM,IAAI3F,KAAJ,CAAU,cAAV,CAAV;CACA2F,YAAIud,IAAJ,GAAW7Z,OAAOG,IAAlB;CACA,aAAKoP,OAAL,CAAajT,GAAb;CACA;;CAEF,WAAK,SAAL;CACE,aAAKsC,IAAL,CAAU,MAAV,EAAkBoB,OAAOG,IAAzB;CACA,aAAKvB,IAAL,CAAU,SAAV,EAAqBoB,OAAOG,IAA5B;CACA;CAnBJ;CAqBD,GA9BD,MA8BO;CACLrI,YAAM,6CAAN,EAAqD,KAAK6W,UAA1D;CACD;CACF,CAlCD;;;;;;;;;CA2CAiJ,OAAOjb,SAAP,CAAiBgd,WAAjB,GAA+B,UAAUxZ,IAAV,EAAgB;CAC7C,OAAKvB,IAAL,CAAU,WAAV,EAAuBuB,IAAvB;CACA,OAAKxC,EAAL,GAAUwC,KAAK8R,GAAf;CACA,OAAK4G,SAAL,CAAerK,KAAf,CAAqByD,GAArB,GAA2B9R,KAAK8R,GAAhC;CACA,OAAKmG,QAAL,GAAgB,KAAK0B,cAAL,CAAoB3Z,KAAKiY,QAAzB,CAAhB;CACA,OAAKC,YAAL,GAAoBlY,KAAKkY,YAAzB;CACA,OAAKC,WAAL,GAAmBnY,KAAKmY,WAAxB;CACA,OAAKvI,MAAL;;CAEA,MAAI,aAAa,KAAKpB,UAAtB,EAAkC;CAClC,OAAKiL,OAAL;;;CAGA,OAAKrb,cAAL,CAAoB,WAApB,EAAiC,KAAKwb,WAAtC;CACA,OAAK/b,EAAL,CAAQ,WAAR,EAAqB,KAAK+b,WAA1B;CACD,CAfD;;;;;;;;CAuBAnC,OAAOjb,SAAP,CAAiBod,WAAjB,GAA+B,UAAU3G,OAAV,EAAmB;CAChD4G,eAAa,KAAKxB,gBAAlB;CACA,MAAI7f,OAAO,IAAX;CACAA,OAAK6f,gBAAL,GAAwB3E,WAAW,YAAY;CAC7C,QAAI,aAAalb,KAAKgW,UAAtB,EAAkC;CAClChW,SAAKiX,OAAL,CAAa,cAAb;CACD,GAHuB,EAGrBwD,WAAYza,KAAK0f,YAAL,GAAoB1f,KAAK2f,WAHhB,CAAxB;CAID,CAPD;;;;;;;;;CAgBAV,OAAOjb,SAAP,CAAiBid,OAAjB,GAA2B,YAAY;CACrC,MAAIjhB,OAAO,IAAX;CACAqhB,eAAarhB,KAAK4f,iBAAlB;CACA5f,OAAK4f,iBAAL,GAAyB1E,WAAW,YAAY;CAC9C/b,YAAM,kDAAN,EAA0Da,KAAK2f,WAA/D;CACA3f,SAAK4R,IAAL;CACA5R,SAAKohB,WAAL,CAAiBphB,KAAK2f,WAAtB;CACD,GAJwB,EAItB3f,KAAK0f,YAJiB,CAAzB;CAKD,CARD;;;;;;;;CAgBAT,OAAOjb,SAAP,CAAiB4N,IAAjB,GAAwB,YAAY;CAClC,MAAI5R,OAAO,IAAX;CACA,OAAKshB,UAAL,CAAgB,MAAhB,EAAwB,YAAY;CAClCthB,SAAKiG,IAAL,CAAU,MAAV;CACD,GAFD;CAGD,CALD;;;;;;;;CAaAgZ,OAAOjb,SAAP,CAAiBqc,OAAjB,GAA2B,YAAY;CACrC,OAAKjB,WAAL,CAAiBte,MAAjB,CAAwB,CAAxB,EAA2B,KAAKue,aAAhC;;;;;CAKA,OAAKA,aAAL,GAAqB,CAArB;;CAEA,MAAI,MAAM,KAAKD,WAAL,CAAiBziB,MAA3B,EAAmC;CACjC,SAAKsJ,IAAL,CAAU,OAAV;CACD,GAFD,MAEO;CACL,SAAK0a,KAAL;CACD;CACF,CAbD;;;;;;;;CAqBA1B,OAAOjb,SAAP,CAAiB2c,KAAjB,GAAyB,YAAY;CACnC,MAAI,aAAa,KAAK3K,UAAlB,IAAgC,KAAKkK,SAAL,CAAe7I,QAA/C,IACF,CAAC,KAAKqJ,SADJ,IACiB,KAAKtB,WAAL,CAAiBziB,MADtC,EAC8C;CAC5CwC,YAAM,+BAAN,EAAuC,KAAKigB,WAAL,CAAiBziB,MAAxD;CACA,SAAKujB,SAAL,CAAehJ,IAAf,CAAoB,KAAKkI,WAAzB;;;CAGA,SAAKC,aAAL,GAAqB,KAAKD,WAAL,CAAiBziB,MAAtC;CACA,SAAKsJ,IAAL,CAAU,OAAV;CACD;CACF,CAVD;;;;;;;;;;;;CAsBAgZ,OAAOjb,SAAP,CAAiBmT,KAAjB,GACA8H,OAAOjb,SAAP,CAAiBkT,IAAjB,GAAwB,UAAUlM,GAAV,EAAevN,OAAf,EAAwB+H,EAAxB,EAA4B;CAClD,OAAK8b,UAAL,CAAgB,SAAhB,EAA2BtW,GAA3B,EAAgCvN,OAAhC,EAAyC+H,EAAzC;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;;;;CAgBAyZ,OAAOjb,SAAP,CAAiBsd,UAAjB,GAA8B,UAAU5jB,IAAV,EAAgB8J,IAAhB,EAAsB/J,OAAtB,EAA+B+H,EAA/B,EAAmC;CAC/D,MAAI,eAAe,OAAOgC,IAA1B,EAAgC;CAC9BhC,SAAKgC,IAAL;CACAA,WAAOhJ,SAAP;CACD;;CAED,MAAI,eAAe,OAAOf,OAA1B,EAAmC;CACjC+H,SAAK/H,OAAL;CACAA,cAAU,IAAV;CACD;;CAED,MAAI,cAAc,KAAKuY,UAAnB,IAAiC,aAAa,KAAKA,UAAvD,EAAmE;CACjE;CACD;;CAEDvY,YAAUA,WAAW,EAArB;CACAA,UAAQkhB,QAAR,GAAmB,UAAUlhB,QAAQkhB,QAArC;;CAEA,MAAItX,SAAS;CACX3J,UAAMA,IADK;CAEX8J,UAAMA,IAFK;CAGX/J,aAASA;CAHE,GAAb;CAKA,OAAKwI,IAAL,CAAU,cAAV,EAA0BoB,MAA1B;CACA,OAAK+X,WAAL,CAAiB1d,IAAjB,CAAsB2F,MAAtB;CACA,MAAI7B,EAAJ,EAAQ,KAAKE,IAAL,CAAU,OAAV,EAAmBF,EAAnB;CACR,OAAKmb,KAAL;CACD,CA3BD;;;;;;;;CAmCA1B,OAAOjb,SAAP,CAAiB2N,KAAjB,GAAyB,YAAY;CACnC,MAAI,cAAc,KAAKqE,UAAnB,IAAiC,WAAW,KAAKA,UAArD,EAAiE;CAC/D,SAAKA,UAAL,GAAkB,SAAlB;;CAEA,QAAIhW,OAAO,IAAX;;CAEA,QAAI,KAAKof,WAAL,CAAiBziB,MAArB,EAA6B;CAC3B,WAAK+I,IAAL,CAAU,OAAV,EAAmB,YAAY;CAC7B,YAAI,KAAKgb,SAAT,EAAoB;CAClBa;CACD,SAFD,MAEO;CACL5P;CACD;CACF,OAND;CAOD,KARD,MAQO,IAAI,KAAK+O,SAAT,EAAoB;CACzBa;CACD,KAFM,MAEA;CACL5P;CACD;CACF;;CAED,WAASA,KAAT,GAAkB;CAChB3R,SAAKiX,OAAL,CAAa,cAAb;CACA9X,YAAM,6CAAN;CACAa,SAAKkgB,SAAL,CAAevO,KAAf;CACD;;CAED,WAAS6P,eAAT,GAA4B;CAC1BxhB,SAAK4F,cAAL,CAAoB,SAApB,EAA+B4b,eAA/B;CACAxhB,SAAK4F,cAAL,CAAoB,cAApB,EAAoC4b,eAApC;CACA7P;CACD;;CAED,WAAS4P,cAAT,GAA2B;;CAEzBvhB,SAAK0F,IAAL,CAAU,SAAV,EAAqB8b,eAArB;CACAxhB,SAAK0F,IAAL,CAAU,cAAV,EAA0B8b,eAA1B;CACD;;CAED,SAAO,IAAP;CACD,CAxCD;;;;;;;;CAgDAvC,OAAOjb,SAAP,CAAiB4S,OAAjB,GAA2B,UAAUjT,GAAV,EAAe;CACxCxE,UAAM,iBAAN,EAAyBwE,GAAzB;CACAsb,SAAOa,qBAAP,GAA+B,KAA/B;CACA,OAAK7Z,IAAL,CAAU,OAAV,EAAmBtC,GAAnB;CACA,OAAKsT,OAAL,CAAa,iBAAb,EAAgCtT,GAAhC;CACD,CALD;;;;;;;;CAaAsb,OAAOjb,SAAP,CAAiBiT,OAAjB,GAA2B,UAAUwK,MAAV,EAAkB5K,IAAlB,EAAwB;CACjD,MAAI,cAAc,KAAKb,UAAnB,IAAiC,WAAW,KAAKA,UAAjD,IAA+D,cAAc,KAAKA,UAAtF,EAAkG;CAChG7W,YAAM,gCAAN,EAAwCsiB,MAAxC;CACA,QAAIzhB,OAAO,IAAX;;;CAGAqhB,iBAAa,KAAKzB,iBAAlB;CACAyB,iBAAa,KAAKxB,gBAAlB;;;CAGA,SAAKK,SAAL,CAAera,kBAAf,CAAkC,OAAlC;;;CAGA,SAAKqa,SAAL,CAAevO,KAAf;;;CAGA,SAAKuO,SAAL,CAAera,kBAAf;;;CAGA,SAAKmQ,UAAL,GAAkB,QAAlB;;;CAGA,SAAKhR,EAAL,GAAU,IAAV;;;CAGA,SAAKiB,IAAL,CAAU,OAAV,EAAmBwb,MAAnB,EAA2B5K,IAA3B;;;;CAIA7W,SAAKof,WAAL,GAAmB,EAAnB;CACApf,SAAKqf,aAAL,GAAqB,CAArB;CACD;CACF,CAhCD;;;;;;;;;;CA0CAJ,OAAOjb,SAAP,CAAiBmd,cAAjB,GAAkC,UAAU1B,QAAV,EAAoB;CACpD,MAAIiC,mBAAmB,EAAvB;CACA,OAAK,IAAI3kB,IAAI,CAAR,EAAW0G,IAAIgc,SAAS9iB,MAA7B,EAAqCI,IAAI0G,CAAzC,EAA4C1G,GAA5C,EAAiD;CAC/C,QAAI,CAAC0D,MAAM,KAAKye,UAAX,EAAuBO,SAAS1iB,CAAT,CAAvB,CAAL,EAA0C2kB,iBAAiBhgB,IAAjB,CAAsB+d,SAAS1iB,CAAT,CAAtB;CAC3C;CACD,SAAO2kB,gBAAP;CACD,CAND;;;;;;;;;CC/tBA,UAAiBliB,YAAjB;;;;;;;;CAQA,eAAwB+Y,MAAxB;;;;;;;;;CCTA,gBAAiBoJ,SAAjB;;CAEA,SAASA,SAAT,CAAiBC,IAAjB,EAAuBnhB,KAAvB,EAA8B;CAC1B,QAAImN,QAAQ,EAAZ;;CAEAnN,YAAQA,SAAS,CAAjB;;CAEA,SAAK,IAAI1D,IAAI0D,SAAS,CAAtB,EAAyB1D,IAAI6kB,KAAKjlB,MAAlC,EAA0CI,GAA1C,EAA+C;CAC3C6Q,cAAM7Q,IAAI0D,KAAV,IAAmBmhB,KAAK7kB,CAAL,CAAnB;CACH;;CAED,WAAO6Q,KAAP;CACH;;;;;;;CCXD;;;;CAIA,WAAiBvI,EAAjB;;;;;;;;;;;CAWA,SAASA,EAAT,CAAab,GAAb,EAAkBka,EAAlB,EAAsBlZ,EAAtB,EAA0B;CACxBhB,MAAIa,EAAJ,CAAOqZ,EAAP,EAAWlZ,EAAX;CACA,SAAO;CACLjE,aAAS,mBAAY;CACnBiD,UAAIoB,cAAJ,CAAmB8Y,EAAnB,EAAuBlZ,EAAvB;CACD;CAHI,GAAP;CAKD;;;;;;;CCvBD;;;;CAIA,IAAIU,QAAQ,GAAGA,KAAf;;;;;;;;;;;CAWA,oBAAiB,sBAAA,CAAS1B,GAAT,EAAcgB,EAAd,EAAiB;CAChC,MAAI,YAAY,OAAOA,EAAvB,EAA2BA,KAAKhB,IAAIgB,EAAJ,CAAL;CAC3B,MAAI,cAAc,OAAOA,EAAzB,EAA6B,MAAM,IAAIxH,KAAJ,CAAU,4BAAV,CAAN;CAC7B,MAAIqC,OAAO6F,MAAMrF,IAAN,CAAWN,SAAX,EAAsB,CAAtB,CAAX;CACA,SAAO,YAAU;CACf,WAAOiF,GAAGpE,KAAH,CAASoD,GAAT,EAAcnE,KAAKmL,MAAL,CAAYtF,MAAMrF,IAAN,CAAWN,SAAX,CAAZ,CAAd,CAAP;CACD,GAFD;CAGD,CAPD;;;;;;;;;;;;;;;;CCdA;;;;CASA,MAAIpB,QAAQK,aAAiB,yBAAjB,CAAZ;;;;;;CAQAP,gBAAA,GAAiBD,UAAUigB,MAA3B;;;;;;;;;CASA,MAAI4C,SAAS;CACXC,aAAS,CADE;CAEXC,mBAAe,CAFJ;CAGXC,qBAAiB,CAHN;CAIXC,gBAAY,CAJD;CAKXC,gBAAY,CALD;CAMX1X,WAAO,CANI;CAOX2X,eAAW,CAPA;CAQXC,uBAAmB,CARR;CASXC,sBAAkB,CATP;CAUXC,qBAAiB,CAVN;CAWXC,kBAAc,CAXH;CAYX3Q,UAAM,CAZK;CAaXC,UAAM;CAbK,GAAb;;;;;;CAoBA,MAAI5L,OAAOf,QAAQlB,SAAR,CAAkBiC,IAA7B;;;;;;;;CAQA,WAASgZ,MAAT,CAAiBuD,EAAjB,EAAqBlZ,GAArB,EAA0B4B,IAA1B,EAAgC;CAC9B,SAAKsX,EAAL,GAAUA,EAAV;CACA,SAAKlZ,GAAL,GAAWA,GAAX;CACA,SAAKmZ,IAAL,GAAY,IAAZ,CAH8B;CAI9B,SAAKC,GAAL,GAAW,CAAX;CACA,SAAKC,IAAL,GAAY,EAAZ;CACA,SAAKC,aAAL,GAAqB,EAArB;CACA,SAAKC,UAAL,GAAkB,EAAlB;CACA,SAAKC,SAAL,GAAiB,KAAjB;CACA,SAAKC,YAAL,GAAoB,IAApB;CACA,SAAKC,KAAL,GAAa,EAAb;CACA,QAAI9X,QAAQA,KAAK2K,KAAjB,EAAwB;CACtB,WAAKA,KAAL,GAAa3K,KAAK2K,KAAlB;CACD;CACD,QAAI,KAAK2M,EAAL,CAAQS,WAAZ,EAAyB,KAAKvR,IAAL;CAC1B;;;;;;CAMDxM,UAAQ+Z,OAAOjb,SAAf;;;;;;;;CAQAib,SAAOjb,SAAP,CAAiBkf,SAAjB,GAA6B,YAAY;CACvC,QAAI,KAAKC,IAAT,EAAe;;CAEf,QAAIX,KAAK,KAAKA,EAAd;CACA,SAAKW,IAAL,GAAY,CACV9d,KAAGmd,EAAH,EAAO,MAAP,EAAerhB,KAAK,IAAL,EAAW,QAAX,CAAf,CADU,EAEVkE,KAAGmd,EAAH,EAAO,QAAP,EAAiBrhB,KAAK,IAAL,EAAW,UAAX,CAAjB,CAFU,EAGVkE,KAAGmd,EAAH,EAAO,OAAP,EAAgBrhB,KAAK,IAAL,EAAW,SAAX,CAAhB,CAHU,CAAZ;CAKD,GATD;;;;;;;;CAiBA8d,SAAOjb,SAAP,CAAiB0N,IAAjB,GACAuN,OAAOjb,SAAP,CAAiB8d,OAAjB,GAA2B,YAAY;CACrC,QAAI,KAAKgB,SAAT,EAAoB,OAAO,IAAP;;CAEpB,SAAKI,SAAL;CACA,SAAKV,EAAL,CAAQ9Q,IAAR,GAJqC;CAKrC,QAAI,WAAW,KAAK8Q,EAAL,CAAQxM,UAAvB,EAAmC,KAAKuI,MAAL;CACnC,SAAKtY,IAAL,CAAU,YAAV;CACA,WAAO,IAAP;CACD,GATD;;;;;;;;;CAkBAgZ,SAAOjb,SAAP,CAAiBkT,IAAjB,GAAwB,YAAY;CAClC,QAAI7W,OAAOshB,UAAQphB,SAAR,CAAX;CACAF,SAAKG,OAAL,CAAa,SAAb;CACA,SAAKyF,IAAL,CAAU7E,KAAV,CAAgB,IAAhB,EAAsBf,IAAtB;CACA,WAAO,IAAP;CACD,GALD;;;;;;;;;;;CAgBA4e,SAAOjb,SAAP,CAAiBiC,IAAjB,GAAwB,UAAUyY,EAAV,EAAc;CACpC,QAAImD,OAAOjW,cAAP,CAAsB8S,EAAtB,CAAJ,EAA+B;CAC7BzY,WAAK7E,KAAL,CAAW,IAAX,EAAiBb,SAAjB;CACA,aAAO,IAAP;CACD;;CAED,QAAIF,OAAOshB,UAAQphB,SAAR,CAAX;CACA,QAAI8G,SAAS;CACX3J,YAAM,CAAC,KAAKslB,KAAL,CAAWrZ,MAAX,KAAsBnL,SAAtB,GAAkC,KAAKwkB,KAAL,CAAWrZ,MAA7C,GAAsDyZ,YAAO/iB,IAAP,CAAvD,IAAuEkX,SAAOtO,YAA9E,GAA6FsO,SAAO8L,KAD/F;CAEX7b,YAAMnH;CAFK,KAAb;;CAKAgH,WAAO5J,OAAP,GAAiB,EAAjB;CACA4J,WAAO5J,OAAP,CAAekhB,QAAf,GAA0B,CAAC,KAAKqE,KAAN,IAAe,UAAU,KAAKA,KAAL,CAAWrE,QAA9D;;;CAGA,QAAI,eAAe,OAAOte,KAAKA,KAAK1D,MAAL,GAAc,CAAnB,CAA1B,EAAiD;CAC/CwC,YAAM,gCAAN,EAAwC,KAAKujB,GAA7C;CACA,WAAKC,IAAL,CAAU,KAAKD,GAAf,IAAsBriB,KAAKijB,GAAL,EAAtB;CACAjc,aAAOrC,EAAP,GAAY,KAAK0d,GAAL,EAAZ;CACD;;CAED,QAAI,KAAKI,SAAT,EAAoB;CAClB,WAAKzb,MAAL,CAAYA,MAAZ;CACD,KAFD,MAEO;CACL,WAAKwb,UAAL,CAAgBnhB,IAAhB,CAAqB2F,MAArB;CACD;;CAED,SAAK2b,KAAL,GAAa,EAAb;;CAEA,WAAO,IAAP;CACD,GA/BD;;;;;;;;;CAwCA/D,SAAOjb,SAAP,CAAiBqD,MAAjB,GAA0B,UAAUA,MAAV,EAAkB;CAC1CA,WAAOiC,GAAP,GAAa,KAAKA,GAAlB;CACA,SAAKkZ,EAAL,CAAQnb,MAAR,CAAeA,MAAf;CACD,GAHD;;;;;;;;CAWA4X,SAAOjb,SAAP,CAAiBua,MAAjB,GAA0B,YAAY;CACpCpf,UAAM,gCAAN;;;CAGA,QAAI,QAAQ,KAAKmK,GAAjB,EAAsB;CACpB,UAAI,KAAKuM,KAAT,EAAgB;CACd,YAAIA,QAAQ3I,QAAO,KAAK2I,KAAZ,MAAsB,QAAtB,GAAiC0D,UAAQvQ,MAAR,CAAe,KAAK6M,KAApB,CAAjC,GAA8D,KAAKA,KAA/E;CACA1W,cAAM,sCAAN,EAA8C0W,KAA9C;CACA,aAAKxO,MAAL,CAAY,EAAC3J,MAAM6Z,SAAOgM,OAAd,EAAuB1N,OAAOA,KAA9B,EAAZ;CACD,OAJD,MAIO;CACL,aAAKxO,MAAL,CAAY,EAAC3J,MAAM6Z,SAAOgM,OAAd,EAAZ;CACD;CACF;CACF,GAbD;;;;;;;;;CAsBAtE,SAAOjb,SAAP,CAAiBwa,OAAjB,GAA2B,UAAUiD,MAAV,EAAkB;CAC3CtiB,UAAM,YAAN,EAAoBsiB,MAApB;CACA,SAAKqB,SAAL,GAAiB,KAAjB;CACA,SAAKC,YAAL,GAAoB,IAApB;CACA,WAAO,KAAK/d,EAAZ;CACA,SAAKiB,IAAL,CAAU,YAAV,EAAwBwb,MAAxB;CACD,GAND;;;;;;;;;CAeAxC,SAAOjb,SAAP,CAAiBwf,QAAjB,GAA4B,UAAUnc,MAAV,EAAkB;CAC5C,QAAIoc,gBAAgBpc,OAAOiC,GAAP,KAAe,KAAKA,GAAxC;CACA,QAAIoa,qBAAqBrc,OAAO3J,IAAP,KAAgB6Z,SAAOxO,KAAvB,IAAgC1B,OAAOiC,GAAP,KAAe,GAAxE;;CAEA,QAAI,CAACma,aAAD,IAAkB,CAACC,kBAAvB,EAA2C;;CAE3C,YAAQrc,OAAO3J,IAAf;CACE,WAAK6Z,SAAOgM,OAAZ;CACE,aAAKI,SAAL;CACA;;CAEF,WAAKpM,SAAO8L,KAAZ;CACE,aAAKO,OAAL,CAAavc,MAAb;CACA;;CAEF,WAAKkQ,SAAOtO,YAAZ;CACE,aAAK2a,OAAL,CAAavc,MAAb;CACA;;CAEF,WAAKkQ,SAAOsM,GAAZ;CACE,aAAKC,KAAL,CAAWzc,MAAX;CACA;;CAEF,WAAKkQ,SAAOrO,UAAZ;CACE,aAAK4a,KAAL,CAAWzc,MAAX;CACA;;CAEF,WAAKkQ,SAAOwM,UAAZ;CACE,aAAKC,YAAL;CACA;;CAEF,WAAKzM,SAAOxO,KAAZ;CACE,aAAK9C,IAAL,CAAU,OAAV,EAAmBoB,OAAOG,IAA1B;CACA;CA3BJ;CA6BD,GAnCD;;;;;;;;;CA4CAyX,SAAOjb,SAAP,CAAiB4f,OAAjB,GAA2B,UAAUvc,MAAV,EAAkB;CAC3C,QAAIhH,OAAOgH,OAAOG,IAAP,IAAe,EAA1B;CACArI,UAAM,mBAAN,EAA2BkB,IAA3B;;CAEA,QAAI,QAAQgH,OAAOrC,EAAnB,EAAuB;CACrB7F,YAAM,iCAAN;CACAkB,WAAKqB,IAAL,CAAU,KAAKuiB,GAAL,CAAS5c,OAAOrC,EAAhB,CAAV;CACD;;CAED,QAAI,KAAK8d,SAAT,EAAoB;CAClB7c,WAAK7E,KAAL,CAAW,IAAX,EAAiBf,IAAjB;CACD,KAFD,MAEO;CACL,WAAKuiB,aAAL,CAAmBlhB,IAAnB,CAAwBrB,IAAxB;CACD;CACF,GAdD;;;;;;;;CAsBA4e,SAAOjb,SAAP,CAAiBigB,GAAjB,GAAuB,UAAUjf,EAAV,EAAc;CACnC,QAAIhF,OAAO,IAAX;CACA,QAAIkkB,OAAO,KAAX;CACA,WAAO,YAAY;;CAEjB,UAAIA,IAAJ,EAAU;CACVA,aAAO,IAAP;CACA,UAAI7jB,OAAOshB,UAAQphB,SAAR,CAAX;CACApB,YAAM,gBAAN,EAAwBkB,IAAxB;;CAEAL,WAAKqH,MAAL,CAAY;CACV3J,cAAM0lB,YAAO/iB,IAAP,IAAekX,SAAOrO,UAAtB,GAAmCqO,SAAOsM,GADtC;CAEV7e,YAAIA,EAFM;CAGVwC,cAAMnH;CAHI,OAAZ;CAKD,KAZD;CAaD,GAhBD;;;;;;;;;CAyBA4e,SAAOjb,SAAP,CAAiB8f,KAAjB,GAAyB,UAAUzc,MAAV,EAAkB;CACzC,QAAI4c,MAAM,KAAKtB,IAAL,CAAUtb,OAAOrC,EAAjB,CAAV;CACA,QAAI,eAAe,OAAOif,GAA1B,EAA+B;CAC7B9kB,YAAM,wBAAN,EAAgCkI,OAAOrC,EAAvC,EAA2CqC,OAAOG,IAAlD;CACAyc,UAAI7iB,KAAJ,CAAU,IAAV,EAAgBiG,OAAOG,IAAvB;CACA,aAAO,KAAKmb,IAAL,CAAUtb,OAAOrC,EAAjB,CAAP;CACD,KAJD,MAIO;CACL7F,YAAM,YAAN,EAAoBkI,OAAOrC,EAA3B;CACD;CACF,GATD;;;;;;;;CAiBAia,SAAOjb,SAAP,CAAiB2f,SAAjB,GAA6B,YAAY;CACvC,SAAKb,SAAL,GAAiB,IAAjB;CACA,SAAKC,YAAL,GAAoB,KAApB;CACA,SAAK9c,IAAL,CAAU,SAAV;CACA,SAAKke,YAAL;CACD,GALD;;;;;;;;CAaAlF,SAAOjb,SAAP,CAAiBmgB,YAAjB,GAAgC,YAAY;CAC1C,QAAIpnB,CAAJ;CACA,SAAKA,IAAI,CAAT,EAAYA,IAAI,KAAK6lB,aAAL,CAAmBjmB,MAAnC,EAA2CI,GAA3C,EAAgD;CAC9CkJ,WAAK7E,KAAL,CAAW,IAAX,EAAiB,KAAKwhB,aAAL,CAAmB7lB,CAAnB,CAAjB;CACD;CACD,SAAK6lB,aAAL,GAAqB,EAArB;;CAEA,SAAK7lB,IAAI,CAAT,EAAYA,IAAI,KAAK8lB,UAAL,CAAgBlmB,MAAhC,EAAwCI,GAAxC,EAA6C;CAC3C,WAAKsK,MAAL,CAAY,KAAKwb,UAAL,CAAgB9lB,CAAhB,CAAZ;CACD;CACD,SAAK8lB,UAAL,GAAkB,EAAlB;CACD,GAXD;;;;;;;;CAmBA5D,SAAOjb,SAAP,CAAiBggB,YAAjB,GAAgC,YAAY;CAC1C7kB,UAAM,wBAAN,EAAgC,KAAKmK,GAArC;CACA,SAAK/H,OAAL;CACA,SAAKid,OAAL,CAAa,sBAAb;CACD,GAJD;;;;;;;;;;CAcAS,SAAOjb,SAAP,CAAiBzC,OAAjB,GAA2B,YAAY;CACrC,QAAI,KAAK4hB,IAAT,EAAe;;CAEb,WAAK,IAAIpmB,IAAI,CAAb,EAAgBA,IAAI,KAAKomB,IAAL,CAAUxmB,MAA9B,EAAsCI,GAAtC,EAA2C;CACzC,aAAKomB,IAAL,CAAUpmB,CAAV,EAAawE,OAAb;CACD;CACD,WAAK4hB,IAAL,GAAY,IAAZ;CACD;;CAED,SAAKX,EAAL,CAAQjhB,OAAR,CAAgB,IAAhB;CACD,GAVD;;;;;;;;;CAmBA0d,SAAOjb,SAAP,CAAiB2N,KAAjB,GACAsN,OAAOjb,SAAP,CAAiBke,UAAjB,GAA8B,YAAY;CACxC,QAAI,KAAKY,SAAT,EAAoB;CAClB3jB,YAAM,4BAAN,EAAoC,KAAKmK,GAAzC;CACA,WAAKjC,MAAL,CAAY,EAAE3J,MAAM6Z,SAAOwM,UAAf,EAAZ;CACD;;;CAGD,SAAKxiB,OAAL;;CAEA,QAAI,KAAKuhB,SAAT,EAAoB;;CAElB,WAAKtE,OAAL,CAAa,sBAAb;CACD;CACD,WAAO,IAAP;CACD,GAfD;;;;;;;;;;CAyBAS,SAAOjb,SAAP,CAAiB2a,QAAjB,GAA4B,UAAUA,QAAV,EAAoB;CAC9C,SAAKqE,KAAL,CAAWrE,QAAX,GAAsBA,QAAtB;CACA,WAAO,IAAP;CACD,GAHD;;;;;;;;;;CAaAM,SAAOjb,SAAP,CAAiB2F,MAAjB,GAA0B,UAAUA,MAAV,EAAkB;CAC1C,SAAKqZ,KAAL,CAAWrZ,MAAX,GAAoBA,MAApB;CACA,WAAO,IAAP;CACD,GAHD;;;;;;;;CCjbA;;;;CAIA,aAAiBya,OAAjB;;;;;;;;;;;;;;CAcA,SAASA,OAAT,CAAiBlZ,IAAjB,EAAuB;CACrBA,SAAOA,QAAQ,EAAf;CACA,OAAKzM,EAAL,GAAUyM,KAAKmZ,GAAL,IAAY,GAAtB;CACA,OAAKC,GAAL,GAAWpZ,KAAKoZ,GAAL,IAAY,KAAvB;CACA,OAAKC,MAAL,GAAcrZ,KAAKqZ,MAAL,IAAe,CAA7B;CACA,OAAKC,MAAL,GAActZ,KAAKsZ,MAAL,GAAc,CAAd,IAAmBtZ,KAAKsZ,MAAL,IAAe,CAAlC,GAAsCtZ,KAAKsZ,MAA3C,GAAoD,CAAlE;CACA,OAAKC,QAAL,GAAgB,CAAhB;CACD;;;;;;;;;CASDL,QAAQpgB,SAAR,CAAkB0gB,QAAlB,GAA6B,YAAU;CACrC,MAAIjmB,KAAK,KAAKA,EAAL,GAAUC,KAAKimB,GAAL,CAAS,KAAKJ,MAAd,EAAsB,KAAKE,QAAL,EAAtB,CAAnB;CACA,MAAI,KAAKD,MAAT,EAAiB;CACf,QAAII,OAAQlmB,KAAKmmB,MAAL,EAAZ;CACA,QAAIC,YAAYpmB,KAAKI,KAAL,CAAW8lB,OAAO,KAAKJ,MAAZ,GAAqB/lB,EAAhC,CAAhB;CACAA,SAAK,CAACC,KAAKI,KAAL,CAAW8lB,OAAO,EAAlB,IAAwB,CAAzB,KAA+B,CAA/B,GAAoCnmB,KAAKqmB,SAAzC,GAAqDrmB,KAAKqmB,SAA/D;CACD;CACD,SAAOpmB,KAAK2lB,GAAL,CAAS5lB,EAAT,EAAa,KAAK6lB,GAAlB,IAAyB,CAAhC;CACD,CARD;;;;;;;;CAgBAF,QAAQpgB,SAAR,CAAkB+gB,KAAlB,GAA0B,YAAU;CAClC,OAAKN,QAAL,GAAgB,CAAhB;CACD,CAFD;;;;;;;;CAUAL,QAAQpgB,SAAR,CAAkBghB,MAAlB,GAA2B,UAASX,GAAT,EAAa;CACtC,OAAK5lB,EAAL,GAAU4lB,GAAV;CACD,CAFD;;;;;;;;CAUAD,QAAQpgB,SAAR,CAAkBihB,MAAlB,GAA2B,UAASX,GAAT,EAAa;CACtC,OAAKA,GAAL,GAAWA,GAAX;CACD,CAFD;;;;;;;;CAUAF,QAAQpgB,SAAR,CAAkBkhB,SAAlB,GAA8B,UAASV,MAAT,EAAgB;CAC5C,OAAKA,MAAL,GAAcA,MAAd;CACD,CAFD;;;;;;;;;;;;;CChFA;;;;CAUA,IAAIrlB,UAAQK,aAAiB,0BAAjB,CAAZ;;;;;;CAQA,IAAImM,MAAM3E,OAAOhD,SAAP,CAAiB4H,cAA3B;;;;;;CAMA,cAAiBuZ,OAAjB;;;;;;;;;;CAUA,SAASA,OAAT,CAAkBroB,GAAlB,EAAuBoO,IAAvB,EAA6B;CAC3B,MAAI,EAAE,gBAAgBia,OAAlB,CAAJ,EAAgC,OAAO,IAAIA,OAAJ,CAAYroB,GAAZ,EAAiBoO,IAAjB,CAAP;CAChC,MAAIpO,OAAQ,qBAAoBA,GAApB,yCAAoBA,GAApB,EAAZ,EAAsC;CACpCoO,WAAOpO,GAAP;CACAA,UAAM0B,SAAN;CACD;CACD0M,SAAOA,QAAQ,EAAf;;CAEAA,OAAKpG,IAAL,GAAYoG,KAAKpG,IAAL,IAAa,YAAzB;CACA,OAAKsgB,IAAL,GAAY,EAAZ;CACA,OAAKjC,IAAL,GAAY,EAAZ;CACA,OAAKjY,IAAL,GAAYA,IAAZ;CACA,OAAKma,YAAL,CAAkBna,KAAKma,YAAL,KAAsB,KAAxC;CACA,OAAKC,oBAAL,CAA0Bpa,KAAKoa,oBAAL,IAA6BC,QAAvD;CACA,OAAKC,iBAAL,CAAuBta,KAAKsa,iBAAL,IAA0B,IAAjD;CACA,OAAKC,oBAAL,CAA0Bva,KAAKua,oBAAL,IAA6B,IAAvD;CACA,OAAKC,mBAAL,CAAyBxa,KAAKwa,mBAAL,IAA4B,GAArD;CACA,OAAKC,OAAL,GAAe,IAAIvB,SAAJ,CAAY;CACzBC,SAAK,KAAKmB,iBAAL,EADoB;CAEzBlB,SAAK,KAAKmB,oBAAL,EAFoB;CAGzBjB,YAAQ,KAAKkB,mBAAL;CAHiB,GAAZ,CAAf;CAKA,OAAKjL,OAAL,CAAa,QAAQvP,KAAKuP,OAAb,GAAuB,KAAvB,GAA+BvP,KAAKuP,OAAjD;CACA,OAAKzE,UAAL,GAAkB,QAAlB;CACA,OAAKlZ,GAAL,GAAWA,GAAX;CACA,OAAKmlB,UAAL,GAAkB,EAAlB;CACA,OAAK2D,QAAL,GAAgB,IAAhB;CACA,OAAKxc,QAAL,GAAgB,KAAhB;CACA,OAAKyc,YAAL,GAAoB,EAApB;CACA,MAAIC,UAAU5a,KAAKqM,MAAL,IAAeA,QAA7B;CACA,OAAKwO,OAAL,GAAe,IAAID,QAAQld,OAAZ,EAAf;CACA,OAAKod,OAAL,GAAe,IAAIF,QAAQjd,OAAZ,EAAf;CACA,OAAKoa,WAAL,GAAmB/X,KAAK+X,WAAL,KAAqB,KAAxC;CACA,MAAI,KAAKA,WAAT,EAAsB,KAAKvR,IAAL;CACvB;;;;;;;;CAQDyT,QAAQnhB,SAAR,CAAkBiiB,OAAlB,GAA4B,YAAY;CACtC,OAAKhgB,IAAL,CAAU7E,KAAV,CAAgB,IAAhB,EAAsBb,SAAtB;CACA,OAAK,IAAI+I,GAAT,IAAgB,KAAK8b,IAArB,EAA2B;CACzB,QAAIzZ,IAAI9K,IAAJ,CAAS,KAAKukB,IAAd,EAAoB9b,GAApB,CAAJ,EAA8B;CAC5B,WAAK8b,IAAL,CAAU9b,GAAV,EAAerD,IAAf,CAAoB7E,KAApB,CAA0B,KAAKgkB,IAAL,CAAU9b,GAAV,CAA1B,EAA0C/I,SAA1C;CACD;CACF;CACF,CAPD;;;;;;;;CAeA4kB,QAAQnhB,SAAR,CAAkBkiB,eAAlB,GAAoC,YAAY;CAC9C,OAAK,IAAI5c,GAAT,IAAgB,KAAK8b,IAArB,EAA2B;CACzB,QAAIzZ,IAAI9K,IAAJ,CAAS,KAAKukB,IAAd,EAAoB9b,GAApB,CAAJ,EAA8B;CAC5B,WAAK8b,IAAL,CAAU9b,GAAV,EAAetE,EAAf,GAAoB,KAAKmhB,UAAL,CAAgB7c,GAAhB,CAApB;CACD;CACF;CACF,CAND;;;;;;;;;;CAgBA6b,QAAQnhB,SAAR,CAAkBmiB,UAAlB,GAA+B,UAAU7c,GAAV,EAAe;CAC5C,SAAO,CAACA,QAAQ,GAAR,GAAc,EAAd,GAAoBA,MAAM,GAA3B,IAAmC,KAAK8c,MAAL,CAAYphB,EAAtD;CACD,CAFD;;;;;;CAQAE,QAAQigB,QAAQnhB,SAAhB;;;;;;;;;;CAUAmhB,QAAQnhB,SAAR,CAAkBqhB,YAAlB,GAAiC,UAAU3hB,CAAV,EAAa;CAC5C,MAAI,CAACnD,UAAU5D,MAAf,EAAuB,OAAO,KAAK0pB,aAAZ;CACvB,OAAKA,aAAL,GAAqB,CAAC,CAAC3iB,CAAvB;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;;CAcAyhB,QAAQnhB,SAAR,CAAkBshB,oBAAlB,GAAyC,UAAU5hB,CAAV,EAAa;CACpD,MAAI,CAACnD,UAAU5D,MAAf,EAAuB,OAAO,KAAK2pB,qBAAZ;CACvB,OAAKA,qBAAL,GAA6B5iB,CAA7B;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;;CAcAyhB,QAAQnhB,SAAR,CAAkBwhB,iBAAlB,GAAsC,UAAU9hB,CAAV,EAAa;CACjD,MAAI,CAACnD,UAAU5D,MAAf,EAAuB,OAAO,KAAK4pB,kBAAZ;CACvB,OAAKA,kBAAL,GAA0B7iB,CAA1B;CACA,OAAKiiB,OAAL,IAAgB,KAAKA,OAAL,CAAaX,MAAb,CAAoBthB,CAApB,CAAhB;CACA,SAAO,IAAP;CACD,CALD;;CAOAyhB,QAAQnhB,SAAR,CAAkB0hB,mBAAlB,GAAwC,UAAUhiB,CAAV,EAAa;CACnD,MAAI,CAACnD,UAAU5D,MAAf,EAAuB,OAAO,KAAK6pB,oBAAZ;CACvB,OAAKA,oBAAL,GAA4B9iB,CAA5B;CACA,OAAKiiB,OAAL,IAAgB,KAAKA,OAAL,CAAaT,SAAb,CAAuBxhB,CAAvB,CAAhB;CACA,SAAO,IAAP;CACD,CALD;;;;;;;;;;CAeAyhB,QAAQnhB,SAAR,CAAkByhB,oBAAlB,GAAyC,UAAU/hB,CAAV,EAAa;CACpD,MAAI,CAACnD,UAAU5D,MAAf,EAAuB,OAAO,KAAK8pB,qBAAZ;CACvB,OAAKA,qBAAL,GAA6B/iB,CAA7B;CACA,OAAKiiB,OAAL,IAAgB,KAAKA,OAAL,CAAaV,MAAb,CAAoBvhB,CAApB,CAAhB;CACA,SAAO,IAAP;CACD,CALD;;;;;;;;;CAcAyhB,QAAQnhB,SAAR,CAAkByW,OAAlB,GAA4B,UAAU/W,CAAV,EAAa;CACvC,MAAI,CAACnD,UAAU5D,MAAf,EAAuB,OAAO,KAAK+pB,QAAZ;CACvB,OAAKA,QAAL,GAAgBhjB,CAAhB;CACA,SAAO,IAAP;CACD,CAJD;;;;;;;;;CAaAyhB,QAAQnhB,SAAR,CAAkB2iB,oBAAlB,GAAyC,YAAY;;CAEnD,MAAI,CAAC,KAAKpE,YAAN,IAAsB,KAAK8D,aAA3B,IAA4C,KAAKV,OAAL,CAAalB,QAAb,KAA0B,CAA1E,EAA6E;;CAE3E,SAAKtC,SAAL;CACD;CACF,CAND;;;;;;;;;;CAgBAgD,QAAQnhB,SAAR,CAAkB0N,IAAlB,GACAyT,QAAQnhB,SAAR,CAAkB8d,OAAlB,GAA4B,UAAUtc,EAAV,EAAc0F,IAAd,EAAoB;CAC9C/L,UAAM,eAAN,EAAuB,KAAK6W,UAA5B;CACA,MAAI,CAAC,KAAKA,UAAL,CAAgBzZ,OAAhB,CAAwB,MAAxB,CAAL,EAAsC,OAAO,IAAP;;CAEtC4C,UAAM,YAAN,EAAoB,KAAKrC,GAAzB;CACA,OAAKspB,MAAL,GAAcQ,IAAI,KAAK9pB,GAAT,EAAc,KAAKoO,IAAnB,CAAd;CACA,MAAIgL,SAAS,KAAKkQ,MAAlB;CACA,MAAIpmB,OAAO,IAAX;CACA,OAAKgW,UAAL,GAAkB,SAAlB;CACA,OAAK6Q,aAAL,GAAqB,KAArB;;;CAGA,MAAIC,UAAUzhB,KAAG6Q,MAAH,EAAW,MAAX,EAAmB,YAAY;CAC3ClW,SAAKue,MAAL;CACA/Y,UAAMA,IAAN;CACD,GAHa,CAAd;;;CAMA,MAAIuhB,WAAW1hB,KAAG6Q,MAAH,EAAW,OAAX,EAAoB,UAAU1O,IAAV,EAAgB;CACjDrI,YAAM,eAAN;CACAa,SAAKsb,OAAL;CACAtb,SAAKgW,UAAL,GAAkB,QAAlB;CACAhW,SAAKimB,OAAL,CAAa,eAAb,EAA8Bze,IAA9B;CACA,QAAIhC,EAAJ,EAAQ;CACN,UAAI7B,MAAM,IAAI3F,KAAJ,CAAU,kBAAV,CAAV;CACA2F,UAAI6D,IAAJ,GAAWA,IAAX;CACAhC,SAAG7B,GAAH;CACD,KAJD,MAIO;;CAEL3D,WAAK2mB,oBAAL;CACD;CACF,GAbc,CAAf;;;CAgBA,MAAI,UAAU,KAAKD,QAAnB,EAA6B;CAC3B,QAAIjM,UAAU,KAAKiM,QAAnB;CACAvnB,YAAM,uCAAN,EAA+Csb,OAA/C;;;CAGA,QAAIuM,QAAQ9L,WAAW,YAAY;CACjC/b,cAAM,oCAAN,EAA4Csb,OAA5C;CACAqM,cAAQvlB,OAAR;CACA2U,aAAOvE,KAAP;CACAuE,aAAOjQ,IAAP,CAAY,OAAZ,EAAqB,SAArB;CACAjG,WAAKimB,OAAL,CAAa,iBAAb,EAAgCxL,OAAhC;CACD,KANW,EAMTA,OANS,CAAZ;;CAQA,SAAK0I,IAAL,CAAUzhB,IAAV,CAAe;CACbH,eAAS,mBAAY;CACnB8f,qBAAa2F,KAAb;CACD;CAHY,KAAf;CAKD;;CAED,OAAK7D,IAAL,CAAUzhB,IAAV,CAAeolB,OAAf;CACA,OAAK3D,IAAL,CAAUzhB,IAAV,CAAeqlB,QAAf;;CAEA,SAAO,IAAP;CACD,CA3DD;;;;;;;;CAmEA5B,QAAQnhB,SAAR,CAAkBua,MAAlB,GAA2B,YAAY;CACrCpf,UAAM,MAAN;;;CAGA,OAAKmc,OAAL;;;CAGA,OAAKtF,UAAL,GAAkB,MAAlB;CACA,OAAK/P,IAAL,CAAU,MAAV;;;CAGA,MAAIiQ,SAAS,KAAKkQ,MAAlB;CACA,OAAKjD,IAAL,CAAUzhB,IAAV,CAAe2D,KAAG6Q,MAAH,EAAW,MAAX,EAAmB/U,KAAK,IAAL,EAAW,QAAX,CAAnB,CAAf;CACA,OAAKgiB,IAAL,CAAUzhB,IAAV,CAAe2D,KAAG6Q,MAAH,EAAW,MAAX,EAAmB/U,KAAK,IAAL,EAAW,QAAX,CAAnB,CAAf;CACA,OAAKgiB,IAAL,CAAUzhB,IAAV,CAAe2D,KAAG6Q,MAAH,EAAW,MAAX,EAAmB/U,KAAK,IAAL,EAAW,QAAX,CAAnB,CAAf;CACA,OAAKgiB,IAAL,CAAUzhB,IAAV,CAAe2D,KAAG6Q,MAAH,EAAW,OAAX,EAAoB/U,KAAK,IAAL,EAAW,SAAX,CAApB,CAAf;CACA,OAAKgiB,IAAL,CAAUzhB,IAAV,CAAe2D,KAAG6Q,MAAH,EAAW,OAAX,EAAoB/U,KAAK,IAAL,EAAW,SAAX,CAApB,CAAf;CACA,OAAKgiB,IAAL,CAAUzhB,IAAV,CAAe2D,KAAG,KAAK2gB,OAAR,EAAiB,SAAjB,EAA4B7kB,KAAK,IAAL,EAAW,WAAX,CAA5B,CAAf;CACD,CAlBD;;;;;;;;CA0BAgkB,QAAQnhB,SAAR,CAAkBijB,MAAlB,GAA2B,YAAY;CACrC,OAAKrB,QAAL,GAAgB,IAAI1lB,IAAJ,EAAhB;CACA,OAAK+lB,OAAL,CAAa,MAAb;CACD,CAHD;;;;;;;;CAWAd,QAAQnhB,SAAR,CAAkBkjB,MAAlB,GAA2B,YAAY;CACrC,OAAKjB,OAAL,CAAa,MAAb,EAAqB,IAAI/lB,IAAJ,KAAa,KAAK0lB,QAAvC;CACD,CAFD;;;;;;;;CAUAT,QAAQnhB,SAAR,CAAkBmjB,MAAlB,GAA2B,UAAU3f,IAAV,EAAgB;CACzC,OAAKwe,OAAL,CAAajc,GAAb,CAAiBvC,IAAjB;CACD,CAFD;;;;;;;;CAUA2d,QAAQnhB,SAAR,CAAkBojB,SAAlB,GAA8B,UAAU/f,MAAV,EAAkB;CAC9C,OAAKpB,IAAL,CAAU,QAAV,EAAoBoB,MAApB;CACD,CAFD;;;;;;;;CAUA8d,QAAQnhB,SAAR,CAAkB4W,OAAlB,GAA4B,UAAUjX,GAAV,EAAe;CACzCxE,UAAM,OAAN,EAAewE,GAAf;CACA,OAAKsiB,OAAL,CAAa,OAAb,EAAsBtiB,GAAtB;CACD,CAHD;;;;;;;;;CAYAwhB,QAAQnhB,SAAR,CAAkBkS,MAAlB,GAA2B,UAAU5M,GAAV,EAAe4B,IAAf,EAAqB;CAC9C,MAAIgL,SAAS,KAAKkP,IAAL,CAAU9b,GAAV,CAAb;CACA,MAAI,CAAC4M,MAAL,EAAa;CACXA,aAAS,IAAI+I,QAAJ,CAAW,IAAX,EAAiB3V,GAAjB,EAAsB4B,IAAtB,CAAT;CACA,SAAKka,IAAL,CAAU9b,GAAV,IAAiB4M,MAAjB;CACA,QAAIlW,OAAO,IAAX;CACAkW,WAAO7Q,EAAP,CAAU,YAAV,EAAwBgiB,YAAxB;CACAnR,WAAO7Q,EAAP,CAAU,SAAV,EAAqB,YAAY;CAC/B6Q,aAAOlR,EAAP,GAAYhF,KAAKmmB,UAAL,CAAgB7c,GAAhB,CAAZ;CACD,KAFD;;CAIA,QAAI,KAAK2Z,WAAT,EAAsB;;CAEpBoE;CACD;CACF;;CAED,WAASA,YAAT,GAAyB;CACvB,QAAI,CAAC,CAAC9qB,MAAQyD,KAAKiiB,UAAb,EAAyB/L,MAAzB,CAAN,EAAwC;CACtClW,WAAKiiB,UAAL,CAAgBvgB,IAAhB,CAAqBwU,MAArB;CACD;CACF;;CAED,SAAOA,MAAP;CACD,CAxBD;;;;;;;;CAgCAiP,QAAQnhB,SAAR,CAAkBzC,OAAlB,GAA4B,UAAU2U,MAAV,EAAkB;CAC5C,MAAIzV,WAAQlE,MAAQ,KAAK0lB,UAAb,EAAyB/L,MAAzB,CAAZ;CACA,MAAI,CAACzV,QAAL,EAAY,KAAKwhB,UAAL,CAAgBnhB,MAAhB,CAAuBL,QAAvB,EAA8B,CAA9B;CACZ,MAAI,KAAKwhB,UAAL,CAAgBtlB,MAApB,EAA4B;;CAE5B,OAAKgV,KAAL;CACD,CAND;;;;;;;;;CAeAwT,QAAQnhB,SAAR,CAAkBqD,MAAlB,GAA2B,UAAUA,MAAV,EAAkB;CAC3ClI,UAAM,mBAAN,EAA2BkI,MAA3B;CACA,MAAIrH,OAAO,IAAX;CACA,MAAIqH,OAAOwO,KAAP,IAAgBxO,OAAO3J,IAAP,KAAgB,CAApC,EAAuC2J,OAAOiC,GAAP,IAAc,MAAMjC,OAAOwO,KAA3B;;CAEvC,MAAI,CAAC7V,KAAKoJ,QAAV,EAAoB;;CAElBpJ,SAAKoJ,QAAL,GAAgB,IAAhB;CACA,SAAK2c,OAAL,CAAa/c,MAAb,CAAoB3B,MAApB,EAA4B,UAAUoN,cAAV,EAA0B;CACpD,WAAK,IAAI1X,IAAI,CAAb,EAAgBA,IAAI0X,eAAe9X,MAAnC,EAA2CI,GAA3C,EAAgD;CAC9CiD,aAAKomB,MAAL,CAAYjP,KAAZ,CAAkB1C,eAAe1X,CAAf,CAAlB,EAAqCsK,OAAO5J,OAA5C;CACD;CACDuC,WAAKoJ,QAAL,GAAgB,KAAhB;CACApJ,WAAKsnB,kBAAL;CACD,KAND;CAOD,GAVD,MAUO;;CACLtnB,SAAK6lB,YAAL,CAAkBnkB,IAAlB,CAAuB2F,MAAvB;CACD;CACF,CAlBD;;;;;;;;;CA2BA8d,QAAQnhB,SAAR,CAAkBsjB,kBAAlB,GAAuC,YAAY;CACjD,MAAI,KAAKzB,YAAL,CAAkBlpB,MAAlB,GAA2B,CAA3B,IAAgC,CAAC,KAAKyM,QAA1C,EAAoD;CAClD,QAAI3B,OAAO,KAAKoe,YAAL,CAAkB3X,KAAlB,EAAX;CACA,SAAK7G,MAAL,CAAYI,IAAZ;CACD;CACF,CALD;;;;;;;;CAaA0d,QAAQnhB,SAAR,CAAkBsX,OAAlB,GAA4B,YAAY;CACtCnc,UAAM,SAAN;;CAEA,MAAIooB,aAAa,KAAKpE,IAAL,CAAUxmB,MAA3B;CACA,OAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIwqB,UAApB,EAAgCxqB,GAAhC,EAAqC;CACnC,QAAIyqB,MAAM,KAAKrE,IAAL,CAAUjV,KAAV,EAAV;CACAsZ,QAAIjmB,OAAJ;CACD;;CAED,OAAKskB,YAAL,GAAoB,EAApB;CACA,OAAKzc,QAAL,GAAgB,KAAhB;CACA,OAAKwc,QAAL,GAAgB,IAAhB;;CAEA,OAAKI,OAAL,CAAazkB,OAAb;CACD,CAdD;;;;;;;;CAsBA4jB,QAAQnhB,SAAR,CAAkB2N,KAAlB,GACAwT,QAAQnhB,SAAR,CAAkBke,UAAlB,GAA+B,YAAY;CACzC/iB,UAAM,YAAN;CACA,OAAK0nB,aAAL,GAAqB,IAArB;CACA,OAAKtE,YAAL,GAAoB,KAApB;CACA,MAAI,cAAc,KAAKvM,UAAvB,EAAmC;;;CAGjC,SAAKsF,OAAL;CACD;CACD,OAAKqK,OAAL,CAAaZ,KAAb;CACA,OAAK/O,UAAL,GAAkB,QAAlB;CACA,MAAI,KAAKoQ,MAAT,EAAiB,KAAKA,MAAL,CAAYzU,KAAZ;CAClB,CAbD;;;;;;;;CAqBAwT,QAAQnhB,SAAR,CAAkBwa,OAAlB,GAA4B,UAAUiD,MAAV,EAAkB;CAC5CtiB,UAAM,SAAN;;CAEA,OAAKmc,OAAL;CACA,OAAKqK,OAAL,CAAaZ,KAAb;CACA,OAAK/O,UAAL,GAAkB,QAAlB;CACA,OAAK/P,IAAL,CAAU,OAAV,EAAmBwb,MAAnB;;CAEA,MAAI,KAAK4E,aAAL,IAAsB,CAAC,KAAKQ,aAAhC,EAA+C;CAC7C,SAAK1E,SAAL;CACD;CACF,CAXD;;;;;;;;CAmBAgD,QAAQnhB,SAAR,CAAkBme,SAAlB,GAA8B,YAAY;CACxC,MAAI,KAAKI,YAAL,IAAqB,KAAKsE,aAA9B,EAA6C,OAAO,IAAP;;CAE7C,MAAI7mB,OAAO,IAAX;;CAEA,MAAI,KAAK2lB,OAAL,CAAalB,QAAb,IAAyB,KAAK6B,qBAAlC,EAAyD;CACvDnnB,YAAM,kBAAN;CACA,SAAKwmB,OAAL,CAAaZ,KAAb;CACA,SAAKkB,OAAL,CAAa,kBAAb;CACA,SAAK1D,YAAL,GAAoB,KAApB;CACD,GALD,MAKO;CACL,QAAIkF,QAAQ,KAAK9B,OAAL,CAAajB,QAAb,EAAZ;CACAvlB,YAAM,yCAAN,EAAiDsoB,KAAjD;;CAEA,SAAKlF,YAAL,GAAoB,IAApB;CACA,QAAIyE,QAAQ9L,WAAW,YAAY;CACjC,UAAIlb,KAAK6mB,aAAT,EAAwB;;CAExB1nB,cAAM,sBAAN;CACAa,WAAKimB,OAAL,CAAa,mBAAb,EAAkCjmB,KAAK2lB,OAAL,CAAalB,QAA/C;CACAzkB,WAAKimB,OAAL,CAAa,cAAb,EAA6BjmB,KAAK2lB,OAAL,CAAalB,QAA1C;;;CAGA,UAAIzkB,KAAK6mB,aAAT,EAAwB;;CAExB7mB,WAAK0R,IAAL,CAAU,UAAU/N,GAAV,EAAe;CACvB,YAAIA,GAAJ,EAAS;CACPxE,kBAAM,yBAAN;CACAa,eAAKuiB,YAAL,GAAoB,KAApB;CACAviB,eAAKmiB,SAAL;CACAniB,eAAKimB,OAAL,CAAa,iBAAb,EAAgCtiB,IAAI6D,IAApC;CACD,SALD,MAKO;CACLrI,kBAAM,mBAAN;CACAa,eAAK0nB,WAAL;CACD;CACF,OAVD;CAWD,KArBW,EAqBTD,KArBS,CAAZ;;CAuBA,SAAKtE,IAAL,CAAUzhB,IAAV,CAAe;CACbH,eAAS,mBAAY;CACnB8f,qBAAa2F,KAAb;CACD;CAHY,KAAf;CAKD;CACF,CA5CD;;;;;;;;CAoDA7B,QAAQnhB,SAAR,CAAkB0jB,WAAlB,GAAgC,YAAY;CAC1C,MAAIC,UAAU,KAAKhC,OAAL,CAAalB,QAA3B;CACA,OAAKlC,YAAL,GAAoB,KAApB;CACA,OAAKoD,OAAL,CAAaZ,KAAb;CACA,OAAKmB,eAAL;CACA,OAAKD,OAAL,CAAa,WAAb,EAA0B0B,OAA1B;CACD,CAND;;;;;;;;;;;;CCrjBA;;;;CAOA,MAAIxoB,QAAQK,aAAiB,kBAAjB,CAAZ;;;;;;CAMAP,gBAAA,GAAiBD,UAAU2Q,MAA3B;;;;;;CAMA,MAAIiY,QAAQ5oB,gBAAA,GAAmB,EAA/B;;;;;;;;;;;;;;;CAeA,WAAS2Q,MAAT,CAAiB7S,GAAjB,EAAsBoO,IAAtB,EAA4B;CAC1B,QAAI,QAAOpO,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;CAC3BoO,aAAOpO,GAAP;CACAA,YAAM0B,SAAN;CACD;;CAED0M,WAAOA,QAAQ,EAAf;;CAEA,QAAI2c,SAASvjB,MAAIxH,GAAJ,CAAb;CACA,QAAIE,SAAS6qB,OAAO7qB,MAApB;CACA,QAAIgI,KAAK6iB,OAAO7iB,EAAhB;CACA,QAAIF,OAAO+iB,OAAO/iB,IAAlB;CACA,QAAI2e,gBAAgBmE,MAAM5iB,EAAN,KAAaF,QAAQ8iB,MAAM5iB,EAAN,EAAUogB,IAAnD;CACA,QAAI0C,gBAAgB5c,KAAK6c,QAAL,IAAiB7c,KAAK,sBAAL,CAAjB,IACA,UAAUA,KAAK8c,SADf,IAC4BvE,aADhD;;CAGA,QAAIjB,EAAJ;;CAEA,QAAIsF,aAAJ,EAAmB;CACjB3oB,YAAM,8BAAN,EAAsCnC,MAAtC;CACAwlB,WAAK2C,UAAQnoB,MAAR,EAAgBkO,IAAhB,CAAL;CACD,KAHD,MAGO;CACL,UAAI,CAAC0c,MAAM5iB,EAAN,CAAL,EAAgB;CACd7F,cAAM,wBAAN,EAAgCnC,MAAhC;CACA4qB,cAAM5iB,EAAN,IAAYmgB,UAAQnoB,MAAR,EAAgBkO,IAAhB,CAAZ;CACD;CACDsX,WAAKoF,MAAM5iB,EAAN,CAAL;CACD;CACD,QAAI6iB,OAAOhS,KAAP,IAAgB,CAAC3K,KAAK2K,KAA1B,EAAiC;CAC/B3K,WAAK2K,KAAL,GAAagS,OAAOhS,KAApB;CACD;CACD,WAAO2M,GAAGtM,MAAH,CAAU2R,OAAO/iB,IAAjB,EAAuBoG,IAAvB,CAAP;CACD;;;;;;;;CAQDlM,kBAAA,GAAmBuY,SAAO5S,QAA1B;;;;;;;;;CASA3F,iBAAA,GAAkB2Q,MAAlB;;;;;;;;CAQA3Q,iBAAA,GAAkBmmB,SAAlB;CACAnmB,gBAAA,GAAiBuZ,QAAjB;;;;;;;;CC3Fe,SAAS0P,MAAT,CAAgBC,CAAhB,EAAmB;CAAA,QACxBC,SADwB;CAAA;;CAE1B,2BAAY5qB,CAAZ,EAAeE,OAAf,EAAwB;CAAA;;CACpB,gBAAIA,YAAYe,SAAhB,EAA2B;CACvB,sBAAM,IAAIR,KAAJ,CAAU,gCAAV,CAAN;CACH;CACDP,oBAAQ2qB,mBAAR,GAA8B,IAA9B;CACA3qB,oBAAQ4qB,cAAR,GAAyB5qB,QAAQ4qB,cAAR,IAA0B,KAAnD;CACA,gBAAI5qB,QAAQ6qB,QAAR,KAAqB,KAAzB,EAAgC;CAC5B7qB,wBAAQ6qB,QAAR,GAAmB,IAAnB;CACH;;CARmB,6HASd/qB,CATc,EASXE,OATW;;CAUpB,kBAAK8qB,SAAL,GAAiB,KAAjB;CACA,kBAAK9qB,OAAL,GAAeA,OAAf;CACAA,oBAAQ6G,GAAR,GAAc7G,QAAQ6G,GAAR,IAAe,sCAA7B;CACA,gBAAI4R,SAASzY,QAAQyY,MAAR,IAAkBsM,MAAG/kB,QAAQ6G,GAAX,EAAgB7G,QAAQA,OAAxB,CAA/B;CACA,kBAAKyY,MAAL,GAAcA,MAAd;CACA,gBAAIlW,YAAJ;;CAEA;CACA,gBAAIwoB,mBAAmBtS,MAAvB;CACA,gBAAIuS,cAAc,CACd,EAACC,MAAM,8BAAP,EADc,EAEd,EAACA,MAAM,6BAAP,EAAsCC,UAAU,QAAhD,EAA0DC,YAAY,MAAtE,EAFc,CAAlB;CAIA,gBAAIC,MAAM,EAAV;AACA,CACA,kBAAKA,GAAL,GAAWA,GAAX;CACA,kBAAKC,IAAL,GAAYD,GAAZ;AACA,CACA,gBAAIE,QAAQ,EAAZ;CACA,gBAAIC,sBAAsB,EAA1B;CACA,gBAAIC,OAAJ;CACA,kBAAKA,OAAL,GAAeA,OAAf;;CAEH,qBAASC,WAAT,CAAqBC,OAArB,EAA8BC,OAA9B,EAAuC;CACnC,oBAAI3e,GAAJ,EAASgC,KAAT;CACA,uBAAO,SAASgS,SAAT,CAAmBlZ,KAAnB,EAA0B;CAC7B,wBAAI,OAAOA,MAAMiC,IAAb,KAAsB,QAA1B,EAAoC;CAChCiD,8BAAM,IAAI6B,UAAJ,CAAe/I,SAASgC,MAAMiC,IAAf,CAAf,CAAN;CACAiF,gCAAQ,CAAR;CACA;CACH;CACD,wBAAIjF,OAAO,IAAI8E,UAAJ,CAAe/G,MAAMiC,IAArB,CAAX;CACAiD,wBAAIuG,GAAJ,CAAQxJ,IAAR,EAAciF,KAAd;CACAA,6BAASjF,KAAK4E,UAAd;CACA,wBAAIK,UAAUhC,IAAI2B,UAAlB,EAA8B;CAC1B+c,gCAAQE,cAAR,CAAuBD,OAAvB,EAAgC3e,GAAhC;CACH;CACJ,iBAZD;CAaH;;CAEE,qBAASjJ,IAAT,CAAc2nB,OAAd,EAAuB;CACnBX,iCAAiBnjB,EAAjB,CAAoB,SAApB,EAA+B,YAAW;CACtCikB,sCAAkBH,QAAQ1rB,OAAR,CAAgB8rB,IAAlC,EAAwC,EAAC,0BAA0B,OAA3B,EAAxC;CACH,iBAFD;;CAIAf,iCAAiBnjB,EAAjB,CAAoB,SAApB,EAA+B,UAAU4jB,OAAV,EAAmB;CAC9CrmB,2BAAOqmB,OAAP,GAAiBA,OAAjB;CACH,iBAFD;;CAIAT,iCAAiBnjB,EAAjB,CAAoB,YAApB,EAAkC,YAAW;CACzC;;CAEA,yBAAK+jB,OAAL,IAAgBJ,mBAAhB,EAAqC;CACjCA,4CAAoBI,OAApB,EAA6BI,MAA7B;CACH;CACD,yBAAKJ,OAAL,IAAgBL,KAAhB,EAAuB;CACnBA,8BAAMK,OAAN,EAAezX,KAAf;CACH;;CAEDoX,4BAAQ,EAAR;CACAC,0CAAsB,EAAtB;CACH,iBAZD;;CAcA,yBAASM,iBAAT,CAA2BG,OAA3B,EAAoCC,QAApC,EAA8C;CAC1ClB,qCAAiBviB,IAAjB,CAAsB,MAAtB,EAA8B,EAAC,WAAWwjB,OAAZ,EAAqB,YAAYC,QAAjC,EAA9B;CACAP,4BAAQQ,MAAR,GAAiBnB,iBAAiBxjB,EAAlC;CACH;;CAODwjB,iCAAiBnjB,EAAjB,CAAoB,SAApB,EAA+B,UAASukB,MAAT,EAAiB;CAC5C,wBAAIR,UAAUQ,OAAOR,OAArB;;CAEA,wBAAIA,WAAWL,KAAf,EAAsB;CAClB;CACA;CACH;;CAED,wBAAIc,kBAAkB,IAAIC,iBAAJ,CAAsB,EAAC,cAAcrB,WAAf,EAAtB,CAAtB;CACAM,0BAAMK,OAAN,IAAiBS,eAAjB;;CAEA,wBAAIE,cAAcF,gBAAgBG,iBAAhB,CAAkC,MAAlC,CAAlB;CACA,wBAAIC,kBAAkBJ,gBAAgBG,iBAAhB,CAAkC,WAAlC,CAAtB;;CAEAD,gCAAY7W,UAAZ,GAAyB,aAAzB;CACA+W,oCAAgB/W,UAAhB,GAA6B,aAA7B;;CAEAiW,4BAAQN,GAAR,CAAYO,OAAZ,IAAuBW,WAAvB;CACAZ,4BAAQL,IAAR,CAAaM,OAAb,IAAwBa,eAAxB;;CAEAd,4BAAQe,UAAR,CAAmBd,OAAnB,EAA4B,QAA5B;;CAEHW,gCAAYtL,SAAZ,GAAwByK,YAAYC,OAAZ,EAAqBC,OAArB,CAAxB;CACAa,oCAAgBxL,SAAhB,GAA4B,UAAUjiB,CAAV,EAAa;CACrC2sB,gCAAQgB,aAAR,CAAsBf,OAAtB,EAA+B5sB,EAAEgL,IAAjC;CACH,qBAFD;;CAIGqiB,oCAAgBO,cAAhB,GAAiC,UAAS7kB,KAAT,EAAgB;CAC7C,4BAAIA,MAAM8kB,SAAV,EAAqB;CACjB7B,6CAAiBviB,IAAjB,CAAsB,mBAAtB,EAA2C;CACvC,2CAAWmjB,OAD4B;CAEvC,iDAAiB;CACb,qDAAiB7jB,MAAM8kB,SAAN,CAAgBC,aADpB;CAEb,iDAAa/kB,MAAM8kB,SAAN,CAAgBA;CAFhB;CAFsB,6BAA3C;CAOH;CACJ,qBAVD;;CAYA,wBAAIT,OAAOW,mBAAX,EAAgC;CAC5BV,wCAAgBW,WAAhB,CACI,UAAUC,iBAAV,EAA6B;CACzBZ,4CAAgBa,mBAAhB,CAAoCD,iBAApC,EACI,YAAW;CACPjC,iDAAiBviB,IAAjB,CAAsB,yBAAtB,EACI,EAAC,WAAWmjB,OAAZ,EAAqB,uBAAuBqB,iBAA5C,EADJ;CAEH,6BAJL,EAKI,YAAW;CAAEE,sCAAM,mCAAN;CAA6C,6BAL9D;CAOH,yBATL,EAUI,UAAUngB,KAAV,EAAiB;CACbtJ,oCAAQD,GAAR,CAAY,uBAAZ,EAAqCuJ,KAArC;CACH,yBAZL;CAaH;CACJ,iBAtDD;;CAyDA;;;;;;CAMAge,iCAAiBnjB,EAAjB,CAAoB,oBAApB,EAA0C,UAASukB,MAAT,EAAiB;CACvD,wBAAIR,UAAUQ,OAAOR,OAArB;CACA,wBAAIwB,OAAO7B,MAAMK,OAAN,CAAX;;CAEAwB,yBAAKC,aAAL,GAAqB,UAAUtlB,KAAV,EAAiB;CAClC,4BAAIwkB,cAAcxkB,MAAMkkB,OAAxB;CACAM,oCAAY7W,UAAZ,GAAyB,aAAzB;CACA,4BAAI6W,YAAYe,KAAZ,IAAqB,WAAzB,EAAsC;CACrCf,wCAAYtL,SAAZ,GAAwByK,YAAYC,OAAZ,EAAqBC,OAArB,CAAxB;CACA,yBAFD,MAEO;CACNW,wCAAYtL,SAAZ,GAAwB,UAAUjiB,CAAV,EAAa;CACjC2sB,wCAAQgB,aAAR,CAAsBf,OAAtB,EAA+B5sB,EAAEgL,IAAjC;CACH,6BAFD;CAGA;CACJ,qBAVD;;CAYA,wBAAIujB,qBAAqBnB,OAAOoB,mBAAhC;;CAEA,wBAAInU,OAAO,IAAIoU,qBAAJ,CAA0BF,kBAA1B,CAAX;CACA,wBAAIG,QAAQN,KAAKO,oBAAL,CAA0BtU,IAA1B,EACR,YAAW;CACP,4BAAIkU,mBAAmBrtB,IAAnB,IAA2B,OAA/B,EAAwC;CACpCktB,iCAAKQ,YAAL,CACI,UAASX,iBAAT,EAA4B;CACxBG,qCAAKF,mBAAL,CAAyBD,iBAAzB,EACI,YAAW;CACPjC,qDAAiBviB,IAAjB,CAAsB,yBAAtB,EACI,EAAC,WAAWmjB,OAAZ,EAAqB,uBAAuBqB,iBAA5C,EADJ;CAEH,iCAJL,EAKI,YAAW;CAAEE,0CAAM,oCAAN;CAA8C,iCAL/D;CAOH,6BATL,EAUI,UAASngB,KAAT,EAAgB;CACZtJ,wCAAQD,GAAR,CAAY,yBAAZ,EAAuCuJ,KAAvC;CACH,6BAZL;CAaH;CACJ,qBAjBO,EAkBR,UAASA,KAAT,EAAgB;CACZtJ,gCAAQD,GAAR,CAAY,8BAAZ,EAA4CuJ,KAA5C;CACH,qBApBO,CAAZ;CAuBH,iBA1CD;;CA4CAge,iCAAiBnjB,EAAjB,CAAoB,cAApB,EAAoC,UAASukB,MAAT,EAAiB;CACjD,wBAAIgB,OAAO7B,MAAMa,OAAOR,OAAb,CAAX;CACA,wBAAIiC,gBAAgBzB,OAAOyB,aAA3B;CACAT,yBAAKU,eAAL,CAAqB,IAAIC,eAAJ,CAAoBF,aAApB,CAArB;CACH,iBAJD;;CAOA7C,iCAAiBnjB,EAAjB,CAAoB,YAApB,EAAkC,UAASukB,MAAT,EAAiB;CAC/C,wBAAIR,UAAUQ,OAAOR,OAArB;CACAD,4BAAQqC,QAAR,CAAiBpC,OAAjB;CACA,wBAAIA,WAAWJ,mBAAf,EAAoC;CAChCA,4CAAoBI,OAApB,EAA6BI,MAA7B;CACH;CACD,wBAAIJ,WAAWL,KAAf,EAAsB;CAClBA,8BAAMK,OAAN,EAAezX,KAAf;CACH;;CAED,2BAAOoX,MAAMK,OAAN,CAAP;CACA,2BAAOJ,oBAAoBY,OAAOR,OAA3B,CAAP;CACH,iBAZD;CAaH;CACD5nB,iBAAKxB,IAAL;CACA;CApNoB;CAqNvB;;CAvNyB;CAAA;CAAA,yCAyNb;CAzNa;CAAA;CAAA,sCA2NhB;CA3NgB;CAAA;CAAA,wCA6Nd;CA7Nc;CAAA;CAAA,iCAgOrByrB,GAhOqB,EAgOhBnpB,OAhOgB,EAgOP;CACfpB,wBAAQD,GAAR,CAAY,kDAAZ;CACA,yBAASyqB,KAAT,CAAe3B,WAAf,EAA4B4B,KAA5B,EAAmC;CAC/B,wBAAI5B,YAAY/T,UAAZ,KAA2B,MAA/B,EAAuC;CACnC,4BAAI4V,YAAY,KAAhB;CACA,4BAAI9pB,MAAM6pB,MAAMvf,UAAhB;CACA,4BAAI/N,IAAIyD,MAAM8pB,SAAN,GAAkB,CAA1B;CACA7B,oCAAY7S,IAAZ,CAAiBpV,GAAjB;CACA;CACA,6BAAK,IAAI/E,IAAI,CAAb,EAAgBA,IAAIsB,CAApB,EAAuBtB,GAAvB,EAA4B;CACxB,gCAAIkP,QAAQlP,IAAI6uB,SAAhB;CAAA,gCACI1f,MAAM,CAACnP,IAAI,CAAL,IAAU6uB,SADpB;CAEA7B,wCAAY7S,IAAZ,CAAiByU,MAAME,QAAN,CAAe5f,KAAf,EAAsBC,GAAtB,CAAjB;CACH;CACD;CACA,4BAAIpK,MAAM8pB,SAAV,EAAqB;CACjB7B,wCAAY7S,IAAZ,CAAiByU,MAAME,QAAN,CAAextB,IAAIutB,SAAnB,CAAjB;CACH;CACJ,qBAfD,MAeO;CACH1Q,mCAAWwQ,KAAX,EAAkB,GAAlB,EAAuB3B,WAAvB,EAAoC4B,KAApC;CACH;CACJ;CACDD,sBAAM,KAAK5C,IAAL,CAAU2C,GAAV,CAAN,EAAsB,IAAInf,UAAJ,CAAehK,OAAf,CAAtB;CACH;CAvPyB;CAAA;CAAA,sCAyPhBA,OAzPgB,EAyPP;CACf,qBAAK,IAAI8mB,OAAT,IAAoB,KAAKP,GAAzB,EAA8B;CAAA,wBACjB6C,KADiB,GAC1B,SAASA,KAAT,CAAe3B,WAAf,EAA4B4B,KAA5B,EAAmC;CAC/B,4BAAI5B,YAAY/T,UAAZ,KAA2B,MAA/B,EAAuC;CACnC,gCAAI4V,YAAY,KAAhB;CACA,gCAAI9pB,MAAM6pB,MAAMvf,UAAhB;CACA,gCAAI/N,IAAIyD,MAAM8pB,SAAN,GAAkB,CAA1B;CACA7B,wCAAY7S,IAAZ,CAAiBpV,GAAjB;CACA;CACA,iCAAK,IAAI/E,IAAI,CAAb,EAAgBA,IAAIsB,CAApB,EAAuBtB,GAAvB,EAA4B;CACxB,oCAAIkP,QAAQlP,IAAI6uB,SAAhB;CAAA,oCACI1f,MAAM,CAACnP,IAAI,CAAL,IAAU6uB,SADpB;CAEA7B,4CAAY7S,IAAZ,CAAiByU,MAAME,QAAN,CAAe5f,KAAf,EAAsBC,GAAtB,CAAjB;CACH;CACD;CACA,gCAAIpK,MAAM8pB,SAAV,EAAqB;CACjB7B,4CAAY7S,IAAZ,CAAiByU,MAAME,QAAN,CAAextB,IAAIutB,SAAnB,CAAjB;CACH;CACJ,yBAfD,MAeO;CACH1qB,oCAAQD,GAAR,CAAY,kCAAZ,EAAgDmoB,OAAhD;CACH;CACJ,qBApByB;;CAqB1BsC,0BAAM,KAAK7C,GAAL,CAASO,OAAT,CAAN,EAAyB,IAAI9c,UAAJ,CAAehK,OAAf,CAAzB;CACH;CACJ;CAjRyB;CAAA;CAAA,6CAmRT;CACb,uBAAO,KAAK4T,MAAL,CAAY6M,YAAnB;CACH;CArRyB;CAAA;CAAA,MACNmF,EAAE4D,iBADI;;CAuR9B3D,cAAU3F,EAAV,GAAeA,KAAf;CACA0F,MAAE,QAAF,IAAcC,SAAd;CACH;;CAED,IAAI,OAAOD,CAAP,KAAa,WAAjB,EAA8B;CAC1BD,WAAOC,CAAP,EAD0B;CAE7B;;;;;;;;"}